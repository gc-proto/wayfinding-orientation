<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
   <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Calculate your expenses and percentage of use - Employment use of a work space in the home – Canada.ca</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name=”robots” content=”noindex, follow”>
    <!-- Meta data -->
    <!-- Meta data-->
    <!-- Load closure template scripts -->
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_30/cdts/compiled/soyutils.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_30/cdts/compiled/wet-en.js"></script>
    <link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet">
    <link href="../css/cews.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <!-- Write closure template -->
    <script type="text/javascript">
        document.write(wet.builder.refTop({}));
    </script>
    <style>
        /* Styled div design */
        
        .fa-corner> :not(span) {
            padding-right: 15px;
        }
        
        div.fa-corner,
        div.fa-corner-inverse {
            position: relative;
            margin-bottom: 50px;
            margin-right: 15px;
        }
        
        div.fa-corner:before {
            content: "";
            position: absolute;
            right: 1.25em;
            z-index: -1;
            top: 0;
            height: 4px;
            width: 100px;
            background: #2572b4;
            margin-top: -6px;
        }
        
        div.fa-corner:after {
            content: "";
            position: absolute;
            right: 0;
            z-index: -1;
            top: 1.2em;
            width: 4px;
            height: 100px;
            background: #2572b4;
        }
        
        .fa-corner-icon {
            float: right;
            margin-top: -0.6em;
            margin-right: -0.5em;
            font-size: 2.5em;
            color: #2572b4;
            background-color: #fff;
            padding: 0px 0px 5px 5px;
        }
        /*inverse */
        
        div.fa-corner-inverse {
            padding-left: 1.7em;
            margin-left: 20px;
        }
        /*  div.fa-corner-inverse:after {
            content : "";
            position: absolute;
            left : 1.25em;
            z-index: -1;
            top : 0;
            height : 6px;
            width : 100px;
            background: #2572b4;
            margin-top:-6px;
            }
            */
        
        div.fa-corner-inverse:before {
            content: "";
            position: absolute;
            left: 0;
            z-index: -1;
            width: 1px;
            height: 100%;
            background: #2572b4;
        }
        
        .fa-corner-inverse .fa-corner-icon {
            float: left;
            margin-top: 0em;
            margin-left: -1.4em;
            font-size: 1.75em;
            color: #2572b4;
            background-color: #fff;
            padding: 2px 25px 2px 0px;
        }
        
        .fa-corner-icon.fa-stack {
            height: 1em;
            line-height: 1em;
            width: 1.25em;
        }
        
        .fa-corner-icon>.fa-stack-2x {
            font-size: 1em;
            left: 3px;
        }
        
        .fa-corner-icon.fa-corner-icon>.fa-stack-1x {
            font-size: 0.5em;
            left: 3px;
        }
        /*  div.fa-corner h2, div.fa-corner h3, div.fa-corner-inverse h2, div.fa-corner-inverse h3 {
            color: #2572b4;
            margin-top: auto;
            }
            */
        
        .fa-corner-inverse>.fa-stack {
            margin-left: -1.65em;
            margin-bottom: 2px;
        }
        /*Ordered list icons*/
        
        ol.lst-stps-alt:after,
        ol.lst-stps-alt:before {
            content: " ";
            display: table
        }
        
        ol.lst-stps-alt:after {
            clear: both
        }
        
        ol.lst-stps-alt {
            counter-reset: item;
            margin: 0;
            padding-left: 0;
            position: relative;
            list-style: none;
        }
        
        ol.lst-stps-alt>li {
            counter-increment: item;
            list-style: none inside;
            margin: 30px 0px;
            position: relative;
            padding-left: 55px;
            min-height: 30px;
        }
        
        ol.lst-stps-alt>li:before {
            content: counter(item);
            border-radius: 50%;
            -webkit-border-radius: 50%;
            -moz-border-radius: 50%;
            border: 3px solid #2572b4;
            color: #2572b4;
            background-color: #fff;
            position: absolute;
            left: 0.05em;
            text-align: center;
            width: 2em;
            height: 2em;
        }
        
        main form :not(.btn-call-to-action).btn {
            line-height: 1.33333em !important;
        }
        
        .radio,
        .checkbox {
            margin-left: 10px;
        }
        
        .radio input[type=radio] {
            margin-left: -25px;
            transform: scale(2);
            margin-bottom: 10px;
        }
        
        .checkbox input[type=checkbox] {
            margin-left: -40px;
            transform: scale(2);
            margin-bottom: 10px;
            margin-top: 10px;
        }
        
        .checkbox {
            padding-left: 40px;
        }
    </style>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
    <div id="def-top"> </div>
    <!-- Write closure template -->
    <script type="text/javascript">
        var defTop = document.getElementById("def-top");
        defTop.outerHTML = wet.builder.top({
            lngLinks: [{
                lang: "fr",
                href: "#",
                text: "Français"
            }],
            breadcrumbs: [{
                title: "Canada.ca",
                href: "https://www.canada.ca/en.html"
            }, {
                title: "Taxes",
                href: "https://www.canada.ca/en/services/taxes.html"
            }, {
                title: "Income tax",
                href: "https://www.canada.ca/en/services/taxes/income-tax.html"
            }, {
                title: "Personal income tax",
                href: "https://www.canada.ca/en/services/taxes/income-tax/personal-income-tax.html"
            }, {
                title: "Completing a tax return",
                href: "https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return.html"
            }, {
                title: "Deductions, credits, and expenses",
                href: "https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return/deductions-credits-expenses.html"
            }, {
                title: "Line 22900 - Other employment expenses",
                href: "https://www.canada.ca/en/revenue-agency/services/tax/individuals/topics/about-your-tax-return/tax-return/completing-a-tax-return/deductions-credits-expenses/line-229-other-employment-expenses.html"
            }, {
                title: "Employment use of a work space in the home",
                href: "index.html"
            }],
            search: true,
            siteMenu: true,
            showPreContent: true
        });
    </script>
    <main role="main" property="mainContentOfPage" class="container">
        <section class="gc-nav">
            <h1 property="name" id="wb-cont-nav">Employment use of a work space in the home</h1>
            <ul id="gc-navseq-nav" class="hidden-xs hidden-sm">
                <li> <a class="gc-navseq-nav-btn" href="#gc-navseq-header">Go to navigation menu</a> </li>
                <li> <a class="gc-navseq-nav-btn" href="#wb-cont">Skip to main content</a> </li>
            </ul>
            <nav aria-label="Section menu">
                <h2 id="gc-navseq-header" class="mrgn-tp-0 hidden-xs hidden-sm">Sections</h2>
                <ul class="gc-navseq">
                    <li><a href="who-apply.html">Who can claim</a></li>
                    <li><a href="what-claim.html">What can be claimed</a></li>
                    <li><a href="how-much.html">How much can be claimed</a></li>
                    <li class="active"><a aria-current="page">Calculate your expenses and percentage of use</a></li>
                    <li><a href="how-apply.html">How to claim</a></li>
                </ul>
                <div class="hidden-sm hidden-xs" data-ajax-replace="index.html #related-menu"> </div>
            </nav>
        </section>
        <section class="gc-nav-section experimental">
            <h1 property="name" id="wb-cont">Calculate your expenses and percentage of use</h1>

            <details class="mrgn-bttm-lg">
                <summary>Privacy statement: This calculator does not collect or store your information</summary>
                <p>The CRA is not collecting or retaining any of the information you enter on this page.</p>
                <p><strong>Warning:</strong> This calculator does not save any data and if you leave or refresh this page you may need to enter the information again.</p>
            </details>
            <div class="row mrgn-bttm-md">
                <div class="col-xs-12">
                    <div class="brdr-lft mrgn-lft-md mrgn-tp-sm">
                        <div class="pstn-lft-xs pstn-tp-xs"><span class="fa-stack fa-fw mrgn-lft-sm text-info"> <span
                  class="fas fa-square fa-stack-2x fa-inverse"></span> <span class="fas fa-calculator fa-stack-2x"></span></span>
                        </div>
                        <h2 class="pull-left mrgn-tp-0 mrgn-lft-lg h3 text-info" id="confirm-registration">Use the calculator</h2>

                        <div class="clearfix"></div>

                        <div class="mrgn-lft-lg">
                            <p><strong>Reminder:</strong> You must meet the <a href="who-apply.html#h-1">eligibility criteria</a> to claim your expenses.</p>
                            <div class="wb-frmvld fieldflow-lg">
                                <form>
                                    <div class="wb-fieldflow " data-wb-fieldflow='{"renderas": "radio", "noForm": true, "isoptional": true, "reset": {"action": "addClass", "source": "#designated-room", "class": "hidden"}}'>
                                        <div class="wb-fieldflow-header">
                                            <p class="wb-fieldflow-label">Did you earn commision income (Box 42 on T4 slip)?</p>

                                        </div>
                                        <ul>
                                            <li data-wb-fieldflow='[{"action": "removeClass", "source": ".cmmssn-only", "class": "hidden", "live": true}, {"action": "append", "source": "#rooms", "renderas": "radio"}]'>
                                                Yes </li>
                                            <li data-wb-fieldflow='[{"action": "addClass", "source": ".cmmssn-only", "class": "hidden", "live": true}, {"action": "append", "source": "#rooms", "renderas": "radio"}]'>
                                                No </li>
                                        </ul>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="rooms" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
                <div class="wb-fieldflow-header">
                    <p class="wb-fieldflow-label">What type of area do you work from at home?
                    </p>
                    <p><a href="#rooms-lbx" class="wb-lbx">Difference between a designated work space (room) and a common (shared) 
                      space&nbsp;<span class="far fa-question-circle"></span></a></p>
                </div>
                <ul>
                    <li data-wb-fieldflow='[{"action": "addClass", "source": "#designated-room, .cmmnrm", "class": "hidden", "live": true}, {"action": "removeClass", "source": ".dsgntdrm", "class": "hidden", "live": true}, {"action": "append", "source": "#measurements", "renderas": "radio"}]'>
                        Designated work space (room)</li>
                    <li data-wb-fieldflow='[{"action": "removeClass", "source": ".cmmnrm", "class": "hidden", "live": true}, {"action": "addClass", "source": "#designated-room, .dsgntdrm", "class": "hidden", "live": true}, {"action": "append", "source": "#measurements", "renderas": "radio"}]'>
                        Common (shared) space</li>

                </ul>
            </div>
            <div id="measurements" class="hidden wb-fieldflow-sub" data-wb-fieldflow='{"isoptional": true}'>
                <p>Choose your preferred measurement units </p>
                <ul>
                    <li id="select-m" data-wb-fieldflow='[{"action": "removeClass", "source": "#designated-room", "class": "hidden", "live": true}, {"action": "toggle", "toggle": ".exp-m-sq", "live": true}]'>
                        Square meters (m&#178;)</li>
                    <li id="select-ft" data-wb-fieldflow='[{"action": "removeClass", "source": "#designated-room", "class": "hidden", "live": true}, {"action": "toggle", "toggle": ".exp-ft-sq", "live": true}]'>
                        Square feet (ft&#178;)</li>
                </ul>
            </div>
            <div class="hidden wb-frmvld" id="designated-room">
                <form method="get" id="designated-room-form">
                    <fieldset id="worktime">
                        <legend>Length of time worked at home within the year</legend>

                        <div class="row">
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="work-home-start" class="control-label required"><span class="field-name">Start of work at home</span> <strong class="required">(required)</strong>
</label>
                                    <input class="form-control" id="work-home-start" name="work-home-start" type="date" required="required" />
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group">
                                    <label for="work-home-start" class="control-label required"><span class="field-name">End of work at home</span> <strong class="required">(required)</strong></label>
                                    <input class="form-control" id="work-home-end" name="work-home-end" type="date" required="required" />
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset id="workarea">
                        <legend class="brdr-tp">Size of work space and home</legend>
                   
                            <div class="form-group dsgntdrm">
                                <label for="wrkspc" class="required"><span class="field-name">Designated work space (room) area in your home</span><span class="wb-inv"> in square <span
                              class="exp-m-sq hidden">meters</span><span
                              class="exp-ft-sq hidden">feet</span></span> <strong class="required">(required)</strong>
</label>
                                <div class="input-group col-sm-5 col-md-4">
                                    <input class="form-control input-lg" id="wrkspc" name="wrkspc" type="number" required="required">
                                    <span class="input-group-addon exp-m-sq hidden">m&#178;</span><span class="input-group-addon exp-ft-sq hidden">ft&#178;</span> </div>
                            </div>
                            <div class="cmmnrm hidden">
                                <div class="form-group">
                                    <label for="wrkspc-cmmn" class="required"><span class="field-name">Common (shared) space area in your home</span><span class="wb-inv"> in square <span class="exp-m-sq hidden">meters</span><span class="exp-ft-sq hidden">feet</span></span><strong class="required">(required)</strong></label>
                                    <div class="input-group col-sm-5 col-md-4">
                                        <input class="form-control input-lg" id="wrkspc-cmmn" name="wrkspc-cmmn" type="number" required="required">
                                        <span class="input-group-addon exp-m-sq hidden">m&#178;</span><span class="input-group-addon exp-ft-sq hidden">ft&#178;</span> </div>
                                </div>
                                <div class="form-group">
                                    <label for="cmmnrm-hrs" class="required"><span class="field-name">Hours a week you worked in the common space</span> <strong class="required">(required)</strong></label>
                                    <div class="input-group col-sm-5 col-md-4">
                                        <input class="form-control input-lg" id="cmmnrm-hrs" name="cmmnrm-hrs" type="number" required="required">
                                        <span class="input-group-addon"><span class="far fa-clock fa-lg"></span></span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group mrgn-tp-md">
                                <label for="hmspc" class="required"><span class="field-name">Total finished area of your home</span><span class="wb-inv"> in square <span
                              class="exp-m-sq hidden">meters</span><span class="exp-ft-sq hidden">feet</span></span> <strong class="required">(required)</strong></label>
                                <p id="finished-def"><a href="#finished-lbx" class="wb-lbx">What is included in the total
                            finished area&nbsp;<span class="far fa-question-circle"></span></a></p>
                                <div class="input-group col-sm-5 col-md-4">
                                    <input class="form-control input-lg" id="hmspc" name="hmspc" type="number" aria-describedby="finished-def" required="required">
                                    <span class="input-group-addon exp-m-sq hidden">m&#178;</span><span class="input-group-addon exp-ft-sq hidden">ft&#178;</span> </div>
                            </div>

                            <div class="well mrgn-tp-md mrgn-bttm-lg text-muted">
                                <h3 class="mrgn-tp-0">Summary of calculated space</h3>
                                <ul class="fa-ul list-unstyled lst-spcd">
                                    <!--<li class="rmbth hidden"><span class="h4"><span class="ded-wrkspc-sum">0</span> <span class="exp-m-sq hidden">square meters</span><span class="exp-ft-sq hidden">square
      feet</span></span> of dedicated work space </li>//-->
                                    <li><span class="h4"><span class="cmn-wrkspc-sum">0</span> <span class="exp-m-sq hidden">square meters</span><span class="exp-ft-sq hidden">square feet</span></span> of <span class="dsgntdrm hidden">designated </span>
                                        <span class="cmmnrm hidden">common </span>work space </li>
                                    <li class="brdr-bttm"><span class="fas fa-divide fa-li"><span class="wb-inv">divided by </span></span> <span class="h4"><span class="hmspc-sum">0</span> <span class="exp-m-sq hidden">square meters</span><span class="exp-ft-sq hidden">square
      feet</span></span> of total finished area</li>
                                    <li><span class="fas fa-equals fa-li"><span class="wb-inv">equals </span></span> <span class="h4"><span class="wrkspc-percent-sum">0</span>%</span> of your home used for work space
                                        <p class="mrgn-tp-md">Therefore, <span class="h4 badge mrgn-tp-0"><span class="perspc-percent-sum">0</span>%</span> of your home is used for personal space and non-employment purposes which will calculate your personal-use portion. </p>
                                    </li>
                                    <li class="cmmnrm hidden brdr-bttm"><span class="fas fa-times fa-li"><span class="wb-inv">multiplied by </span></span> <span class="h4"><span class="wrkhr-percent-sum">0</span>%</span> of hours of employment use in common space (<span id="wrk-cmmn-rm-sum">0</span>                                        hours divided into 168 total hours a week) </li>
                                    <li class="cmmnrm hidden"><span class="fas fa-equals fa-li"><span class="wb-inv">equals </span></span> <span class="h4"><span class="wrkspc-percent-sum-alt" id="workRate">0</span>%</span> of your home used for work space and employment purposes
                                        <p class="mrgn-tp-md">Therefore, <span class="h4 badge mrgn-tp-0"><span class="perspc-percent-sum-alt" id="perRate">0</span>%</span> of your home is used for personal space and non-employment purposes which will calculate your personal-use
                                            portion.
                                        </p>
                                    </li>
                                </ul>
                            </div>
                    </fieldset>

                    <fieldset>
                        <legend class="mrgn-bttm-0">Expenses to claim</legend>
                        <p>Enter the amount paid to an expense for the period you worked from home. Enter $0 if you are not claiming the expense.</p>
 <div class="form-group">
                            <label for="utlts" class="required"><span class="field-name">Electricity, heat and water</span><span class="wb-inv"> in dollars and
                                cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="utlts" name="utlts" type="text" required="required">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="mntnc" class="required"><span class="field-name">Maintenance <br><span class="text-muted">on work space and other areas of the home</span><span class="wb-inv"> in dollars and cents</span></span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="mntnc" name="mntnc" type="text" required="required">
                            </div>
                        </div>
                        <div class="form-group dsgntdrm">
                            <label for="mntnc-excl" class="required"><span class="field-name">Maintenance <br><span class="text-muted">on common or designated space only</span> <span class="wb-inv"> in dollars and cents</span></span> <strong class="required">(required)</strong></label>
                            <p id="maintenance-def"><a href="#maintenance-lbx" class="wb-lbx">What is considered reasonable expesnes for work area&nbsp;<span class="far fa-question-circle"></span></a></p>
				<div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="mntnc-excl" name="mntnc-excl" type="text" required="required">
                            </div>
                        </div>
	  <div class="form-group cmmssn-only hidden">
                            <label for="insrnc" class="required"><span class="field-name">Insurance</span><span class="wb-inv"> in dollars and cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="insrnc" name="insrnc" type="text" required="required">
                            </div>
                        </div>
                        <div class="form-group cmmssn-only hidden">
                            <label for="prprt" class="required"><span class="field-name">Property taxes</span><span class="wb-inv"> in dollars and cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="prprt" name="prprt" type="text" required="required">
                            </div>
                        </div>		    
                        <div class="form-group">
                            <label for="othrex" class="required"><span class="field-name">Other expenses (e.g. rent)</span><span class="wb-inv"> in dollars and
                                cents</span> <strong class="required">(required)</strong></label>
                            <div class="input-group col-sm-5 col-md-4"> <span class="input-group-addon">$</span>
                                <input class="form-control input-lg currency" id="othrex" name="othrex" type="text" required="required">
                            </div>
                        </div>
                       

                      
                    </fieldset>


                    <p>
                        <button class="btn btn-call-to-action btn-lg mrgn-bttm-lg mrgn-tp-lg" id="exp-cal" type="submit">Calculate your
                        expenses</button>
                    </p>
                </form>

                <div class="panel panel-primary hidden" id="results">
                    <div class="panel-heading">
                        <h4 class="panel-title">Your employee home work space expenses results</h4>
                    </div>
                    <div class="panel-body">

                        <p><strong>Print and keep this record using the print preview button below</strong>. You will need the amounts below when fill out the T777 or T777c (short) form.</p>

                        <!--	<table class="wb-charts wb-charts-pie table" data-flot='{"series": {
		"pie": { "radius": 1,
			"label": {
				"threshold": 0.001
														
			},
			"combine": {
				"threshold": 0.001
				
			}, "innerRadius": 0.45
		}
	}
}'>
<caption>
Expenses breakdown
</caption>
<tr>
<td></td>
<th data-flot='{"color":"#dff0d8"}'>Expenses you are allowed to claim: $1342.54</th>
<th data-flot='{"color":"#999999", "label": {"radius":0.5}}'>Expenses you cannot claim: $5622.89</th>
<th data-flot='{"color":"#d9edf7", "label": {"radius":0.5}}'>Expenses to carry forward to next year: $200.01</th>
</tr>
<tr>
<th>Comparison chart</th>
<td>1342.54</td>
<td>5622.89</td>
<td>200.01</td>
</tr>
</table>//-->

                    </div>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <caption>
                                Amounts to claim <br>From: <span class="" id="startDate">20XX-XX-XX</span> to <span class="" id="endDate">20XX-XX-XX</span>
                            </caption>
                            <thead>
                                <tr>
                                    <th scope="col">Expense</th>
                                    <th scope="col" class="active">Amount to claim</th>
                                  <!--  <th scope="col">T777c (short) form</th>//-->
                                    <th scope="col">T777 form</th>
                                </tr>
                            </thead>
                            <tbody>

                                <tr>
                                    <td>Electricity, heat and water </td>
                                    <td class="active" id="electricity">[$0.00]</td>
                                 <!--   <td>Line X</td>//-->
                                    <td>Line 17</td>
                                </tr>
                                <tr>
                                    <td>Maintenance<ul><li>Work space and other <span class="nowrap">areas = <span id="maintenance">[$0.00]</span></span></li> <li class="dsgntdrm">Work space <span class="nowrap">only = <span id="maintenance-alt">[$0.00]</span></span></li></ul></td>
                                    <td class="active" id="maintenance-total">[$0.00]</td>
                                  <!--  <td>Line X</td>//-->
                                    <td>Line 18</td>
                                </tr>
                                <!--<tr class="dsgntdrm">
                                <td>Maintenance (work space only) </td>
                                <td class="active" id="maintenance-alt">[$0.00]</td>
                              <td></td>
                        <td></td>
                            </tr>//-->
                                

                                <tr class="cmmssn-only hidden">
                                    <td>Insurance amount <small>(commission employees only)</br>
                          </small></td>
                                    <td class="active" id="insurance">[$0.00]</td>
                                 <!--   <td>Line X</td> //-->
                                    <td>Line 19</td>
                                </tr>
                                <tr class="cmmssn-only hidden">
                                    <td>Property taxes</br>
                                        <small>(commission employees only)</br>
                          </small></td>
                                    <td class="active" id="property">[$0.00]</td>
                                 <!--   <td>Line X</td> //-->
                                    <td>Line 20</td>
                                </tr>
	    <tr>
                                    <td>Other expenses</td>
                                    <td class="active" id="other">[$0.00]</td>
                                  <!--  <td>Line X</td> //-->
                                    <td>Line 21</td>
                                </tr>
	    
                                <tr>
                                    <td>Personal-use portion (<span class="perspc-percent-sum">0</span>% of your total finished area)</td>
                                    <td class="active" id="office">[$0.00]</td>
                                 <!--   <td>Line X</td>//-->
                                    <td>Line 23</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="panel-body">
                        <div class="well mrgn-tp-md mrgn-bttm-lg text-muted">
                            <h3 class="mrgn-tp-0">Summary of personal-use expenses to report</h3>
                            <ul class="list-unstyled lst-spcd">
                                <li><span class="h4">$<span class="personalClaim">0.00</span></span> of the personal-use portion is the amount of expenses based on
                                    <span class="h4"><span class="personalRate">0</span>%</span> of the non-employement (personal) use of your home which is taken off of your total expenses
                                </li>

                            </ul>
                            <div class="cmmssn-only hidden">
                              
				    If your commission income is <strong>less</strong> than the total expenses you have claimed, you can either:</p>
				
				<ul><li>carry forward the extra amount to the next year, or</li>
					<li>if you also have a salary that is larger than your commission income, you can claim you expenses, minus any insurance or property taxes</li></ul> 
				<p>Using your salary, the Personal-use portion would be <span id="office-comm-alt">[$0.00]</span>.</p>
                            </div>

                        </div>
                    </div>
                    <table class="table" id="cews-statement-table">
                        <caption>
                            Additional data you provided
                        </caption>
                        <tbody>
                            <tr>
                                <th scope="row">Size of work spaces in your home</th>
                                <td class="text-right nowrap"><span id="workSize">[answer]</span><span class="hidden exp-m-sq">m²</span><span class="hidden exp-ft-sq">ft²</span></td>
                            </tr>
                            <tr class="cmmnrm hidden">
                                <th scope="row">Hours a week in work space</th>
                                <td class="text-right nowrap"><span id="hoursWorked">[answer]</span></td>
                            </tr>
                            <tr>
                                <th scope="row">Total finished area of your home</th>
                                <td class="text-right nowrap"><span id="homeSize">[answer]</span><span class="hidden exp-m-sq">m²</span><span class="hidden exp-ft-sq">ft²</span></td>
                            </tr>

                        </tbody>
                    </table>
                    <div class="panel-body">
                        <p>You are now ready to <strong>print these amounts</strong> so you can enter them into the form. The data is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
                        <p class="hidden-print"><a class="wb-lbx btn btn-default btn-lg wb-init wb-lbx-inited" id="wb-auto-62" role="button" href="#pp-statement"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CEWS
		statement</span></span></a></p>

                    </div>
                </div>
                </div>



                <!--Overlays //-->
                <section id="rooms-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                    <header class="modal-header">
                          <h2 class="modal-title">Designated work space (room) or common (shared) space</h2>
                    </header>
                    <div class="modal-body">
                        <p>text here</p>
                    </div>
                </section>
 <section id="finished-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                    <header class="modal-header">
                        <h2 class="modal-title">Total finished area of the home</h2>
                    </header>
                    <div class="modal-body">
                        <p>text here</p>
                    </div>
                </section>
 <section id="maintenance-lbx" class="mfp-hide modal-dialog modal-content overlay-def">
                    <header class="modal-header">
                        <h2 class="modal-title">Reasonable expenses for a work area</h2>
                    </header>
                    <div class="modal-body">
                        <p>text here</p>
                    </div>
                </section>
                <nav role="navigation" class="mrgn-bttm-lg mrgn-tp-lg">
                    <h3 class="wb-inv">Document navigation</h3>
                    <ul class="pager">
                        <li class="next"><a href="how-apply.html" rel="next">How to claim</a></li>
                    </ul>
                </nav>
                <div class="hidden-md hidden-lg" data-ajax-replace="index.html #related-menu"> </div>
        </section>
        <div id="def-preFooter"> </div>
        <!-- Write closure template -->
        <script type="text/javascript">
            var defPreFooter = document.getElementById("def-preFooter");
            defPreFooter.outerHTML = wet.builder.preFooter({
                dateModified: "2020-03-13",
                showPostContent: true,
                showFeedback: true,
                showShare: true
            });
        </script>
    </main>
    <div id="def-footer"> </div>
    <!-- Write closure template -->
    <script type="text/javascript">
        var defFooter = document.getElementById("def-footer");
        defFooter.outerHTML = wet.builder.footer({
            showFooter: true,
            showFeatures: true
        });
    </script>
    <!-- Write closure template -->
    <script type="text/javascript">
        document.write(wet.builder.refFooter({}));
    </script>
    <script>
        (function($, document, wb) {
            "use strict";
            $('.data-ajax').on("wb-contentupdated", function(event, data) {
                // "data.ajax-type" contains the insersion method [after, append, before, prepend, replace]
                // "data.content" contains the
                var $elm = $(event.currentTarget);
                $elm
                    .find(wb.allSelectors)
                    .addClass("wb-init")
                    .filter(":not(#" + $elm.attr("id") + " .wb-init .wb-init)")
                    .trigger("timerpoke.wb");
                /*
                 * Since we are working with events we want to ensure that we are being
                 * passive about our control, so returning true allows for events to always
                 * continue
                 */
                return true;
            });
        })(jQuery, document, wb);
    </script>
    <script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script>
    <script>
        (function($, wb) {
            "use strict";
            var $document = wb.doc;
            $document.on("click vclick", ".wb-lbx", function(event) {
                var value = $(this).attr('href');
                $document.trigger("open.wb-lbx", [
                    [{
                        src: value,
                        type: "inline"
                    }]
                ]);
            });
        })(jQuery, wb);
        const toMoney = new Intl.NumberFormat(wb.lang + "-CA", {
            style: "currency",
            currency: "CAD",
            minimumFractionDigits: 2
        });
        const NON_CURRENCY_CHARACTER = /[a-zA-Z\+\-~<>?\/":;'\[\{\]\}\\|!@#$%^&*()_=]/g;
        const FRENCH_CURRENCY_FORMAT = /^(\d{1,3}(\s\d{3})*|(\d+))(\,\d{2})?$/gm;
        const ENGLISH_CURRENCY_FORMAT = /^(\d{1,3}(\,\d{3})*|(\d+))(\.\d{2})?$/gm;
        /**
         * calculateCommonRoomClaimRate
         * 
         * calculate the percentage of bills that can be claimed when using a 
         * common room
         * 
         * @param {Float} percSpaceUsed the percentage of the total finished area 
         * that is used for work
         * @param {Float} percHour the percentage of the week that the space is 
         * used for work purposes
         * 
         * @return {Float} the percentage of bills that can be claimed; 0 if params * fail validation
         */
        function calculateCommonRoomClaimRate(percSpaceUsed, percHour) {
            if (parseFloat(percSpaceUsed) && parseFloat(percHour)) {
                return percSpaceUsed * percHour / 100;
            }
            return 0;
        }

        /**
         * reformat the currency values after a short delay
         */
        $(document).on("blur", ".currency", reformatNumber);

        function reformatNumber(event) {
            if (event.target.value == "") {
                return;
            }
            if (event.target.value.match(NON_CURRENCY_CHARACTER)) {
                event.target.value = event.target.value.replace(NON_CURRENCY_CHARACTER, "");
            }
            event.target.value = toFloat(event.target.value);
            event.target.value = toMoney.format(event.target.value)
                .replace("$", "");
        }

        /**
         * calculateSpaceUsed
         * 
         * calculate the space used as workspace
         * 
         * @param {Float} workArea the total area used for work purposes
         * @param {Float} totalArea the total area of the home
         * 
         * @return {Float} the percentage of space used for work
         */
        function calculateSpaceUsed(workArea, totalArea) {
            return workArea / totalArea * 100;
        }

        /**
         * getCommonWorkSpace
         * 
         * determine the total common space used for work
         *
         * @return {Float} the total common space used for work
         */
        function getCommonWorkSpace() {
            var workArea = 0;
            //if common room panel is visible, add each common room to the work space
            if (!$("div.cmmnrm").hasClass("hidden")) {
                if ($("#wrkspc-cmmn").val() !== "") {
                    workArea += parseFloat($("#wrkspc-cmmn").val());
                }
            }
            return workArea;
        }

        /**
         * getCommonWorkSpaceHours
         * 
         * determine the percentage of the week that the common space used for work
         *
         * @return {object} with property for raw hours and property representing 
         * the percentage of hours the room is used during the week
         */
        function getCommonWorkSpaceHours() {
            var workHours = 0;
            if (!$("div.cmmnrm").hasClass("hidden")) {
                if ($("#cmmnrm-hrs").val() !== "") {
                    workHours += parseFloat($("#cmmnrm-hrs").val());
                }
            }
            return {
                rawHours: workHours,
                percentage: workHours / 168 * 100
            };
        }

        /**
         * getDesignatedWorkSpace
         * 
         * determine the total designated space used for work
         *
         * @return {Float} the designated space used for work
         */
        function getDesignatedWorkSpace() {
            var workArea = 0;
            //if the designated work space input is visible, add it to the work space
            if (!$("#wrkspc").hasClass("hidden")) {
                if ($("#wrkspc").val() !== "") {
                    workArea += parseFloat($("#wrkspc").val());
                }
            }
            return workArea;
        }

        //when the total area input is updated
        $(document).on("change keyup", "#hmspc", function(event) {
            //update the total finished area summary 
            var totalArea = parseFloat(event.target.value);
            if (!isNaN(totalArea)) {
                $(".hmspc-sum").text(totalArea);
            } else {
                $(".hmspc-sum").text("0");
            }
            //calculate the total area used as a percentage of the total finished area
            var workArea = getCommonWorkSpace() + getDesignatedWorkSpace();
            var spaceUsed = calculateSpaceUsed(workArea, totalArea).toFixed(1);
            //update display
            if (!isNaN(spaceUsed)) {
                $(".perspc-percent-sum").text((100 - spaceUsed).toFixed(1));
                $(".wrkspc-percent-sum").text(spaceUsed);
            } else {
                $(".wrkspc-percent-sum").text("0");
                $(".perspc-percent-sum").text("0");
            }
            var claimRate = calculateCommonRoomClaimRate(spaceUsed, getCommonWorkSpaceHours().percentage).toFixed(1);
            $(".perspc-percent-sum-alt").text(100 - claimRate);
            $(".wrkspc-percent-sum-alt").text(claimRate);
        });

        //trigger the summary to update when common workspace input is updated
        $(document).on("change keyup", "#wrkspc-cmmn", function(event) {
            var workArea = getCommonWorkSpace();
            if (!isNaN(workArea)) {
                $(".cmn-wrkspc-sum").text(workArea);
            } else {
                $(".cmn-wrkspc-sum").text("0");
            }
            $("#hmspc").trigger("change");
            var claimRate = calculateCommonRoomClaimRate(
                calculateSpaceUsed(workArea, $("#hmspc").val()),
                getCommonWorkSpaceHours().percentage
            ).toFixed(1);
            $(".perspc-percent-sum-alt").text(100 - claimRate);
            $(".wrkspc-percent-sum-alt").text(claimRate);
        });
        //when designated work space input is changed
        $(document).on("change keyup", "#wrkspc", function(event) {
            var workArea = getDesignatedWorkSpace();
            if (!isNaN(workArea)) {
                $(".cmn-wrkspc-sum").text(workArea);
            } else {
                $(".cmn-wrkspc-sum").text("0");
            }
            $("#hmspc").trigger("change");
        });

        //when a user updates the common space hours
        $(document).on("change keyup", "#cmmnrm-hrs", function(event) {
            var hours = getCommonWorkSpaceHours();
            if (!isNaN(hours.percentage) && !isNaN(hours.rawHours)) {
                $(".perhr-percent-sum").text(100 - hours.percentage);
                $(".wrkhr-percent-sum").text(hours.percentage.toFixed(1));
                $("#wrk-cmmn-rm-sum").text(hours.rawHours);
                $("#per-cmmn-rm-sum").text(168 - hours.rawHours);
            } else {
                $(".perhr-percent-sum").text("0");
                $(".perhr-percent-sum").text("0");
                $("#wrk-cmmn-rm-sum").text("0");
                $("#per-cmmn-rm-sum").text("0");
            }
            var workArea = getCommonWorkSpace() + getDesignatedWorkSpace();
            var claimRate = calculateCommonRoomClaimRate(
                calculateSpaceUsed(workArea, $("#hmspc").val()),
                hours.percentage
            ).toFixed(1);
            $(".perspc-percent-sum-alt").text(100 - claimRate);
            $(".wrkspc-percent-sum-alt").text(claimRate);
        });

        //when the commission or work space type radios are changed. using this method of selecting because fieldflow does not give us ID's to work with
        $(document).on("click", "input[type='radio']:first, input[type='radio']:eq(1), input[type='radio']:eq(2), input[type='radio']:eq(3)", function(event) {
            $("input[type='text'], input[type='number']").each(function(i, element) {
                $(element).val("");
                $(element).trigger("change");
            });
            $("#results").addClass("hidden");
        });

        //submit button was clicked
        $(document).on("click", "#exp-cal", function(event) {
            event.preventDefault();
            var form = $("#designated-room-form");
            form.validate()
                //if WET4 already has errors, return
            if (!form.valid()) {
                return;
            } else {
                $("#results").removeClass("hidden");
            }
            var workArea = getCommonWorkSpace() + getDesignatedWorkSpace();

            //designated Room
            if ($(".cmmnrm").hasClass("hidden")) {
                var fromDate = $("#work-home-start").val();
                var toDate = $("#work-home-end").val();

                //Start Date
                if (fromDate) {
                    $("#startDate").text(fromDate);
                }

                //End Date
                if (toDate) {
                    $("#endDate").text(toDate);
                }

                var TotalArea = $("#hmspc").val();

                var rate = calculateSpaceUsed(workArea, TotalArea);

                //Bills
                var maintenanceBill = toFloat($("#mntnc").val());
                var otherMaintenanceBill = toFloat($("#mntnc-excl").val());
                var totalMaintenanceBill = maintenanceBill + otherMaintenanceBill;
                var otherExpensesBill = toFloat($("#othrex").val());
                var electricityBill = toFloat($("#utlts").val());
                var insuranceBill = toFloat($("#insrnc").val());
                var propertyTaxesBill = toFloat($("#prprt").val());

                //Rebates
                var maintenanceRebate = toMoney.format(maintenanceBill);
                var otherMaintenanceRebate = toMoney.format(otherMaintenanceBill);
                var totalMaintenanceRebate = toMoney.format(totalMaintenanceBill);
                var otherExpensesRebate = toMoney.format(otherExpensesBill);
                var electricityRebate = toMoney.format(electricityBill);
                var insuranceRebate = toMoney.format(insuranceBill);
                var propertyRebate = toMoney.format(propertyTaxesBill);

                //Fill out Amounts to claim 
                $("#electricity").text(electricityRebate);
                $("#maintenance").text(maintenanceRebate);
                $("#other").text(otherExpensesRebate);
                $("#insurance").text(insuranceRebate);
                $("#property").text(propertyRebate);
                $("#maintenance-alt").text(otherMaintenanceRebate);
                $("#maintenance-total").text(totalMaintenanceRebate);

                //Personal-use portion claim
                var personalRate = (100 - rate).toFixed(1);
                personalRebate = toMoney.format(((maintenanceBill + otherExpensesBill + electricityBill + insuranceBill + propertyTaxesBill) * (personalRate / 100)));
                personalRebateNumber = ((maintenanceBill + otherExpensesBill + electricityBill + insuranceBill + propertyTaxesBill) * (personalRate / 100));
                $("#office").text(personalRebate);

                //Personal Claim
                if (personalRebateNumber) {
                    var price = $("#office").text().replace("$", "");
                    $(".personalClaim").text(price);
                } else {
                    $(".personalClaim").text("0.00");
                }

                //Personal Rate
                if (!isNaN(personalRate)) {
                    $(".personalRate").text(personalRate);
                } else {
                    $(".personalRate").text("0");
                }

                //Insurance - Summary Page
                if (insuranceBill) {
                    insuranceBill = parseFloat(insuranceBill);
                    $(".ins").text(insuranceBill.toLocaleString());
                } else {
                    $(".ins").text("0");
                }

                //Property Taxes amount - Summary Page
                if (propertyTaxesBill) {
                    propertyTaxesBill = parseFloat(propertyTaxesBill);
                    $(".pro").text(propertyTaxesBill.toLocaleString());
                } else {
                    $(".pro").text("0");
                }

                //Commission Amount - Summary Page
                if (propertyTaxesBill || insuranceBill) {
                    var commission = propertyTaxesBill + insuranceBill;
                    $(".com-total").text(commission.toLocaleString());
                } else {
                    $(".com-total").text("0");
                }

                if ($(".exp-ft-sq").hasClass("hidden")) {
                    $("#workSize").text($("#wrkspc").val());
                    $("#homeSize").text($("#hmspc").val());
                } else {
                    $("#workSize").text($("#wrkspc").val());
                    $("#homeSize").text($("#hmspc").val());
                }
            }

            //Common Area Room
            if ($(".dsgntdrm").hasClass("hidden")) {
                var fromDate = $("#work-home-start").val();
                var toDate = $("#work-home-end").val();

                //Start Date
                if (fromDate) {
                    $("#startDate").text(fromDate);
                }

                //End Date
                if (toDate) {
                    $("#endDate").text(toDate);
                }

                var TotalArea = $("#hmspc").val();

                var rate = $("#workRate").text();
                rate = parseFloat(rate);

                //Bills
                var maintenanceBill = toFloat($("#mntnc").val());
                var otherMaintenanceBill = toFloat($("#mntnc-excl").val());
                var totalMaintenanceBill = maintenanceBill + otherMaintenanceBill;
                var otherExpensesBill = toFloat($("#othrex").val());
                var electricityBill = toFloat($("#utlts").val());
                var insuranceBill = toFloat($("#insrnc").val());
                var propertyTaxesBill = toFloat($("#prprt").val());

                //Rebates
                var maintenanceRebate = toMoney.format(maintenanceBill);
                var otherMaintenanceRebate = toMoney.format(otherMaintenanceBill);
                var totalMaintenanceRebate = toMoney.format(totalMaintenanceBill);
                var otherExpensesRebate = toMoney.format(otherExpensesBill);
                var electricityRebate = toMoney.format(electricityBill);
                var insuranceRebate = toMoney.format(insuranceBill);
                var propertyRebate = toMoney.format(propertyTaxesBill);

                //Fill out Amounts to claim 
                $("#electricity").text(electricityRebate);
                $("#maintenance").text(maintenanceRebate);
                $("#other").text(otherExpensesRebate);
                $("#insurance").text(insuranceRebate);
                $("#property").text(propertyRebate);
                $("#maintenance-alt").text(otherMaintenanceRebate);
                $("#maintenance-total").text(totalMaintenanceRebate);

                //Personal-use portion claim
                var personalRate = $("#perRate").text();
                personalRate = parseFloat(personalRate);
                personalRebate = toMoney.format((maintenanceBill + otherExpensesBill + electricityBill + insuranceBill + propertyTaxesBill) * (personalRate / 100));
                personalRebateNumber = ((maintenanceBill + otherExpensesBill + electricityBill + insuranceBill + propertyTaxesBill) * (personalRate / 100));
                $("#office").text(personalRebate);

                //Personal Claim
                if (personalRebateNumber) {
                    var price = $("#office").text().replace("$", "");
                    $(".personalClaim").text(price);
                } else {
                    $(".personalClaim").text("0.00");
                }

                //Personal Rate
                if (!isNaN(personalRate)) {
                    $(".personalRate").text(personalRate);
                } else {
                    $(".personalRate").text("0");
                }

                //Insurance - Summary Page
                if (insuranceBill) {
                    insuranceBill = parseFloat(insuranceBill);
                    $(".ins").text(insuranceBill.toLocaleString());
                } else {
                    $(".ins").text("0");
                }

                //Property Taxes amount - Summary Page
                if (propertyTaxesBill) {
                    propertyTaxesBill = parseFloat(propertyTaxesBill);
                    $(".pro").text(propertyTaxesBill.toLocaleString());
                } else {
                    $(".pro").text("0");
                }

                //Commission Amount - Summary Page
                if (propertyTaxesBill || insuranceBill) {
                    var commission = propertyTaxesBill + insuranceBill;
                    $(".com-total").text(commission.toLocaleString());
                } else {
                    $(".com-total").text("0");
                }

                if ($(".exp-ft-sq").hasClass("hidden")) {
                    $("#workSize").text($("#wrkspc-cmmn").val());
                    $("#hoursWorked").text($("#cmmnrm-hrs").val());
                    $("#homeSize").text($("#hmspc").val());
                } else {
                    $("#workSize").text($("#wrkspc-cmmn").val());
                    $("#hoursWorked").text($("#cmmnrm-hrs").val());
                    $("#homeSize").text($("#hmspc").val());
                }
            }
        });

        /**
         * toFloat
         * 
         * convert a formatted number to a JS compliant float
         * 
         * param {String} the formatted number
         * 
         * return {Float} the JS compliant float equiv
         */
        function toFloat(number) {
            if (number == "") {
                return parseFloat(0);
            }
            var reformattedNumber = 0;
            if (number.match(FRENCH_CURRENCY_FORMAT)) {
                reformattedNumber = number.replace(/\s/g, "");
                reformattedNumber = reformattedNumber.replace(/\,/g, ".");
                return parseFloat(reformattedNumber);
            } else if (number.match(ENGLISH_CURRENCY_FORMAT)) {
                reformattedNumber = number.replace(/\,/g, "");
                return parseFloat(reformattedNumber);
            } else {
                return parseFloat(number);
            }
        }
    </script>
</body>

</html>
