
<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>How the eligible revenue reduction is calculated: Canada Emergency Wage Subsidy (CEWS) – Canada.ca</title>
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta name=”robots” content=”noindex”>
    <!-- Meta data -->
    <!-- Meta data-->
    <!-- Load closure template scripts -->
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_30/cdts/compiled/soyutils.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_30/cdts/compiled/wet-en.js"></script>
    <link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet">
    <link href="../css/cews.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />

    <!-- Write closure template -->
    <script type="text/javascript">
      document.write(wet.builder.refTop({
      }));
    </script>
  </head>
  <body vocab="http://schema.org/" typeof="WebPage">
    <div id="def-top">
    </div>
    <!-- Write closure template -->
    <script type="text/javascript">
      var defTop = document.getElementById("def-top");
      defTop.outerHTML = wet.builder.top({
        lngLinks: [{

          lang: "fr",
          href: "#",
          text: "Français"
        }],
        breadcrumbs: [{
          title: "Canada.ca",
          href: "https://www.canada.ca/en.html"
        }, {
          title: "Business and industry",
          href: "https://www.canada.ca/en/services/business.html"
        }, {
          title: "Canada Emergency Wage Subsidy (CEWS)",
          href: "index.html"
        }, {
          title: "Calculate your subsidy amount",
          href: "how-much.html"
        }],
        search: true,
        siteMenu: true,
        showPreContent: true
      });
    </script>
    <main property="mainContentOfPage" class="container">
      <section class="gc-nav">
       <h1 property="name" id="wb-cont-nav">Canada Emergency Wage Subsidy (CEWS)</h1>
    <ul id="gc-navseq-nav" class="hidden-xs hidden-sm">
      <li> <a class="gc-navseq-nav-btn" href="#gc-navseq-header">Go to navigation menu</a> </li>
      <li> <a class="gc-navseq-nav-btn" href="#wb-cont">Skip to main content</a> </li>
    </ul>
    <nav aria-label="Section menu">
      <h2 id="gc-navseq-header" class="mrgn-tp-0 hidden-xs hidden-sm">Sections</h2>
      <ul class="gc-navseq">
	  <li><a href="overview.html">What are the changes</a></li>
        <li><a href="who-apply.html">Who can apply</a></li>
		<li><a href="periods.html">Periods you can apply for</a></li>
        <li><a href="who-employees.html">Which of your employees qualify</a></li>
		<li><a href="how-much.html">Calculate your subsidy amount</a>
		<ul class="gc-navseq noline">
    <li class="active"><a aria-current="page">How the revenue drop and subsidy rate are calculated</a></li>
        <li><a href="how-much-version-math.html">How the subsidy is calculated</a></li>
		</ul></li>
        <li><a href="how-apply.html">How to apply</a></li>
   <li><a href="after.html">After you apply</a></li>
        <li><a href="contact.html">Contact us about CEWS</a></li>
      </ul>
	    <div class="hidden-sm hidden-xs" data-ajax-replace="index.html #related-menu>"> </div>
    </nav>
  </section>
  
    <section class="gc-nav-section experimental">
  <h1 property="name" id="wb-cont">How the revenue drop and subsidy rate are calculated</h1>
    
<h2 class="h3">On this page</h2>
    <ul>
     
      <li><a href="#h-1">Revenue drop and CEWS rate calculation for claim periods 5 and  later (July 2020 and later)</a> <span class="label label-info">New</span></li>
    
      <li><a href="#h-2">Revenue drop calculation  for claim periods 1 to 4 (March to June, 2020)</a></li>
     
    </ul>
	<h2 id="h-1">Revenue drop and CEWS rate calculation for claim periods 5 and  later (July 2020 and later) <span class="label label-info">New</span></h2>
	<!-- Start ajax section -->
	<div id="ajax-5-later">
<p>For claim periods 5 and later (claims that cover July 5,  2020, and later), there is <strong>no minimum revenue drop</strong> required to  qualify for the subsidy. The rate your revenue has dropped is only used to  calculate how much subsidy you receive for these periods.</p>

<div class="row">
                        <div class="col-xs-12">
                          <div class="row">
                            <div class="col-xs-12 col-sm-6 brdr-rght mrgn-bttm-lg">
                              <div class="col-sm-12">
                                <p class="mrgn-tp-0 text-muted h5">Option 1</p>
               <p>You can use the <a href="how-much.html#h-3">online calculator or spreadsheet</a> to  calculate your revenue drop rate for periods 5 and later while calculating how much subsidy  you may receive.</p>
                              </div>
                            </div>
                            <div class="col-xs-1 col-sm-12 pstn-tp-sm text-center mrgn-bttm-lg"><span
                                class="fa-stack fa-fw text-muted"> <span class="fas fa-circle fa-stack-2x"></span><span
                                  class="fa-stack-1x fa-inverse">or</span></span></div>
                            <div class="col-xs-12 col-sm-6 mrgn-bttm-lg">
                              <div class="col-sm-12">
						<p class="mrgn-tp-0 text-muted h5">Option 2</p>
               <p>You  can read the in-depth details of <a href="/how-much-reduction.html#h-1">how the revenue drop rate is calculated for claim periods 5 to 9</a>.</p>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

</div>
<!-- End ajax section -->

<p>For claim periods 1  to 4, the subsidy calculation was based on a fixed rate of 75%. However,  for claim periods 5 and later, the CEWS rate is  variable and depends on the amount your revenue dropped.  It is made up of two parts.</p>
<div class="panel panel-default brdr-rds-0"><div class="panel-heading"><h3 class="panel-title" id="#overall">Overall rate of CEWS =  base rate + top-up rate</h3></div>
<div class="panel-body">
<div class="row">
   <div class="col-xs-12">
      <div class="row">
         <div class="col-xs-12 col-sm-6 mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Base rate</p>
               <p>The <a href="#base">base rate</a> uses your claim period revenue drop</p>
            </div>
         </div>
         <div class="col-xs-1 col-sm-12 pstn-tp-sm text-center mrgn-bttm-lg"><span
            class="fas fa-plus-circle text-success fa-2x"></span></div>
         <div class="col-xs-12 col-sm-6 mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Top-up rate</p>
               <p>The <a href="#topup">top-up rate</a> is available to employers that have experienced a 3-month average revenue drop of more than 50%</p>
            </div>
         </div>
      </div>
   </div>
</div>




</div>
<div class="panel-footer">
<p>You can calculate your overall CEWS rate (base and  top-up) using the <a href="how-much.html#h-3">online calculator or spreadsheet</a>.</p>
</div>
</div>

  <p><strong>For periods 5 and 6</strong>, you may  benefit from using the rules and calculations from period 4 to calculate your  subsidy if:</p>
<ul>
  <li>your revenue drop is at least 30%, and</li>
  <li>your overall CEWS rate is less than 75% </li>
</ul>
<p>This is referred to as the &ldquo;<a href="how-much-version-math.html#safeharbour"><mark>safe harbour</mark></a>&rdquo; option. This option is calculated for you if you use the <a href="how-much.html#h-3">online calculator or spreadsheet</a> to calculate your subsidy amount, and automatically  applied if it is to your benefit.</p>
<p>You can learn how the CEWS rate is used when calculating your  subsidy amount by reading more about how the  <a href="how-much-version-math.html">overall subsidy amount is calculated</a>.</p>
<h3 id="base">Base rate revenue drop and rate calculations</h3>
<h4>Revenue drop calculation  options for base rate</h4>
<p>Your revenue drop for calculating the base subsidy rate  is the decline in eligible  revenue you experienced when comparing your claim period revenue with your  baseline revenue.</p>

<p><span class="fas fa-calculator text-muted"></span> <strong>Revenue drop (%) = 1 –  (Claim period revenue / baseline revenue)</strong></p>

<h4>Using the current or prior claim  period revenue drop (the &ldquo;deeming rule&rdquo; for periods 5 and later)</h4>
<p>For claim periods 5 and later, you will calculate two  revenue drops and use the higher result in your base rate calculation. If you use the <a href="how-much.html#h-3">online calculator or spreadsheet</a> to calculate your  subsidy amount, both options will be calculated when you enter your revenues  and the higher rate will automatically be applied.</p>
<div class="row">
   <div class="col-xs-12">
      <div class="row">
         <div class="col-xs-12 col-sm-6 brdr-rght mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Option 1</p>
               <p><span class="fas fa-calculator text-muted"></span> <strong>Revenue drop (%) = 1 – (Claim period month revenue / baseline revenue)</strong></p>
            </div>
         </div>
         <div class="col-xs-1 col-sm-12 pstn-tp-sm text-center mrgn-bttm-lg"><span
            class="fa-stack fa-fw text-muted"> <span class="fas fa-circle fa-stack-2x"></span><span
            class="fa-stack-1x fa-inverse">or</span></span></div>
         <div class="col-xs-12 col-sm-6 mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Option 2</p>
               <p><span class="fas fa-calculator text-muted"></span> <strong>Revenue drop (%) = 1 – (Previous claim period month revenue / previous claim period baseline revenue)</strong></p>
            </div>
         </div>
      </div>
   </div>
</div>


<p>  The <strong>higher rate that results is the one you will use</strong> to  calculate your subsidy amount. You must repeat this calculation and comparison for  each claim period.</p>



<h4 id="#basebaselinecalc>Baseline (prior reference period)  revenue options</h4>
<p>Your baseline revenue is either: </p>
<div class="row">
   <div class="col-xs-12">
      <div class="row">
         <div class="col-xs-12 col-sm-6 brdr-rght mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Option 1</p>
               <p>the eligible revenue you earned in the corresponding month(s) in 2019       (&ldquo;general prior reference period&rdquo;)</p>
            </div>
         </div>
         <div class="col-xs-1 col-sm-12 pstn-tp-sm text-center mrgn-bttm-lg"><span
            class="fa-stack fa-fw text-muted"> <span class="fas fa-circle fa-stack-2x"></span><span
            class="fa-stack-1x fa-inverse">or</span></span></div>
         <div class="col-xs-12 col-sm-6 mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Option 2</p>
               <p>the average of the eligible revenue you earned in January and       February, 2020 (&quot;alternative prior reference period&quot;)</p>
            </div>
         </div>
      </div>
   </div>
</div>



<p>You must choose one of these reference revenue options  and use it when calculating your revenue drop for both the base rate and top-up  rate for all claims in periods 5 and later. However, if you used one method for  claims you made in periods 1 to 4, you may switch to the other method beginning  with your claim in period 5.</p>
<p><strong>Note:</strong> If you choose the  alternative prior reference period (average of your eligible revenue from  January and February 2020), you need to check the &quot;prior reference  period&quot; election box when completing your CEWS application form.</p>
<table class="table table-bordered table-compressed small">
  <caption>
  Base reference revenue comparison options for claim     periods 5 to 9
  </caption>
  <thead>
    <tr>
      <th scope="col">Claim period</th>
      <th scope="col">General revenue comparison</th>
      <th scope="col">Alternative revenue comparison</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="nowrap">Period 5</td>
      <td><ul><li>July 2020     over July 2019 <br><strong>or</strong></li><li> June 2020 over June 2019</li></ul></td>
      <td><ul><li>July 2020 <br><strong>or</strong></li><li>  June 2020 over     average of January and February 2020</li></ul></td>
    </tr>
    <tr>
      <td>Period 6</td>
      <td><ul><li>August 2020     over August 2019 <br><strong>or</strong></li><li> July 2020 over July 2019</li></ul></td>
      <td><ul><li>August 2020 <br><strong>or</strong></li><li>  July 2020 over     average of January and February 2020</li></ul></td>
    </tr>
    <tr>
      <td>Period 7</td>
      <td><ul><li>September     2020 over September 2019 <br><strong>or</strong></li><li> August 2020 over August 2019</li></ul></td>
      <td><ul><li>September     2020 <br><strong>or</strong></li><li>  August 2020 over average of January and February 2020</li></ul></td>
    </tr>
    <tr>
      <td>Period 8</td>
      <td><ul><li>October 2020     over October 2019 <br><strong>or</strong></li><li> September 2020 over September 2019</li></ul></td>
      <td><ul><li>October 2020 <br><strong>or</strong></li><li>  September 2020 over average of January and February 2020</li></ul></td>
    </tr>
    <tr>
      <td>Period 9</td>
      <td><ul><li>November     2020 over November 2019 <br><strong>or</strong></li><li> October 2020 over October 2019</li></ul></td>
      <td><ul><li>November     2020 <br><strong>or</strong></li><li>  October 2020 over average of January and February 2020</li></ul></td>
    </tr>
  </tbody>
</table>
<h4>Examples of revenue drop calculation for claim periods 5 and later</h4>
<details>
  <summary>Example: Current period's revenue drop is lower than  previous period's</summary>
  [Example  here]</details>
<details>
  <summary>Example: Current period's revenue drop is higher than  previous period's</summary>
  [Example  here]</details>
<h4>Base CEWS rate calculation</h4>
<p>The base rate is added to  the <a href="#topup">top-up rate</a> to determine the  overall rate of CEWS for active employees.</p>
<p>If your <a href="#base">base  revenue drop</a> for a claim period is at least 50%,  you will receive the maximum base rate for that claim period. The maximum base  rate changes for each claim period.</p>
<table class="table table-bordered table-compressed small">
  <caption>
  Base rate of CEWS for claim     periods 5 to 9
  </caption>
  <thead>
    <tr>
      <th scope="col">Claim period</th>
      <th scope="col">Revenue drop of 50% or more</th>
      <th scope="col">Revenue drop of less than 50%</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="nowrap">Period 5</td>
      <td>60%</td>
      <td>1.2 x     revenue drop</td>
    </tr>
    <tr>
      <td>Period 6</td>
      <td>60%</td>
      <td>1.2 x     revenue drop</td>
    </tr>
    <tr>
      <td>Period 7</td>
      <td>50%</td>
      <td>1.0 x     revenue drop</td>
    </tr>
    <tr>
      <td>Period 8</td>
      <td>40%</td>
      <td>0.8 x     revenue drop</td>
    </tr>
    <tr>
      <td>Period 9</td>
      <td>20%</td>
      <td>0.4 x     revenue drop</td>
    </tr>
  </tbody>
</table>
<h3 id="topup">Top-up revenue drop and rate  calculations</h3>
<h4>Revenue drop calculation for top-up  rate</h4>
<p>The <a href="#topup">top-up rate</a> applies to eligible employers whose revenue has dropped by 50% or more  over a particular period of three months.</p>
<p>The top-up revenue drop calculation is the average monthly revenue of the 3  months prior to the claim period divided by either:</p>

<div class="row">
   <div class="col-xs-12">
      <div class="row">
         <div class="col-xs-12 col-sm-6 brdr-rght mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Option 1</p>
              <p>average monthly revenue of  the same three months in 2019 (the &ldquo;general prior reference period&rdquo;)</p>
            </div>
         </div>
         <div class="col-xs-1 col-sm-12 pstn-tp-sm text-center mrgn-bttm-lg"><span
            class="fa-stack fa-fw text-muted"> <span class="fas fa-circle fa-stack-2x"></span><span
            class="fa-stack-1x fa-inverse">or</span></span></div>
         <div class="col-xs-12 col-sm-6 mrgn-bttm-lg">
            <div class="col-sm-12">
               <p class="mrgn-tp-0 text-muted h5">Option 2</p>
               <p>January and February 2020  (the &ldquo;alternative prior reference period&rdquo;)</p>
            </div>
         </div>
      </div>
   </div>
</div>

  
  

<p>You must use the same revenue comparison approach for the  base rate revenue drop and top-up revenue drop. If you choose the general prior  reference period for the base rate (same month in 2019), you must use the  general prior reference period when calculating your revenue drop for the  top-up amount. If you choose the alternative prior reference period when  calculating your base rate (average of January and February, 2020), you must  use the alternative prior reference period when calculating your revenue drop  rate for the top-up.</p>
<table class="table table-bordered table-compressed small">
  <caption>
  Top-up reference revenue comparison options for claim     periods 5 to 9
  </caption>
  <thead>
    <tr>
      <th scope="col">Claim period</th>
      <th scope="col">General revenue comparison</th>
      <th scope="col">Alternative revenue comparison</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="nowrap">Period 5</td>
      <td>Average of     April, May, and June 2020 over average of April, May, and June 2019</td>
      <td>Average of     April, May, and June 2020 over average of January and February 2020</td>
    </tr>
    <tr>
      <td>Period 6</td>
      <td>Average of     May, June, and July 2020 over average of May, June, and July 2019</td>
      <td>Average of     May, June, and July 2020 over average of January and February 2020</td>
    </tr>
    <tr>
      <td>Period 7</td>
      <td>Average of     June, July, and August 2020 over average of June, July, and August 2019</td>
      <td>Average of     June, July, and August 2020 over average of January and February 2020</td>
    </tr>
    <tr>
      <td>Period 8</td>
      <td>Average of     July, August, and September 2020 over average of July, August, and September     2019</td>
      <td>Average of     July, August, and September 2020 over average of January and February 2020</td>
    </tr>
    <tr>
      <td>Period 9</td>
      <td>Average of     August, September, and October 2020 over average of August, September, and     October 2019</td>
      <td>Average of     August, September, and October 2020 over average of January and February     2020</td>
    </tr>
  </tbody>
</table>
<h4>Top-up rate calculation</h4>
<p>The top-up rate is added  to the <a href="#base">base rate</a>  to determine the overall rate of CEWS for active employees.</p>
<p>If your <a href="#topup">top-up revenue drop</a> for a claim period is at least 70%,  you will receive the maximum top-up rate of 25% for that claim period. The  top-up calculation is the same for each claim period from 5 to 9.</p>
<table class="table table-bordered table-compressed small">
  <caption>
  Top-up rate calculation for claim     periods 5 to 9
  </caption>
  <thead>
    <tr>
      <th scope="col">Average revenue drop</th>
      <th scope="col">Top-up rate</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>70% or     higher</td>
      <td>25%</td>
    </tr>
    <tr>
      <td>50% to     69.9999%</td>
      <td>1.25 x     (average revenue drop - 50%)</td>
    </tr>
    <tr>
      <td>under 50%</td>
      <td>0%</td>
    </tr>
  </tbody>
</table>
<h3>Examples of overall CEWS rate  calculation for claim periods 5 and later</h3>
<p>[Table showing examples of overall rates based on  different revenue drops]</p>
<details>
  <summary>Example: Qualifying for CEWS but no amount of top-up</summary>
  [Example  here]</details>
<details>
  <summary>Example: Qualifying for CEWS with a partial top-up</summary>
  [Example  here]</details>
<details>
  <summary>Example: Qualifying for CEWS with the maximum top-up</summary>
  [Example  here]</details>
<details>
  <summary>Example: Not qualifying for any amount of CEWS</summary>
  [Example  here]</details>
<h2 id="h-2">Revenue drop calculation  for claim periods 1 to 4 (March to June, 2020)</h2>
<!-- Start ajax section -->
<div id="ajax-1-4">
<p>For periods 1 to 4, you must show  that your eligible revenue dropped by a minimum amount to qualify for the  subsidy. If you meet the minimum revenue drop, the subsidy calculation uses a fixed  rate of 75%.</p>

<h3>How the revenue drop is calculated for periods 1 to 4</h3>
<p>Your revenue drop for a claim period is the decline in eligible  revenue you experienced. It&rsquo;s  calculated by comparing your eligible revenue for the claim period month to your eligible revenue  from a corresponding period in the past (&ldquo;baseline revenue&rdquo;).</p>
<h4>See  the math behind the revenue drop calculation</h4>
<p>For  each claim period, <strong>1 – (A÷B)</strong>, where:</p>
<ul>
  <li><strong>A</strong> is your eligible  revenue for the specified month of the claim period, and</li>
  <li><strong>B</strong> is your eligible  revenue from a corresponding prior period (baseline eligible revenue).</li>
</ul>
<p>The result, expressed as a percentage,  is your revenue drop.</p>
<p>Your revenue drop can&rsquo;t be negative. If the result is  negative, then your actual revenue drop for the particular claim period is 0%. </p>
<h4>Revenue  drop required to qualify for claim periods 1 to 4</h4>
<table class="table table-bordered table-compressed small">
  <caption>
  Claim periods and revenue drops for the Canada Emergency     Wage Subsidy
  </caption>
  <thead>
    <tr>
      <th scope="col">Claim period</th>
      <th scope="col">Start and end dates</th>
      <th scope="col">Baseline revenue</th>
      <th scope="col">Claim period revenue</th>
      <th scope="col">Required drop</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Period 1</td>
      <td>March    15 to April 11, 2020</td>
      <td><ul>
         
            <li>March 2019 <br><strong>or</strong></li>
            <li>average    of January  and February 2020</li>
          
        </ul></td>
      <td>March 2020</td>
      <td>15%</td>
    </tr>
    <tr>
      <td>Period 2</td>
      <td>April    12 to  May 9, 2020</td>
      <td><ul>
          
            <li>April 2019<br> <strong>or</strong></li>
            <li>average    of January and February 2020</li>
         
        </ul></td>
      <td>April 2020</td>
      <td>30%</td>
    </tr>
    <tr>
      <td>Period 3</td>
      <td>May    10 to June 6, 2020</td>
      <td><ul>
         
            <li>May 2019<br> <strong>or</strong></li>
            <li>average    of January and February 2020</li>
          
        </ul></td>
      <td>May 2020</td>
      <td>30%</td>
    </tr>
    <tr>
      <td>Period 4</td>
      <td>June    7 to July 4, 2020</td>
      <td><ul>
         
            <li>June 2019<br> <strong>or</strong></li>
            <li>average    of January and February 2020</li>
          
        </ul></td>
      <td>June 2020</td>
      <td>30%</td>
    </tr>
  </tbody>
</table>
<p>You must choose one of these reference revenue options  and use it when calculating your revenue drop for all claims in periods 1 to 4.  However, if you use one method for claims you made in periods 1 to 4, you may  switch to the other method beginning with your claim in period 5.</p>
<p> <strong>Note:</strong> If you choose the alternative baseline period (average of your eligible  revenue from January and February 2020), you need to check the &quot;prior  reference period&quot; election box when completing your CEWS application form.</p>
<h3>Automatically  qualifying for later periods (the &ldquo;deeming rule&rdquo; for  periods 1 to 4)</h3>
<p>For periods 1, 2, and 3, if you determine  that you qualify for the subsidy for one claim period, you will automatically  qualify for the following claim period. For example, if your revenue drop is  over 30% for period 3, you don&rsquo;t need to re-calculate your drop for period 4  (you are &ldquo;deemed&rdquo; to have met this qualification).</p>
<p>However, if you qualify  for the CEWS in period 4, you do not necessarily automatically qualify for  period 5. You must calculate your eligible revenue drop for period 5  if you intend to make a  claim for that period. </p>
<h3>Examples  of revenue drop calculation and automatically qualifying for  claim periods 1 to 4</h3>
<details>
  <summary>Example: Automatically qualifying for a subsequent  period</summary>
  <p>content</p></details>
<details>
  <summary>Example: Only qualifying for period 3</summary>
  <p>content</p></details>
<details>
  <summary>Example: Qualifying for all periods 1, 2, and 3</summary>
  <p>content</p></details>
</div>
<!-- End ajax section -->
        <nav class="mrgn-bttm-lg mrgn-tp-lg">
          <h3 class="wb-inv">Document navigation</h3>
          <ul class="pager">
		  <li class="previous"><a href="how-much.html" rel="prev">Calculate your subsidy amount</a></li>
            <li class="next"><a href="how-apply.html" rel="next">How to apply</a></li>
          </ul>
        </nav>
      </section>
      <div id="def-preFooter"></div>
      <!-- Write closure template -->
      <script type="text/javascript">
        var defPreFooter = document.getElementById("def-preFooter");
        defPreFooter.outerHTML = wet.builder.preFooter({
          dateModified: "2020-07-13",
          showPostContent: true,
          showFeedback: true,
          showShare: true
        });
      </script>
    </main>
    <div id="def-footer"></div>
    <!-- Write closure template -->
    <script type="text/javascript">
      var defFooter = document.getElementById("def-footer");
      defFooter.outerHTML = wet.builder.footer({
        showFooter: true,
        showFeatures: true
      });
    </script>
    <!-- Write closure template -->
    <script type="text/javascript">
      document.write(wet.builder.refFooter({
      }));
    </script>
    <script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script>
    <script>
      ( function( $, window, wb ) {
        "use strict";
        /*
        * Variable and function definitions.
        * These are global to the plugin - meaning that they will be initialized once per page,
        * not once per instance of plugin on the page. So, this is a good place to define
        * variables that are common to all instances of the plugin on a page.
        */
        // function that should be moved as a helper class or something
        const toMoney = new Intl.NumberFormat(wb.lang + "-CA", {
          style: "currency",
          currency: "CAD",
          minimumFractionDigits: 2
        });

        var componentName = "wb-calc",
            selector = "." + componentName,
            initEvent = "wb-init" + selector,
            $document = wb.doc,
            defaults = {},
            sep = {
              iso: {
                en: "--",
                fr: "--"
              },
              claim: {
                en: " to ",
                fr: " au "
              }
            },
          /**
           * @method init
           * @param {jQuery Event} event Event that triggered the function call
           */
          init = function( event ) {
            // Start initialization
            // returns DOM object = proceed with init
            // returns undefined = do not proceed with init (e.g., already initialized)
            
            var elm = wb.init( event, componentName, selector ),
                $elm,
                settings;

            if ( elm ) {
              $elm = $( elm );
              // ... Do the plugin initialisation
              // Get the plugin JSON configuration set on attribute data-wb-helloworld
              settings = $.extend(
                true,
                {},
                defaults,
                window[ componentName ],
                wb.getData( $elm, componentName )
              );

              // Call my custom event
              $elm.trigger( "change", settings );
              // Identify that initialization has completed
              wb.ready( $elm, componentName );
            }
          };

        // Plugin event handlers
        $document.on( "change", "input", function( event ) {
          var elm = event.currentTarget,
              $elm = $( elm ),
              $elmId = $elm.attr("id"),
              data = wb.getData( $("output[for='" + $elmId + "']"), componentName),
              value = $elm.val().replace(/\,\s/g,''), // Needs to be replaced by data.expr evaluation
              total = 0; 

          if(data.expr) {
            if (data.format === "currency") {
              $("output[for='" + $elmId + "']").html( toMoney.format(value * 1 ) );
            } else {
              $("output[for='" + $elmId + "']").html( value * 1 );
            };
          }
          
          total = ($("#p2c-cews").val() * 1) + ($("#p3-ei").val() * 1) + ($("#p3-cpp").val() * 1) - ($("#p4-tws").val() * 1) - ($("#p4-wsb").val() * 1);
          if(total < 0) {
            $("[for='p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html( toMoney.format(0) );
          } else {
            $("[for='p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html( toMoney.format(total) );
          };
        });

        $document.on("change", selector, function( event, data ) {
          var elm = event.currentTarget,
              $elm = $( elm ),
              $input = $("#" + $elm.attr("for")),
              value = $input.val();

          if (data && data.format === "currency") {
            $elm.html( toMoney.format(value * 1) );
          } else {
            $elm.html( value * 1 );  
          };
          $("[for='p2c-ee p2c-pyrl p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(0));
        } );
 
        $document.on("change", "#claim-period", function( event ) {
          var rangeISO = $(this).find('option:selected').val(),
            startDateISO = rangeISO.substring(0, rangeISO.indexOf(sep.iso[wb.lang])),
            endDateISO = rangeISO.substring(rangeISO.indexOf(sep.iso[wb.lang]) + sep.iso[wb.lang].length, rangeISO.length),
            rangeClaim = $(this).find("option:selected").text(),
            startDateClaim = rangeClaim.substring(0, rangeClaim.indexOf(sep.claim[wb.lang])),
            endDateClaim = rangeClaim.substring(rangeClaim.indexOf(sep.claim[wb.lang]) + sep.claim[wb.lang].length, rangeClaim.length);

          if(!$("#claim-period option:selected:eq(0)")) {
            $('.claim-period').html("<time datetime=\"" + startDateISO + "\">" + startDateClaim + "</time>" + sep.claim[wb.lang] + "<time datetime=\"" + endDateISO + "\">" + endDateClaim + "</time>");
          } else {
            $('.claim-period').html($("#claim-period option:selected").text());
          }
        });

        $document.on("click", "#calculate", function( event ) {
          event.preventDefault();
          var count = 0,
              $elms = $(".wb-frmvld select, .wb-frmvld input"),
              $emptyElms = [];

          for (let i = 0; i < $($elms).length; i++) {
            var $elm = $($elms).eq(i);
            if($elm.val() == "") {
              $emptyElms.push($elm);
              count++;
            }
          }

          if($("#errors-default")[0]) {
            $('html, body').animate( {scrollTop: $("#errors-default").offset().top}, 'slow');
          } else if( $emptyElms[0] ) {
            $('html, body').animate( {scrollTop: $($emptyElms[0]).offset().top}, 'slow');
          } else {
            $("#results").toggleClass('hidden');
          }
        });
        // Bind the init event of the plugin
        $document.on( "timerpoke.wb " + initEvent, selector, init );
        // Add the timer poke to initialize the plugin
        wb.add( selector );
        } )( jQuery, window, wb );

        // TODO: Escape commas and whitespaces in input[type=number] in IE and Edge(Trident)
    </script>
  </body>
</html>
