<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
<title>Calculate your wage or hiring amount – Canada.ca</title>
<meta content="width=device-width,initial-scale=1" name="viewport" />
<meta name="robots" content="noindex" />
<!-- Meta data -->

<!-- Load closure template scripts -->

<script 
    src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_43/cdts/compiled/soyutils.js"></script>
<script 
    src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_43/cdts/compiled/wet-en.js"></script>
<link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet" />
<link href="../../css/cews.css" rel="stylesheet" />
<link href="../../css/checkbox-radio-cers.css" rel="stylesheet" />
	<link href="http://test.canada.ca/cra/css/and-or.css" rel="stylesheet" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
<!-- Write closure template -->
<script>
    document.write(wet.builder.refTop({
    }));
  </script>
<style>
.provisional.wb-steps .wb-tggle-fildst > legend:before {
	background-color: #fff;
	padding: 4px;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	border: 3px solid #6f6f6f;
	height: 1.2em;
	width: 1.2em;
	box-sizing: content-box;
	margin-right: 10px;
	display: inline-block;
	text-align: center;
	line-height: 1.2;
	content: counter(fieldset_counter);
}
.panel-default > .panel-heading.wb-steps-active {
	background-color: #fff;
}
.provisional.wb-steps .wb-tggle-fildst > legend.wb-steps-active:before {
	background-color: #1c578a;
	border-color: #1c578a;
	color: #fff;
}
.provisional.wb-steps .wb-tggle-fildst > legend:not(.wb-steps-active) {
	font-size: 18px;
}
.provisional.wb-steps .wb-tggle-fildst > legend.wb-steps-active {
	font-weight: bold;
}
fieldset +.buttons {
	margin-left: 15px;
}
.wb-steps-active .panel-title {
	font-size: 1.3em;
}
	fieldset fieldset {min-width: 1px;}
.ds-example {
	margin-top: 15px;
	border: 1px solid #e3e3e3;
	box-shadow: 0px 0px 8px #e3e3e3;
}
.ds-example>.wb-tabs>.tabpanels {
	background: #f9f9f9;
}
.ds-example>.wb-tabs>.tabpanels legend {
	font-size: 80%;
	font-weight: 700;
	margin: 0 0 5px;
}
.ds-example>.wb-tabs>.tabpanels fieldset {
	padding-top: 0;
}
.ds-example>.wb-tabs>.tabpanels>details>summary {
	background: #fff;
	border-radius: 0;
}
.ds-example>.wb-tabs [role=tablist]>li:focus, .ds-example>.wb-tabs [role=tablist]>li:hover {
	background: #ddd;
}
.ds-example>.wb-tabs {
	margin-bottom: 0;
}
.ds-example>.wb-tabs>.tabpanels>details {
	margin-bottom: 0;
}
.ds-example .panel-body {
	box-shadow: none;
}

@media screen and (max-width: 991px) {
.ds-example>.wb-tabs .tgl-panel {
	margin-top: 15px;
}
}

@media screen and (min-width: 992px) {
.ds-example>.wb-tabs>.tabpanels>details {
	border: none;
	padding: 15px;
}
.ds-example>.wb-tabs [role=tablist]>li {
	border: none;
	background: none;
}
.ds-example>.wb-tabs [role=tablist]>li.active a {
	border-width: 0 0 4px;
}
.ds-example>.wb-tabs>.tabpanels>details {
	padding: 30px;
}
.ds-example>.wb-tabs>.tabpanels>details {
	background: #f9f9f9;
	padding: 30px;
	margin-bottom: 0;
}
}
.prev-wb-step .btn-lgnd
	{ margin: 1px; text-decoration-line: underline;}
.prev-wb-step:focus, .prev-wb-step:hover
	{color: #0535d2;}	
.prev-wb-step:focus 
	{outline: 5px auto; outline-offset: -2px;}	
</style>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
<div id="def-top"> </div>
<!-- Write closure template --> 
<script>
    var defTop = document.getElementById("def-top");
    defTop.outerHTML = wet.builder.top({
      lngLinks: [{

        lang: "fr",
        href: "../wage-subsidy/cews-how-much-mt-fr.html",
        text: "Français"
      }],
      breadcrumbs: [{
        title: "Canada.ca",
        href: "https://www.canada.ca/en.html"
      },{
        title: "Business and industry",
        href: "https://www.canada.ca/en/services/business.html"
      },{
        title: "Managing your business during COVID-19",
        href: "https://www.canada.ca/en/services/business/maintaining-your-business.html"
      },{
        title: "Wage and rent subsidies",
        href: "../index.html"
      },{
        title: "COVID-19 wage and payroll support for businesses",
        href: "index.html"
      },{
        title: "Calculate your subsidy amount",
        href: "../wage-subsidy/calculate-subsidy-amount.html"
      }],
      search: true,
      siteMenu: true,
      showPreContent: true
    });
  </script>
<main property="mainContentOfPage" class="container">
  <h1 property="name" id="wb-cont">Calculate your wage or hiring amount</h1>

  <div data-wb-urlmapping='{
		"subsidy=cews":
			[{
				"action": "removeClass",
				"source": ".breadcrumb li:nth-child(3)",
				"class": "hidden"
			}, {
				"action": "addClass",
				"source": ".breadcrumb li:nth-child(4)",
				"class": "hidden"
			}],
			"subsidy=crhp":
			[{
				"action": "removeClass",
				"source": ".breadcrumb li:nth-child(4)",
				"class": "hidden"
			}, {
				"action": "addClass",
				"source": ".breadcrumb li:nth-child(3)",
				"class": "hidden"
			}] 
		}'></div>
    <div class="row">
      <!-- <div class="col-xs-12 col-sm-4 pull-right">
        <div class="well-sm brdr-rds-0 panel panel-default">
          <div class="panel-body">
            <p class="h3 mrgn-tp-0"><span class="fas fa-directions fa-flip-horizontal"></span> Return to</p>
            <ul>
              <li><a href="../wage-subsidy/index.html">Wage and payroll support</a></li>
              <li><a href="../hiring-program/index.html">Hiring support (CRHP)</a></li>
            </ul>
          </div>
        </div>
      </div> -->
      <div class="col-sm-8 pull-left">
        <h2 class="h3 mrgn-tp-sm">On this page</h2>
        <ul>
          <li><a href="#h-1">When to use the calculator</a></li>
          <!-- <li><a href="#h-1">Eligibility and details on the subsidies</a> -->
          <li><a href="#h-2">Before you start the calculation</a></li>
          <li><a href="#h-3">Use the calculator</a></li>
        </ul>
      </div>
    </div>
    <h2 id="h-1">When to use the calculator</h2>
    <p>Use this calculator to:</p>
    <ul>
      <li>calculate amounts for:
        <ul>
          <li>Tourism and Hospitality Recovery Program Wage subsidy (THRP - Wage) - claim periods 22 to 28</li>
          <li>Hardest-Hit Businesses Recovery Program Wage subsidy (HHBRP - Wage) - claim periods 22 to 28</li>
          <li>Canada Recovery Hiring Program (CRHP) - claim periods 17 to 28</li>
          <li>Canada Emergency Wage Subsidy (CEWS) - claim periods 1 to 21</li>
        </ul>
      </li>
      <li>see which subsidy gives you the higher amount, so you know which one to apply for</li>
      <li>get the line-by-line amounts you will need to enter in the application form</li>
    </ul>

  <!-- <h2 id="h-1">How the calculator helps you</h2>
  <p>Use this calculator to calculate amounts for both the Canada Emergency Wage Subsidy (CEWS) and the Canada Recovery Hiring Program (CRHP) to determine which one to apply for and the amounts to include in your application.</p>
  <ol>
    <li>Calculate your subsidy amount by entering employee pay information</li>
    <li>Print and save the numbers you'll need to enter when you apply</li>
    <li>Apply for the subsidy online through My Business Account, Represent a Client, or the Web Forms application using the information you printed</li>
  </ol>
  <p>You can currently use the calculator for claim periods 1 to . More periods will be added as they become available. </p>
  <p>The calculator has been updated to include <a href="cews-what-changes.html">changes to the period 8 to 10 top-up calculation finalized on November 17th</a>. It automatically applies the best subsidy rate you qualify for (including applying any safe harbour and deeming rules) based on information you enter. </p>
  <p>To understand the math behind the wage subsidy calculation, refer to <a href="../wage-subsidy/cews-how-much-version-math.html">how the subsidy is calculated</a>.</p> -->

  <h2 id="h-2">Before you start the calculation</h2>
  <p class="lead">Check these boxes to confirm you are prepared before you start your calculations:</p>

    <ul class="checkbox-lg checkbox-zebra">
      <li class="checkbox">
        <input type="checkbox" id="bfore1" class="action-checkbox">
        <label for="bfore1">You are an eligible employer during this claim period</label>
        <ul class="mrgn-lft-lg list-unstyled">
          <li><a href="../determine-eligibility/index.html">Answer a few questions to find out what you qualify for</a></li>
        </ul>
      </li>
      <li class="checkbox">
        <input type="checkbox" id="bfore2" class="action-checkbox">
        <label for="bfore2"><strong>Both of the following apply:</strong></label>
        <div class="cnjnctn-type-and mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore2" class="p-0">You know which of your employees are eligible for this claim period</label>
            </p>
            <ul class="mrgn-lft-lg list-unstyled">
              <li><a href="../wage-subsidy/who-employees.html">Which of your employees qualify for wage support</a></li>
            </ul>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore2" class="p-0">You have access to their pay information</label>
            </p>
            <ul class="mrgn-lft-lg list-unstyled">
              <li><a href="../wage-subsidy/who-employees.html#h-2">Determining employee pay (eligible remuneration)</a></li>
            </ul>
          </div>
        </div>
      </li>
      <li class="checkbox">
        <input type="checkbox" id="bfore3" class="action-checkbox">
        <label for="bfore3"><strong>Both of the following apply:</strong></label>
        <div class="cnjnctn-type-and mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore3" class="p-0">You know if you had any eligible employees on leave with pay for any full weeks
                during the claim period</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#lwp" aria-controls="lwp" class="wb-lbx" role="button">Active employees and employees on
                leave with pay&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore3" class="p-0">For claim periods 1 to 19: you have calculated the employer portion of their EI, QPIP, CPP and QPP contributions during the claim period</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#contributions" aria-controls="contributions" class="wb-lbx" role="button">EI, QPIP,
                CPP and QPP contributions&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
          </div>
        </div>
      </li>
      <li class="checkbox">
        <input type="checkbox" id="bfore4" class="action-checkbox">
        <label for="bfore4">You have your monthly eligible revenue amounts from each month since March 2019</label>
      </li>
      <!-- <li class="checkbox">
        <input type="checkbox" id="bfore5" class="action-checkbox">
        <label for="bfore5"><strong>One of the following applies:</strong></label>
        <div class="cnjnctn-type-or mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You are calculating a claim for period 5 or later, and you understand that the 10%
                wage subsidy does not apply</label>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You are calculating a claim for periods 1 to 4, and you know the amount (if any) you calculated for the 10% wage subsidy</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#tempwage" aria-controls="tempwage" class="wb-lbx" role="button">10% Temporary Wage
                Subsidy for Employers program amount&nbsp;<span class="far fa-question-circle"></span></a> </li>
            </ul>
          </div>
        </div>
      </li> -->
      <li class="checkbox">
        <input type="checkbox" id="bfore5" class="action-checkbox">
        <label for="bfore5"><strong>One of the following applies:</strong></label>
        <div class="cnjnctn-type-or mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You know the total amount your eligible employees received under the
                Work-Sharing benefit program through Employment Insurance for this claim period</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#worksharing" aria-controls="worksharing" class="wb-lbx" role="button">Work-Sharing
                benefit program through Employment Insurance amount&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You did not participate in the Work-Sharing program (enter $0)</label>
            </p>
          </div>
        </div>
      </li>
    </ul>
    <div class="alert alert-warning provisional" id="action-no-msg">
      <p class="h4 mrgn-tp-0 text-warning">Before you proceed</p>
      <p>You should understand the definitions and gather all the necessary information before you calculate
        your claim.</p>
    </div>
    <div class="alert alert-success hidden provisional" id="action-msg1">
      <p class="h4 mrgn-tp-0 text-success">You can now proceed</p>
      <p>Go ahead and calculate the amounts you will need for your claim. </p>
    </div>
<h2 id="h-3">Choose your calculator</h2>
<div class="cnjnctn-type-or cnjnctn-sm wb-eqht mrgn-bttm-xl" data-wb-actionmng='[
      { "trggroup":"clearFilter", "action": "removeClass", "source": ".btn-cews-cal", "class": "btn-primary" } ]'>
  <div class="cnjnctn-col">
    <div id="calc-pnl" class="eqht-trgt">
      <p class="h5 mrgn-tp-sm"><span class="wb-inv">Option 1 of 2, </span>You may prefer the online calculator if you:</p>
      <ul class="mrgn-bttm-0">
        <li>can enter employee pay on a weekly basis, and</li>
        <li>expect to complete your calculation now</li>
      </ul>
    </div>
    <a href="#cal-calc" role="button" id="show-online-calc" class="btn btn-default mrgn-tp-md btn-block" >Online calculator</a>
  </div>
  <div class="cnjnctn-col">
    <div class="eqht-trgt">
      <p class="h5 mrgn-tp-sm"><span class="wb-inv">Option 2 of 2,</span>Choose the spreadsheet if you:</p>
      <ul class="mrgn-bttm-0">
        <li>want to enter pay on a bi-weekly basis, or</li>
        <li>want to save your calculation and come back to it later</li>
        <li>have more than one RP account</li>
      </ul>
    </div>
    <a href="#cews-cal-opt1" role="button" id="show-sprdsht" class="btn btn-default mrgn-tp-md btn-block" >Downloadable calculation spreadsheet</a>
  </div>
</div>
<div id="cews-cal-opt1" class="hidden" aria-live="polite">
  <p class="h4 mrgn-tp-0">Calculation spreadsheet </p>
  <div class="alert alert-info provisional">
    <p>All claim period spreadsheets now include every calculation field needed to proceed directly to the application form. Using the online calculator after you use the spreadsheet to finalize your claim amount is no longer required.</p>
    <p>Please check that you made your calculations with the most recent version.</p>
  </div>
  <div class="wb-frmvld">
    <form>
      <div class="wb-fieldflow" data-wb-fieldflow='{"noForm": true, "default":{"action": "addClass", "source": "#cal-sprdsht-none", "class": "hidden", "live": true}}'>
        <p> Select a claim period</p>
        <ul>
          <li>CRHP, THRP - Wage and HHBRP - Wage
            <ul>
              <!-- <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 28: April 10 to May 7, 2022</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 27: March 13 to April 9, 2022</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 26: February 13 to March 12, 2022</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 25: January 16 to February 12, 2022</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 24: December 19 to January 15, 2022</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 23: November 21 to December 18, 2021</li> -->
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p22", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 22: October 24 to November 20, 2021</li>
            </ul>
          </li>
          <li>CEWS and CRHP
            <ul>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p17", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 21: September 26 to October 23, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p17", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 20: August 29 to September 25, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p17", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 19: August 1 to August 28, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p17", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 18: July 4 to July 31, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p17", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 17: June 6 to July 3, 2021</li>
            </ul>
          </li>
          <li>CEWS only
            <ul>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 16: May 9 to June 5, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 15: April 11 to May 8, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 14: March 14 20 to April 10, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 13: February 14 to March 13, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 12: January 17 to February 13, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 11: December 20, 2020, to January 16, 2021</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p9", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": false}
              ]'>Period 10: November 22 to December 19, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p9", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 9: October 25 to November 21, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p7", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 8: September 27 to October 24, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprsht-p7", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 7: August 30 to September 26, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true},
                {"action": "toggle", "toggle": "#cal-sprsht-p5", "live": true}
              ]'>Period 6: August 2 to August 29, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true},
                {"action": "toggle", "toggle": "#cal-sprsht-p5", "live": true}
              ]'>Period 5: July 5 to August 1, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 4: June 7 to July 4, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 3: May 10 to June 6, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 2: April 12 to May 9, 2020</li>
              <li data-wb-fieldflow='[
                {"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true},
                {"action": "toggle", "toggle": "#spreadsheet-nolongeravailable", "live": true}
              ]'>Period 1: March 15 to April 11, 2020</li>
            </ul>
          </li>
        </ul>
      </div>
    </form>
  </div>
  <div class="provisional alert alert-danger hidden" id="spreadsheet-nolongeravailable">
    <p>This period is closed. <a href="/en/revenue-agency/services/subsidy/emergency-wage-subsidy/cews-after-apply.html#change-1" target="_blank">Read more about application deadlines<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></a>.</p>
    <p>The calculator for this period is available for information purposes only.</p>
  </div>
  <div id="cal-sprdsht-none">
    <p class="mrgn-bttm-0">
      <button type="button" class="btn btn-primary btn-lg" disabled>Download the spreadsheet (Excel)</button>
      <br>
      Please select a claim period to download the spreadsheet</p>
  </div>
  <div id="cal-sprsht-p22" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-crhp-calculation-p22-28.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 22 to 28 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2021-1</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for periods 22 to 28
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2021-12-13 06:00"><span class="nowrap">2021-12-13</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p17" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-crhp-calculation-p17-21.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 17 to 21 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2021-1</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for periods 17 to 22
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2021-01-17 06:00"><span class="nowrap">2021-01-17</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p11" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p11-13.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 11 to 16 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2021-6</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for periods 11 to 16
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2021-04-30 15:00"><span class="nowrap">2021-04-30</span><br>
                  <span class="nowrap">15:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-6</td>
              <td><ul>
                  <li>Added help text to explain why 2019 months are now being used for the revenue drop (no calculation change)</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-04-14 10:00"><span class="nowrap">2021-04-14</span><br>
                  <span class="nowrap">10:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-5</td>
              <td><ul>
                  <li>Rates summary for periods 14, 15 and 16 all said period 13 in the summary heading (no calculation changes)</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-03-26 03:00"><span class="nowrap">2021-03-26</span><br>
                  <span class="nowrap">03:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-4</td>
              <td><ul>
                  <li>Added periods 14-16</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-02-08 09:00"><span class="nowrap">2021-02-08</span><br>
                  <span class="nowrap">09:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-3</td>
              <td><ul>
                  <li>Updated the notes describing the revenue drop months and top up rate (no calculation changes)</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-01-20 14:05"><span class="nowrap">2021-01-20</span><br>
                  <span class="nowrap">14:05:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-2</td>
              <td><ul>
                  <li>Rounding applied to the revenue drop before the rate calculations to align with validation on the application form</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-01-17 06:00"><span class="nowrap">2021-01-17</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p9" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p9-10.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 9 to 10 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-2</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for periods 9 to 10
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-12-22 08:45"><span class="nowrap">2020-12-22</span><br>
                  <span class="nowrap">08:45:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>Updated the help text to display weekly/bi-weekly date ranges correctly for period 10 on the step 2 tabs</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-11-30 06:00"><span class="nowrap">2020-11-30</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p7" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p7-8.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 7 to 8 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-5</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for periods 7 to 8
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-11-30 06:00"><span class="nowrap">2020-11-30</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-5</td>
              <td><ul>
                  <li>Updated list formatting on row 8 for leave with pay</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-11-25 08:30"><span class="nowrap">2020-11-25</span><br>
                  <span class="nowrap">08:30:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-4</td>
              <td><ul>
                  <li>Updated description of the bi-weekly pre-crisis pay heading</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-11-23 06:00"><span class="nowrap">2020-11-23</span><br>
                  <span class="nowrap">06:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-3</td>
              <td><ul>
                  <li>Add new top-up calculation</li>
                  <li>Update information about calculating pre-crisis pay</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-10-28 06:00"><span class="nowrap">2020-10-28</span><br>
                  <span class="nowrap">06:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>Add period 8</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-09-23 11:30"><span class="nowrap">2020-09-23</span><br>
                  <span class="nowrap">11:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p5" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p5-6.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 5 to 6 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-5</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-08-21 11:00"><span class="nowrap">2020-08-21</span><br>
                  <span class="nowrap">11:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-5</td>
              <td><ul>
                  <li>Changed negative revenue reduction amounts for line c1 of the application </li>
                  <li>Applies safe harbour rule when the revenue drop is exactly 30.00% (unless
                    your revenue drop is exactly 30.00%, this will not affect your calculation) </li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-19 12:30"><span class="nowrap">2020-08-19</span><br>
                  <span class="nowrap">12:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-4</td>
              <td><ul>
                  <li>Added capability to extend formulas for more than 2500 employees</li>
                  <!--li>Corrected maximum bi-weekly amount (Step 2b) for non-arm’s length employees when the employer revenue reduction is under 30% for the period</li-->
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-17 17:30"><span class="nowrap">2020-08-17</span><br>
                  <span class="nowrap">17:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-3</td>
              <td><ul>
                  <li>Corrected calculation issue of the Base Rate when businesses were using the
                    alternate baseline calculation method and did not carry on business for the
                    entirety of January to February</li>
                  <!--li>Corrected maximum bi-weekly amount (Step 2b) for non-arm’s length employees when the employer revenue reduction is under 30% for the period</li-->
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-13 10:00"><span class="nowrap">2020-08-13</span><br>
                  <span class="nowrap">10:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>Corrected eligibility validation of employees with 14 or more days gap in
                    employment for periods 5+</li>
                  <li>Updated compatibility with older versions of Excel</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-11 08:00"><span class="nowrap">2020-08-11</span><br>
                  <span class="nowrap">08:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprdsht-p1-4" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p1-4.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for periods 1 to 4 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-9</p>
    <details class="small">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-08-19 12:30"><span class="nowrap">2020-08-19</span><br>
                  <span class="nowrap">12:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-9</td>
              <td><ul>
                  <li>Added capability to extend formulas for more than 2500 employees</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-08-14 11:45"><span class="nowrap">2020-08-14</span> <br>
                  <span class="nowrap">11:45:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-8</td>
              <td><ul>
                  <li>Corrected baseline remuneration options for period 4</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-08-13 10:00"><span class="nowrap">2020-08-13</span> <br>
                  <span class="nowrap">10:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-7</td>
              <td><ul>
                  <li>Fixed formula reference for weekly tab</li>
                  <li>Updated compatibility with older versions of Excel</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-08-11 08:00"><span class="nowrap">2020-08-11</span> <br>
                  <span class="nowrap">08:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-6</td>
              <td><ul>
                  <li>New options for period to use for employee baseline pay</li>
                  <li>New revenue drop calculation feature for eligibility</li>
                  <li>Step by step tabs</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-06-25 17:30"><span
              class="nowrap">2020-06-25</span> <br>
                  <span class="nowrap">17:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-5</td>
              <td><ul>
                  <li>Add period 4</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-04-27 16:15"><span
              class="nowrap">2020-04-27</span> <br>
                  <span class="nowrap">16:15:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-4</td>
              <td><ul>
                  <li>Text updates (change does not affect calculation)</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-04-24 19:15"><span
              class="nowrap">2020-04-24</span> <br>
                  <span class="nowrap">19:15:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-3</td>
              <td><ul>
                  <li>Batch rows moved to a separate sheet</li>
                  <li>Layout updates to make the spreadsheet easier to complete</li>
                  <li>More detailed instructions on how to input amounts and avoid errors</li>
                  <li>Rounding made more accurate</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-04-21 16:12"><span
              class="nowrap">2020-04-22</span> <br>
                  <span class="nowrap">12:45:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>On the “Instructions and results” worksheet, the "Total Gross Payroll" label
                    has
                    been renamed to "Total eligible remuneration", so it matches the corresponding
                    web
                    application form label</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-04-21 20:00"><span class="nowrap">2020-04-21</span><br>
                  <span class="nowrap">09:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <p class="small">(If you don't have Excel, you can open the spreadsheet in free solutions like
    Google Sheets, Numbers or OpenOffice.)</p>
  <p><strong>Note:</strong> If you have an employee that also works for a related eligible
    employer, you may need to manually adjust the information you enter in the spreadsheet. The
    combined total CEWS or CRHP amount that can be claimed for an employee between you and any
    related eligible employers for each week can't exceed <!--$847-->the maximum amount for an employee. A related eligible employer is
    any eligible employer that you do not deal with on an arm’s-length basis.</p>
  <details>
    <summary>Example of an adjustment for an employee working for related entities</summary>
    <p>Westside Restaurant Ltd. (WRL) and Eastside Bar Ltd. (EBL) are both owned by the same
      person. Mary works full time at WRL but also works weekends at EBL. Mary earns $1000 per
      week at WRL and another $300 per week at EBL.</p>
    <p>Using the calculation spreadsheet, WRL determines the CEWS amount related to Mary for the
      week is $750 (75% of $1000). When EBL uses the calculation spreadsheet it shows a CEWS
      amount of $225 (75% of $300) for Mary. However, the total of those two amounts ($750 +
      $225) is $975 – which exceeds the maximum of $847 by $128.</p>
    <p>The claim amount of WRL or EBL will need to be manually reduced by a total of $128 so
      that the total CEWS amount related to Mary does not exceed the $847 maximum for that week. </p>
  </details>
  <h3>How to apply</h3>
  <p>Once you have completed the spreadsheet calculations, go to the how to apply page to find the application form for your subsidy program:</p>
  <ul>
    <li><a href="../wage-subsidy/how-apply.html">Apply for wage support</a></li>
  </ul>
</div>	
<div id="cal-calc" class="hidden"  aria-live="polite">
<details>
  <summary>Privacy statement: This calculator does not collect or store your information</summary>
  <p>The CRA is not collecting or retaining any of the information you enter on this page or in the calculation
    spreadsheet. These amounts are only used to help you determine the amount of wage and payroll support you may be eligible to
    claim. You may be required to provide a full list of your employees and their Social Insurance Numbers (SIN)
    for verification after you apply.</p>
</details>
<p><strong class="text-warning">Warning:</strong> This is an online calculator estimator, <strong>not the application</strong>. This page does not save any data, so if you leave or refresh the page you may need to enter the information again.</p>
<div class="wb-frmvld provisional wb-steps">
  <form action="#" method="get" id="steps-example" class="panel panel-default">
    <fieldset id="claim-period-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Claim period</span></legend>
      <div class="panel-body">
        <div class="form-group">
          <label for="claim-period" class="control-label required mrgn-tp-md"><span class="field-name">Select the period
            you are claiming for</span> <strong class="required">(required)</strong></label>
          <select required id="claim-period" class="form-control input-lg">
            <option value=""> Select a claim period</option>
            <optgroup label="CRHP, THRP - Wage or HHBRP - Wage">
              <!-- <option data-claim-period="28" value="2022-04-10--2022-05-07">Period 28: April 10 to May 7, 2022</option>
              <option data-claim-period="27" value="2022-03-13--2022-04-09">Period 27: March 13 to April 9, 2022</option>
              <option data-claim-period="26" value="2022-02-13--2022-03-12">Period 26: February 13 to March 12, 2022</option>
              <option data-claim-period="25" value="2022-01-16--2022-02-12">Period 25: January 16 to February 12, 2022</option>
              <option data-claim-period="24" value="2021-12-19--2022-01-15">Period 24: December 19 to January 15, 2022</option>
              <option data-claim-period="23" value="2021-11-21--2021-12-18">Period 23: November 21 to December 18, 2021</option> -->
              <option data-claim-period="22" value="2021-10-24--2021-11-20">Period 22: October 24 to November 20, 2021</option>
            </optgroup>
            <optgroup label="CEWS or CRHP">
              <option data-claim-period="21" value="2021-09-26--2021-10-23">Period 21: September 26 to October 23, 2021</option>
              <option data-claim-period="20" value="2021-08-29--2021-09-25">Period 20: August 29 to September 25, 2021</option>
              <option data-claim-period="19" value="2021-08-01--2021-08-22">Period 19: August 1 to August 28, 2021</option>
              <option data-claim-period="18" value="2021-07-04--2021-07-31">Period 18: July 4 to July 31, 2021</option>
              <option data-claim-period="17" value="2021-06-06--2021-07-03">Period 17: June 6 to July 3, 2021</option>
            </optgroup>
            <optgroup label="CEWS">
              <option data-claim-period="16" value="2021-05-09--2021-06-05">Period 16: May 9 to June 5, 2021</option>
              <option data-claim-period="15" value="2021-04-11--2021-05-08">Period 15: April 11 to May 8, 2021</option>
              <option data-claim-period="14" value="2021-03-14--2021-04-10">Period 14: March 14 to April 10, 2021</option>
              <option data-claim-period="13" value="2021-02-14--2021-03-13">Period 13: February 14 to March 13, 2021</option>
              <option data-claim-period="12" value="2021-01-17--2021-02-13">Period 12: January 17, to February 13, 2021</option>
              <option data-claim-period="11" value="2020-12-20--2021-01-16">Period 11: December 20, 2020, to January 16, 2021</option>
              <option data-claim-period="10" value="2020-11-22--2020-12-19">Period 10: November 22 to December 19, 2020</option>
              <option data-claim-period="9" value="2020-10-25--2020-11-21">Period 9: October 25 to November 21, 2020</option>
              <option data-claim-period="8" value="2020-09-27--2020-10-24">Period 8: September 27 to October 24, 2020</option>
              <option data-claim-period="7" value="2020-08-30--2020-09-26">Period 7: August 30 to September 26, 2020</option>
              <option data-claim-period="6" value="2020-08-02--2020-08-29">Period 6: August 2 to August 29, 2020</option>
              <option data-claim-period="5" value="2020-07-05--2020-08-01">Period 5: July 5 to August 1, 2020</option>
              <option data-claim-period="4" value="2020-06-07--2020-07-04">Period 4: June 7 to July 4, 2020</option>
              <option data-claim-period="3" value="2020-05-10--2020-06-06">Period 3: May 10 to June 6, 2020</option>
              <option data-claim-period="2" value="2020-04-12--2020-05-09">Period 2: April 12 to May 9, 2020</option>
              <option data-claim-period="1" value="2020-03-15--2020-04-11">Period 1: March 15 to April 11, 2020</option>
            </optgroup>
          </select>
        </div>
        <div class="provisional alert alert-danger hidden nolongeravailable-1-16">
          <p>This period is closed. <a href="/en/revenue-agency/services/subsidy/emergency-wage-subsidy/cews-after-apply.html#change-1" target="_blank">Read more about application deadlines<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></a>.</p>
          <p>The calculator for this period is available for information purposes only.</p>
        </div>
      </div>
    </fieldset>

    <fieldset id="12-month-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">12-month average revenue drop</span></legend>
      <div class="panel-body">

        <div class="row hidden p1-21">
          <div class="col-sm-12">
            <!-- <div class="alert alert-info"> -->
            <p class="mrgn-tp-lg">You do not need a 12-month average revenue drop for Periods 1 to 21.</p>
            <p>Continue to the next step to calculate the CEWS<span class="p17-plus hidden"> and CRHP</span>.</p>
          </div>
	        <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Step 1</span></a></p>
          </div>	 -->
        </div>

        <div class="row hidden p22-plus">
          <div class="col-sm-12 mrgn-tp-md">
            <div class="">
              <p>To apply for either the THRP or the HHBRP, you must calculate your 12-month average revenue drop. You only need to calculate this once. The same 12-month average revenue drop is used to qualify for the THRP and HHBRP in periods 22 to 28.</p>
              <!-- <fieldset class="provisional gc-chckbxrdio chckbxrdio-grp subfields">
                <legend class="small required" ><span class="field-name">Have you already calculated your 12-month average revenue drop?</span> <strong class="required">(required)</strong></legend>
                <ul class="list-unstyled lst-spcd-2">
                  <li class="radio">
                    <input type="radio" name="12-month-calculated" id="12-month-calculated-yes" class="valid" aria-invalid="false" required="required">
                    <label for="12-month-calculated-yes">Yes</label>
                  </li>
                  <li class="radio">
                    <input type="radio" name="12-month-calculated" id="12-month-calculated-no" class="valid" aria-invalid="false" required="required">
                    <label for="12-month-calculated-no">No</label>
                  </li>
                </ul>
              </fieldset>
               -->
              <!-- <div id="enter-12-month" class="hidden"> -->
                <h3>Calculate your 12-month average revenue drop</h3>
                <p>If you have not yet calculated the 12-month average revenue drop for period 22 or later, <strong>use the 12-month average revenue drop calculator</strong>.</p>
                <p><a target="_blank" href="../calculate-wage-hiring-subsidies/12-month-drop-calculator.html" class="btn btn-primary">Calculate your 12-month average revenue <span class="nowrap">drop<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></a></p>
                <p><strong>The 12-month average revenue drop is the same for all claim periods</strong>, so if you have already completed a calculation for period 22 or later, you can use the amount from your previous calculation.</p>

                <fieldset class="provisional gc-chckbxrdio chckbxrdio-grp subfields">
                  <!-- this location closed for over 1 week during the period due to a COVID-19 public health restriction? -->
                  <div id="12-month-decline-input">
                    <div class="form-group row">
                      <fieldset>
                        <label class="required col-sm-12 control-label" for="12-month-decline">What is your 12-month average revenue drop<span class="wb-inv"> (do not include a dollar sign, spaces or commas)</span> <strong class="required p3-ee-req">(required)</strong></label>
                        <!-- <p class="mrgn-lft-md"><a href="./12-month-drop-calculator.html" target="_Blank">Calculate your 12-month average revenue <span class="nowrap">drop<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></span></a>.</p> -->
                        <!-- <p><a class="wb-lbx" role="button" aria-controls="12-month-calculator" href="#12-month-calculator"><span class="fas fa-calculator"></span> Calculate your 12-month average revenue <span class="nowrap">decline<span class="mrgn-lft-sm far fa-question-circle"></span></span></a></p> -->
                        <div class="col-sm-4">
                          <div class="input-group">
                            <input type="number" class="form-control text-right currency required" name="12-month-decline" id="12-month-decline" max="100">
                            <span class="input-group-addon input-sm">%</span>
                          </div>
                        </div>
                      </fieldset>
                    </div>
                    <a class="btn btn-default">Update your 12-month average revenue drop</a>
                  </div>
                </fieldset>
              <!-- </div> -->
            </div>
            <div class="well text-muted mrgn-tp-md" id="12-month-summary">
              <h3 class="mrgn-tp-0">Summary of your 12-month average revenue drop</h3>
              <p>You have indicated your 12-month average revenue drop is <span class="h4 twelveMonthDecline">0.00%</span>.</p>
              <p>Your 12-month average revenue drop is one component of your eligibility for the THRP and HHBRP for periods 22 to 28. Continue to the next step to answer a few more questions related to THRP and HHBRP eligibility.</p>
            </div>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Step 1</span></a></p>
          </div> -->
        </div>
      </div>
    </fieldset>

    <fieldset id="thrp-hhbrp-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Tourism and hospitality eligibility</span></legend>
      <div class="panel-body">

        <div class="row hidden p1-21">
          <div class="col-sm-12">
            <!-- <div class="alert alert-info"> -->
            <p class="mrgn-tp-lg">THRP and HHBRP are not available before period 22.</p>
            <p>Continue to the next step to calculate the CEWS<span class="p17-plus hidden"> and CRHP</span>.</p>
          </div>
	        <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 2</span></a></p>
          </div>	 -->
        </div>

        <!-- 
        if u40 - ask PHR
          if yes - THRP
          if no - CRHP only
        else - ask Tourism or Hospitality
          if yes - THRP
          if no: ask PHR
            if yes - THRP
            if no - HHBRP

        -->

        <div class="row hidden p22-plus">
          <div class="col-sm-12 mrgn-tp-md">
            <div class="">
              <p>To qualify for the THRP or the HHBRP in periods 22 to 28, your revenue must have been deeply affected since the outset of the pandemic, or your business was subject to a qualifying public health restriction during the claim period.</p>
              <fieldset id="q1-tourism-hospitality" class="provisional gc-chckbxrdio chckbxrdio-grp ">
                <legend class="small required" ><span class="field-name">Are you a qualifying tourism or hospitality entity?</span> <strong class="required">(required)</strong></legend>
                <p><a href="../thrp/entities.html" target="_blank">What tourism, hospitality, arts, entertainment, and recreation activities are included in the definition of a qualifying tourism or hospitality <span class="nowrap">entity?<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></a>.</p>
                <ul class="list-unstyled lst-spcd-2">
                  <li class="radio">
                    <input type="radio" name="tourism-hospitality" id="tourism-hospitality-yes" class="valid" aria-invalid="false" required="required">
                    <label for="tourism-hospitality-yes">Yes</label>
                  </li>
                  <li class="radio">
                    <input type="radio" name="tourism-hospitality" id="tourism-hospitality-no" class="valid" aria-invalid="false" required="required">
                    <label for="tourism-hospitality-no">No</label>
                  </li>
                  <!-- <li class="radio">
                    <input type="radio" name="tourism-hospitality" id="tourism-hospitality-dunno" class="valid" aria-invalid="false" required="required">
                    <label for="tourism-hospitality-dunno">I don't know - answer a few questions to find out</label>
                  </li> -->
                </ul>

                <!-- <table class="wb-tables table-striped table-hover" data-wb-tables="{ &quot;paging&quot;: false, &quot;info&quot;: true  }">
                  <thead>
                    <tr>
                      <th>Tourism or hospitality category</th>
                      <th>Description</th>
                      <th class="hidden">Department</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Hotels</td>
                      <td>Establishments primarily engaged in providing short-term lodging in facilities known as hotels. These establishments provide suites or guest rooms within a multi-storey or high-rise structure, accessible from the interior only, and they generally offer guests a range of complementary services and amenities, such as food and beverage services, parking, laundry services, swimming pools and exercise rooms, and conference and convention facilities.</td>
                      <td class="hidden">
                        <ul>
                          <li>hotel management services (i.e., providing management and operating staff to run hotel)</li>
                          <li>hotels (except casino hotels) with integrated health spa facilities</li>
                        </ul>
                      </td>
                    </tr>
                    <tr>
                      <td>Food service contractors</td>
                      <td>Establishments primarily engaged in supplying food services under contract for a specific period of time.</td>
                      <td class="hidden">
                        <ul>
                          <li>cafeterias, industrial</li>
                          <li>food services under contract for airlines, railways, institutions</li>
                          <li>school cafeteria service</li>
                        </ul>
                      </td>
                    </tr>
                    <tr>
                      <td>Musical theatre and opera companies</td>
                      <td>Establishments primarily engaged in supplying food services under contract for a specific period of time.</td>
                      <td class="hidden">
                        <ul>
                          <li>cafeterias, industrial</li>
                          <li>food services under contract for airlines, railways, institutions</li>
                          <li>school cafeteria service</li>
                        </ul>
                      </td>
                    </tr>
                  </tbody>
                </table> -->
              </fieldset>

              <div id="q2-check-lockdown" class="hidden mrgn-tp-lg">
                <fieldset class="provisional gc-chckbxrdio chckbxrdio-grp subfields">
                  <legend class="small required" ><span class="field-name">Were you subject to a qualifying public health restriction during <span class="claim-period"></span>?</span> <strong class="required">(required)</strong></legend>
                  <!-- this location closed for over 1 week during the period due to a COVID-19 public health restriction? -->
                  <p><a class="wb-lbx" role="button" aria-controls="qualifying-restriction-definition" href="#qualifying-restriction-definition">What is a qualifying public health <span class="nowrap">restriction<span class="mrgn-lft-sm far fa-question-circle"></span></span></a></p>
                  <ul class="list-unstyled lst-spcd-2">
                    <li class="radio">
                      <input type="radio" name="qualifying-lockdown" id="qualifying-lockdown-yes" class="valid" aria-invalid="false" required="required">
                      <label for="qualifying-lockdown-yes">Yes</label>
                    </li>
                    <li class="radio">
                      <input type="radio" name="qualifying-lockdown" id="qualifying-lockdown-no" class="valid" aria-invalid="false" required="required">
                      <label for="qualifying-lockdown-no">No</label>
                    </li>
                  </ul>
                </fieldset>
              </div>
                <!-- <div id="q3-check-12-month" class="hidden">
                  <fieldset class="provisional gc-chckbxrdio chckbxrdio-grp subfields">
                    //this location closed for over 1 week during the period due to a COVID-19 public health restriction?
                    <div id="12-month-decline-input">
                      <div class="form-group row">
                        <fieldset>
                          <label class="required col-sm-12 control-label" for="12-month-decline">What is your 12-month average revenue drop<span class="wb-inv"> (do not include a dollar sign, spaces or commas)</span> <strong class="required p3-ee-req">(required)</strong></label>
                          <p class="mrgn-lft-md"><a href="./12-month-drop-calculator.html" target="_Blank">Calculate your 12-month average revenue <span class="nowrap">drop<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></span></a>.</p>
                            //<a class="wb-lbx" role="button" aria-controls="12-month-calculator" href="#12-month-calculator"><span class="fas fa-calculator"></span> Calculate your 12-month average revenue <span class="nowrap">decline<span class="mrgn-lft-sm far fa-question-circle"></span></span></a></p>
                          <div class="col-sm-4">
                            <div class="input-group">
                              <input type="number" class="form-control text-right currency required" name="12-month-decline" id="12-month-decline" max="100">
                              <span class="input-group-addon input-sm">%</span>
                            </div>
                          </div>
                        </fieldset>
                      </div>
                      <a class="btn btn-default">Check if your 12-month average revenue drop qualifies</a>
                    </div>
                  </fieldset>
                </div> 
              </div> -->
              <div class="well text-muted mrgn-tp-md" id="thrp-hhbrp-eligibility-summary">
                <h3 class="mrgn-tp-0">Summary of THRP and HHBRP eligibility</h3>
                <p class="eligible-thrp-lockdown hidden">Because <strong>you were subject to a qualifying public health restriction</strong>, you may qualify for the THRP.</p>
                <p class="eligible-thrp-12-month hidden">Because you are a <strong>qualifying tourism or hospitality entity</strong> and have a 12-month average revenue drop of 40% or greater, you may qualify for the THRP.</p>
                <p class="eligible-hhbrp-12-month hidden">Because you have a 12-month average revenue drop of 50% or greater, you may qualify for the HHBRP.</p>
                <p class="ineligible-thrp-hhbrp hidden">You do not qualify for the THRP or the HHBRP because your 12-month average revenue drop is too low and you were not subject to a qualifying public health restriction.</p>
                <p class="ineligible-thrp-hhbrp hidden">Continue to the next step to determine if you qualify for the CRHP.</p>
                <p class="thrp-not-enough-data">Answer the questions above to determine if you qualify for the THRP or HHBRP.</p>
              </div>
            </div>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 and 2</span></a></p>
          </div> -->
        </div>
      </div>
    </fieldset>

    <fieldset id="questionaire" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">CRHP eligibility and employee remuneration for the base period</span></legend>
      <div class="panel-body">
        <div class="row hidden" id="no-crhp-message">
          <div class="col-sm-12">
            <!-- <div class="alert alert-info"> -->
            <p class="mrgn-tp-lg">The CRHP is only available starting in claim period 17.</p>
            <div class="not-el-hhbrp-crhp hidden">
              <p>Based on previous questions, you are not eligible for the THRP, HHBRP or the CRHP.</p>
            </div>
            <div class="el-hhbrp-crhp hidden">
              <p>Continue to the next step to calculate the <span class="elWageP">THRP</span>.</p>
            </div>
          </div>
	        <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 3</span></a></p>
          </div>	 -->
        </div>
        <div class="row" id="crhp-questions">
          <div class="col-sm-12">
            <fieldset class="provisional gc-chckbxrdio chckbxrdio-grpsubfields">
              <legend class="small required"><span class="field-name">Are you eligible for the Canada Recovery Hiring Program (CRHP)?</span> <strong class="required">(required)</strong></legend>
              <details>
                <summary>Eligibility requirements for the CRHP</summary>
                <p>To be eligible for CRHP, you must meet all the eligibility criteria for CEWS. However, you are not eligible for CRHP if you are a corporation, unless you are a Canadian-Controlled Private Corporation (CCPC) or a corporate co-operative that is eligible for the <a href="https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/t4012/t2-corporation-income-tax-guide-chapter-4-page-4-t2-return.html#P2862_208254" target="_Blank">small business deduction<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></a>.</p>
                <p>For more details, see <a href="../hiring-program/crhp-who-apply.html" target="_Blank">Who can apply for CRHP<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></a>.</p>
              </details>
              <ul class="list-unstyled lst-spcd-2">
                <li class="radio">
                  <input type="radio" name="crhp-eligibility" value="Yes" id="elig-type-yes" class="valid" aria-invalid="false" required="required">
                  <label for="elig-type-yes">Yes</label>
                </li>
                <li class="radio">
                  <input type="radio" name="crhp-eligibility" value="No" id="elig-type-no" class="valid" aria-invalid="false" required="required">
                  <label for="elig-type-no">No</label>
                </li>
              </ul>
            </fieldset>
            
            <div class="hidden" id="crhp-base-q1">
              <h3>Calculate your CRHP base period remuneration</h3>
              <p>If you have not yet calculated the CRHP base period remuneration for period 17 or later, <strong>use the CRHP base period remuneration calculator</strong> to calculate your amounts.</p>
              <p><a target="_blank" href="how-much-crhp-base.html" class="btn btn-primary">CRHP base period <span class="nowrap">remuneration<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></a></p>
		          <p><strong>If you have completed a calculation for period 17 or later,</strong> the base period for CRHP remuneration is the same for all claim periods, so you can use the same CRHP base remuneration amount saved in your base period records for a previous CRHP calculation.</p>

              <h3>Enter your CRHP base period remuneration (March 14 to April 10, 2021)</h3>
                <!-- <ul class="list-unstyled mrgn-lft-lg"> -->
                  <!-- <p class="mrgn-tp-sm"><a href="#lwp" aria-controls="lwp" class="wb-lbx" role="button">Active employees and employees on leave with pay&nbsp;<span class="far fa-question-circle"></span></a></p> -->
                <!-- </ul> -->
              <div class="" id="crhp-base-input">
                <div class="form-group row">
                  <fieldset>
                    <label class="required col-sm-12 control-label" for="crhp-base-active-emps">Active eligible employees for the base period<span class="wb-inv"> (do not include a dollar sign, spaces or commas)</span> <strong class="required p3-ee-req">(required)</strong></label>
                    <div class="col-sm-3">
                      <div class="input-group"> 
                        <input type="number" class="form-control text-right required" name="crhp-base-active-emps" id="crhp-base-active-emps">
                      </div>
                    </div>
                    <div class="col-sm-9">
                      <p class="small">This is the same as line A of your period 14 CEWS application.</p>
                    </div>
                    <label class="required col-sm-12 control-label" for="crhp-base-rem">CRHP base period remuneration (March 14 to April 10, 2021)<span class="wb-inv"> (do not include a dollar sign, spaces or commas)</span> <strong class="required p3-ee-req">(required)</strong></label>
                    <div class="col-sm-12">
                      <p><a class="wb-lbx" role="button" aria-controls="crhp-rem-definition" href="#crhp-rem-definition">What is CRHP base period remuneration <span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                    </div>
                    <div class="col-sm-3">
                      <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                        <input type="number" class="form-control text-right currency required" name="crhp-base-rem" id="crhp-base-rem" >
                      </div>
                    </div>
                  </fieldset>
                </div>
                <a class="btn btn-default">Update your base remuneration</a>
              </div>
            </div>

            <div class="well text-muted mrgn-tp-md hidden" id="crhp-eligibility-summary">
              <h3 class="mrgn-tp-0">Summary of CRHP base remuneration</h3>
              <div id="crhp-base-summary">
                <p>You had <strong><span class="total-active-emps-14">0</span></strong> active eligible employees (employees not on leave with pay) during the base period for CRHP (March 14 to April 10).</p>
                <p>Your <strong>CRHP base remuneration</strong> (March 14 to April 10, 2021) is <span class="crhp-base-rem h4">$0</span></p>
              </div>
              <div class="not-el-hhbrp-crhp hidden">
                <p>Based on previous questions, you are not eligible for the THRP, HHBRP or the CRHP.</p>
              </div>
              <div class="el-hhbrp-crhp hidden">
                <p class="hidden" id="crhp-ineligible">Continue to the next step to calculate the <span class="elWageP">CEWS</span> only.</p>
                <div class="provisional alert alert-danger hidden" id="crhp-base-over-max">
                  <h4>CRHP base period remuneration is too high</h4>
                  <p>The remuneration is too high for the number of employees entered.</p>
                  <p>To calculate your CRHP base period remuneration, use the <a target="_blank" href="how-much-crhp-base.html">CRHP base period remuneration <span class="nowrap">calculator <span class="far fa-window-restore mrgn-lft-sm"></span></span></a>.</p>
                </div>
              </div>
            </div>

          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 3</span></a></p>
          </div> -->
        </div>
      </div>
    </fieldset>

    <fieldset id="rev-drop-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Revenue drop and subsidy rate</span></legend>
      <div class="panel-body">

        <div class="row hidden" id="ineligbleForAnything">
          <div class="col-sm-12">
            <!-- <div class="alert alert-info"> -->
            <p class="mrgn-tp-lg">You are not eligible for a subsidy.</p>
            <p>Based on your previous answers, you are not eligible for a wage subsidy in <span class="claim-period"></span>.</p>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 4</span></a></p>
          </div>	 -->
        </div>
      
        <div class="row" id="revDropQuestions">
          <div class="col-sm-12 mrgn-tp-md p14">
            <div class="provisional alert alert-info">
              <p class="h3">To qualify you must have a revenue drop of 15% for period 1 and 30% for periods 2 to 4</p>
              <p data-ajax-replace="cews-how-revenue-drop-subsidy-rate-calculated.html #ajax-1-4"></p>
            </div>
          </div>
          <div class="col-sm-12 mrgn-tp-md p59">
            <div class="cal-calc">
              <fieldset class="provisional gc-chckbxrdio chckbxrdio-grp subfields">
                <legend class="small required" ><span class="field-name">Which pre-crisis revenue comparison option do you use for your CEWS, CERS, CRHP, THRP or HHBRP claims?</span> <strong class="required">(required)</strong></legend>
                <!-- this location closed for over 1 week during the period due to a COVID-19 public health restriction? -->
                <p><a class="wb-lbx" role="button" aria-controls="baseline-optns" href="#baseline-optns">If you haven't claimed before, choose a pre-crisis revenue comparison <span class="nowrap">option<span class="mrgn-lft-sm far fa-question-circle"></span></span></a></p>
                <ul class="list-unstyled lst-spcd-2">
                  <li class="radio">
                    <input type="radio" name="rev-comp" id="rev-comp-yes" class="valid" aria-invalid="false" required="required">
                    <label for="rev-comp-yes">Compare claim month to same month in a prior year (e.g. June 2021 with June 2019)</label>
                  </li>
                  <li class="radio">
                    <input type="radio" name="rev-comp" id="rev-comp-no" class="valid" aria-invalid="false" required="required">
                    <label for="rev-comp-no">Compare claim month to average of January and February 2020 (alternative prior reference period) </label>
                  </li>
                </ul>
              </fieldset>
              <div class="alt-bl-no hidden" id="alt-bl-no">
                <fieldset>
                  <legend class="mrgn-bttm-0">Enter your eligible revenue for the following months</legend>
                  <p><a class="wb-lbx" role="button" aria-controls="eligible-rev" href="#eligible-rev">Eligible revenue<span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                  <p class="small text-muted mrgn-tp-lg" aria-hidden="true">Do not include <strong>spaces,
                    commas,</strong> or a <strong>dollar sign</strong></p>
                  <div class="row">
                    <div class="col-md-6 brdr-rght">
                      <p><strong>Pre-crisis revenue</strong></p>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-03-no">March 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-03-no" id="2019-03-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-04-no">April 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"  name="2019-04-no" id="2019-04-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-05-no">May 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-05-no" id="2019-05-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-06-no">June 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-06-no" id="2019-06-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-07-no">July 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-07-no" id="2019-07-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-08-no">August 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-08-no" id="2019-08-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-09-no">September 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-09-no" id="2019-09-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-10-no">October 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-10-no" id="2019-10-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-11-no">November 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-11-no" id="2019-11-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-12-no">December 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-12-no" id="2019-12-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-01-no">January 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2020-01-no" id="2020-01-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-02-no">February 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-02-no" id="2020-02-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-03-2-no">March 2019 (pre-crisis)<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-03-2-no" id="2019-03-2-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <p><strong>Current revenue</strong></p>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-04-no">April 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-04-no" id="2020-04-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-05-no">May 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-05-no" id="2020-05-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-06-no">June 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-06-no" id="2020-06-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-07-no">July 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-07-no" id="2020-07-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-08-no">August 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-08-no" id="2020-08-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-09-no">September 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-09-no" id="2020-09-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-10-no">October 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-10-no" id="2020-10-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-11-no">November 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-11-no" id="2020-11-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-12-no">December 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-12-no" id="2020-12-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-01-no">January 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-01-no" id="2021-01-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-02-no">February 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-02-no" id="2021-02-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-03-no">March 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-03-no" id="2021-03-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-04-no">April 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-04-no" id="2021-04-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-05-no">May 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-05-no" id="2021-05-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-06-no">June 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-06-no" id="2021-06-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-07-no">July 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-07-no" id="2021-07-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-08-no">August 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-08-no" id="2021-08-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-09-no">September 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-09-no" id="2021-09-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-10-no">October 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-10-no" id="2021-10-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-11-no">November 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"  name="2021-11-no" id="2021-11-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-12-no">December 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2021-12-no" id="2021-12-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-01-no">January 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"  name="2022-01-no" id="2022-01-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-02-no">February 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"  name="2022-02-no" id="2022-02-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-03-no">March 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2022-03-no" id="2022-03-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-04-no">April 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2022-04-no" id="2022-04-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-05-no">May 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2022-05-no" id="2022-05-no" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </fieldset>
                <a class="btn btn-default">Update your revenue drop summary</a>
                <div class="well text-muted mrgn-tp-md">
                  <h3 class="mrgn-tp-0">Summary of step 5: Revenue drop and subsidy rates</h3>
                  <div class="not-el-hhbrp-crhp hidden">
                    <p>Based on previous questions, you are not eligible for the THRP, HHBRP or the CRHP.</p>
                  </div>
                  <div class="el-hhbrp-crhp hidden">
                    <ul class="small">
                      <li>Your <strong>current period revenue drop</strong> is <span class="currentRevReduction h4">0%</span></li>
                      <li class="brdr-bttm">Your <strong>previous period revenue drop</strong> is <span class="priorRevReduction h4">0%</span></li>
                    </ul>
                    <div class="safe-harbour-hide small">
                      <p class="greater-than-10-drop mrgn-lft-lg hidden">Because the higher of these revenue drops is <span class="h4 mrgn-tp-0 rev-reduc-base">0%</span>, <span class="p22-plus">your revenue drop qualifies for <span class="crhp-eligible"> the CRHP <span class="thrp-hhbrp-revd-ineligible">but not the <span class="elWageP">THRP</span></span><span class="thrp-hhbrp-revd-eligible">and </span></span><span class="thrp-hhbrp-revd-eligible"> the <span class="elWageP">THRP</span></span><span class="crhp-ineligible-tag hidden"><span class="thrp-hhbrp-revd-ineligible">none of the available subsidies this period</span></span></span><span class="p1-21">your base rate is <span class="h4 mrgn-tp-0 base-rate">0%</span> <span class="rate-formula-max rate-formula-u70 hidden">(the maximum)</span><span class="rate-formula-u50 rate-formula-0">(<span class="p18-plus">(</span>your revenue drop <span class="p18-plus">- 10%) </span>x <span class="scaleBase"></span>)</span> <span class="p11-plus hidden"> and your top up rate is <span class="top-up-rate h4">0%</span> (<span class="rate-formula-max hidden">the maximum</span><span class="rate-formula-u70 rate-formula-u50 rate-formula-0">(your revenue drop - 50%) x <span class="scaleTopUp"></span></span>)</span></span>.</p>
                      <p class="less-than-10-drop mrgn-lft-lg">Because your revenue drop is less than 10%, <span class="p22-plus">you do not qualify for any subsidy this claim period</span><span class="p1-21">your base rate is <span class="h4 mrgn-tp-0">0%</span> and your top-up rate is <span class="h4">0%</span></span>.</p>
                    </div>
                    <div class="p1-21 hidden">
                      <ul class="p8-plus hidden">
                        <li>Your <strong>higher base revenue drop</strong> is <span class="rev-reduc-base h4">0%</span></li>
                        <li class="brdr-bttm">Your <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up h4">0%</span></li>
                      </ul>
                      <div class="p8-plus hidden">
                        <p>Because the higher of these revenue drops is <span class="h4 rev-drop-top-up-higher">0%</span>, your top-up rate is calculated as (your top-up revenue drop - 50%) x <span class="scaleTopUp">0</span>), <span class="h4 mrgn-tp-0 top-up-rate">0%</span></p>
                      </div>
                      <div class="p7-and-before hidden">
                        <p class="mrgn-bttm-md"><span class="safe-harbour-hide">Because your</span><span class="safe-harbour-show hidden">Your</span> <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up h4">0%</span><span class="safe-harbour-hide">, your top-up rate is calculated as (your top-up revenue drop - 50%) x <span class="scaleTopUp"></span>, <span class="h4 mrgn-tp-0 top-up-rate">0%</span></span>.</p>
                      </div>
                      <hr class="brdr-bttm">
                    </div>
                    <div class="eligible-wage-subsidy">
                      <p>Your <strong>overall <span class="elWageP">CEWS</span> rate</strong> <span class="p22-26 hidden small"><span class="thrp-specific hidden">(same as your revenue drop to a maximum of 75%)</span><span class="hhbrp-specific hidden">(10% + (revenue drop - 50%) x 1.6 to a maximum of 50%)</span></span><span class="p27-28 hidden small"><span class="thrp-specific hidden">(revenue drop ÷ 2 to a maximum of 37.5%)</span><span class="hhbrp-specific hidden">(5% + (revenue drop - 50%) x 0.8 to a maximum of 25%)</span></span><span class="p1-21"><span class="safe-harbour-hide small">(<span class="base-rate">0%</span> base rate + <span class="top-up-rate">0%</span> top-up
                        rate)</span></span> for claim period <span class="claim-period-no">(choose a claim
                        period)</span> is <span class="cews-rate h3 mrgn-tp-0 badge mrgn-bttm-0" style="font-size:24px;" >0%</span> </p>
                    </div>
                    <p class="safe-harbour-show hidden mrgn-lft-md small">You qualify for the “safe harbour”
                      rate of 75% because your revenue drop in the current or previous period was at least 30%. </p>
                    <div class="p18-plus">
                      <div class="p18-21 hidden">
                        <div class="more-than-zero-revdrop">
                          <p class="mrgn-bttm-md less-than-10-drop">Because your revenue drop is 10% or less, <strong>you do not qualify</strong> for the CRHP, but your employees on leave with pay may still qualify for the CEWS.</p>
                        </div>
                        <p class="mrgn-bttm-md rate-formula-0">Because you do not have a revenue drop, you do not qualify for either the CRHP or the CEWS.</p>
                      </div>
                      <!-- <div class="p20-21 hidden">
                        <p class="mrgn-bttm-md less-than-10-drop">Because your revenue drop is 10% or less, <strong>you do not qualify</strong> for either the CRHP or the CEWS.</p>
                      </div> -->
                      <div class="crhp-eligible">
                        <p class="mrgn-bttm-md greater-than-10-drop hidden">Because your revenue drop is larger than 10%, your revenue drop <strong>qualifies for the CRHP</strong>.</p>
                      </div>
                    </div>
                    <div class="p17-only hidden">
                      <p class="mrgn-bttm-md 10drop hidden">Because your revenue drop is just above 0%, you qualify for the CRHP even if you have a 0% CEWS rate.</p>
                      <p class="mrgn-bttm-md rate-formula-0">Because you do not have a revenue drop, you do not qualify for either the CRHP or the CEWS.</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="alt-bl-yes hidden" id="alt-bl-yes">
                <fieldset class="subfields">
                  <legend class="mrgn-bttm-0">Enter your eligible revenue for the following months</legend>
                  <p><a class="wb-lbx" role="button" aria-controls="eligible-rev" href="#eligible-rev">Eligible revenue<span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                  <p class="small text-muted  mrgn-tp-lg" aria-hidden="true">Do not include <strong>spaces,
                    commas,</strong> or a <strong>dollar sign</strong></p>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-01-yes">January 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-01-yes" id="2020-01-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-02-yes">February 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-02-yes" id="2020-02-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-04-yes">April 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-04-yes" id="2020-04-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-05-yes">May 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-05-yes" id="2020-05-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-06-yes">June 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-06-yes" id="2020-06-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-07-yes">July 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-07-yes" id="2020-07-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-08-yes">August 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-08-yes" id="2020-08-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-09-yes">September 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-09-yes" id="2020-09-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-10-yes">October 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-10-yes" id="2020-10-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-11-yes">November 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-11-yes" id="2020-11-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-12-yes">December 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2020-12-yes" id="2020-12-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-01-yes">January 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-01-yes" id="2021-01-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-02-yes">February 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-02-yes" id="2021-02-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-03-yes">March 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-03-yes" id="2021-03-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-04-yes">April 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-04-yes" id="2021-04-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-05-yes">May 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-05-yes" id="2021-05-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-06-yes">June 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-06-yes" id="2021-06-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-07-yes">July 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-07-yes" id="2021-07-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-08-yes">August 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-08-yes" id="2021-08-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-09-yes">September 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-09-yes" id="2021-09-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-10-yes">October 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-10-yes" id="2021-10-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-11-yes">November 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-11-yes" id="2021-11-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>

                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-12-yes">December 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2021-12-yes" id="2021-12-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-01-yes">January 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2022-01-yes" id="2022-01-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-02-yes">February 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2022-02-yes" id="2022-02-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-03-yes">March 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2022-03-yes" id="2022-03-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-04-yes">April 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2022-04-yes" id="2022-04-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2022-05-yes">May 2022<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency" name="2022-05-yes" id="2022-05-yes" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Section to add days not operating during Jan-Feb -->
                    <div class="row">
                      <div class="form-group mrgn-lft-md">
                        <div class="col-md-12">
                          <div class="checkbox provisional gc-chckbxrdio mrgn-lft-xl">
                            <input id="jan-feb-closed" type="checkbox" checked="checked"/>
                            <label for="jan-feb-closed">You were in operation for all 60 days of January and February 2020 (not seasonally affected or beginning operations during that period)</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div id="jan-feb-closed-inputs" class="mrgn-bttm-sm pull-right hidden">
                      <div class="form-group row mrgn-tp-sm mrgn-bttm-0 mrgn-rght-sm mrgn-lft-sm">
                        <div class="col-md-12">
                          <label for="jan-feb-closed-days" class="required">Days you were not in operation during Jan-Feb 2020 <span class="wb-inv"> (do not include
                            spaces or commas)</span><strong class="required">(required)</strong></label>
                        </div>
                        <div class="col-xs-6">
                          <input type="number" class="form-control text-right" id="jan-feb-closed-days" max="59" min="0">
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr>
                </fieldset>
                <a class="btn btn-default">Update your revenue drop summary</a>
                <div class="well text-muted mrgn-tp-md">
                  <h3 class="mrgn-tp-0">Summary of step 2: Revenue drop and subsidy rates</h3>
                  <div class="not-el-hhbrp-crhp hidden">
                    <p>Based on previous questions, you are not eligible for the THRP, HHBRP or the CRHP.</p>
                  </div>
                  <div class="el-hhbrp-crhp hidden">
                    <ul class="small">
                      <li>Your <strong>current period revenue drop</strong> is <span class="currentRevReduction-alt h4">0%</span></li>
                      <li class="brdr-bttm">Your <strong>previous period revenue drop</strong> is <span class="priorRevReduction-alt h4">0%</span></li>
                    </ul>
                    <div class="safe-harbour-hide small">
                      <p class="greater-than-10-drop hidden mrgn-lft-lg">Because the higher of these revenue drops is <span class="h4 rev-reduc-alt-base">0%</span>, <span class="p22-plus">your revenue drop qualifies for <span class="crhp-eligible"> the CRHP <span class="thrp-hhbrp-revd-ineligible">but not the <span class="elWageP">THRP</span></span><span class="thrp-hhbrp-revd-eligible">and </span></span><span class="thrp-hhbrp-revd-eligible"> the <span class="elWageP">THRP</span></span><span class="crhp-ineligible-tag hidden"><span class="thrp-hhbrp-revd-ineligible">none of the available subsidies this period</span></span></span><span class="p1-21">your base rate is <span class="h4 mrgn-tp-0  base-rate-alt">0%</span> <span class="rate-formula-max rate-formula-u70 hidden">(the maximum)</span><span class="rate-formula-u50 rate-formula-0">(<span class="p18-plus">(</span>your revenue drop <span class="p18-plus">- 10%) </span>x <span class="scaleBase"></span>)</span> <span class="p11-plus hidden"> and your top up rate is  <span class="top-up-rate-alt h4" >0%</span> (<span class="rate-formula-max hidden">the maximum</span><span class="rate-formula-u70 rate-formula-u50 rate-formula-0">(your revenue drop - 50%) x <span class="scaleTopUp"></span></span>)</span></span>.</p>
                      <p class="less-than-10-drop mrgn-lft-lg">Because your revenue drop is less than 10%, <span class="p22-plus">you do not qualify for any subsidy this claim period</span><span class="p1-21">your base rate is <span class="h4 mrgn-tp-0">0%</span> and your top-up rate is <span class="h4">0%</span></span>.</p>
                    </div>
                    <div class="p1-21 hidden">
                      <ul class="p8-plus hidden">
                        <li>Your <strong>higher base revenue drop</strong> is <span class="rev-reduc-alt-base h4">0%</span></li>
                        <li class="brdr-bttm">Your <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up-alt h4" >0%</span></li>
                      </ul>
                      <div class="p8-plus hidden">
                        <p>Because the higher of these revenue drops is <span class="h4 rev-drop-top-up-higher-alt">0%</span>, your top-up rate is calculated as (your top-up revenue drop - 50%) x <span class="scaleTopUp">0</span>), <span class="h4 mrgn-tp-0 top-up-rate-alt">0%</span></p>
                      </div>
                      <div class="p7-and-before">
                        <p class="mrgn-bttm-md"><span class="safe-harbour-hide">Because your</span><span class="safe-harbour-show hidden">Your</span> <strong>average revenue drop for the
                          previous three months</strong> is <span class="rev-drop-top-up-alt h4">0% 
                          <!--average of 3 months 2019 divided by 3 months in 2020--></span><span class="safe-harbour-hide">, your top-up rate is calculated as (your top-up revenue drop - 50%) x <span class="scaleTopUp"></span>, <span class="h4 mrgn-tp-0 top-up-rate-alt">0%</span></span></p>
                      </div>
                    </div>
                    <hr class="brdr-bttm">
                    <div class="eligible-wage-subsidy">
                      <p>Your <strong>overall <span class="elWageP">CEWS</span> rate</strong> <span class="p22-26 hidden small"><span class="thrp-specific hidden">(same as your revenue drop to a maximum of 75%)</span><span class="hhbrp-specific hidden">(10% + (revenue drop - 50%) x 1.6 to a maximum of 50%)</span></span><span class="p27-28 hidden small"><span class="thrp-specific hidden">(revenue drop ÷ 2 to a maximum of 37.5%)</span><span class="hhbrp-specific hidden">(5% + (revenue drop - 50%) x 0.8 to a maximum of 25%)</span></span><span class="p1-21"><span class="safe-harbour-hide small">(<span class="base-rate-alt">0%</span> base rate + <span class="top-up-rate-alt">0%</span> top-up rate)</span> for claim period <span class="claim-period-no">(choose a claim period)</span></span> is <span class="cews-rate-alt h3 mrgn-tp-0 badge mrgn-bttm-0" style="font-size:24px;">0%</span>.</p>
                    </div>
                    <p class="safe-harbour-show hidden mrgn-lft-md small">You qualify for the “safe harbour”
                      rate of 75% because your revenue drop in the current or previous period was at least 30%. </p>
                    <div class="p18-plus">
                      <!-- <p class="mrgn-bttm-md greater-than-10-drop hidden">Because your revenue drop is larger than 10%, your revenue drop <strong>qualifies for the CRHP</strong></p> -->
                      <div class="p18-21 hidden">
                        <div class="more-than-zero-revdrop">
                          <p class="mrgn-bttm-md less-than-10-drop">Because your revenue drop is 10% or less, <strong>you do not qualify</strong> for the CRHP, but your employees on leave with pay may still qualify for the CEWS.</p>
                        </div>
                        <p class="mrgn-bttm-md rate-formula-0">Because you do not have a revenue drop, you do not qualify for either the CRHP or the CEWS.</p>
                      </div>
                      <!-- <div class="p20-21 hidden">
                        <p class="mrgn-bttm-md less-than-10-drop">Because your revenue drop is 10% or less, <strong>you do not qualify</strong> for either the CRHP or the CEWS.</p>
                      </div> -->


                      <div class="crhp-eligible">
                        <p class="mrgn-bttm-md greater-than-10-drop hidden">Because your revenue drop is larger than 10%, your revenue drop <strong>qualifies for the CRHP</strong>.</p>
                      </div>
                    </div>
                    <div class="p17-only hidden">
                      <p class="mrgn-bttm-md 10drop hidden">Because your revenue drop is just above 0%, you qualify for the CRHP even if you have a 0% CEWS rate.</p>
                      <p class="mrgn-bttm-md rate-formula-0">Because you do not have a revenue drop, you do not qualify for either the CRHP or the CEWS.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 4</span></a></p>
          </div> -->
        </div>
      </div>
    </fieldset>
    <fieldset id="employees-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Employee pay</span></legend>
      <div class="panel-body">
        <div class="row">
          <div class="col-sm-12  mrgn-tp-md">
            <div id="cews-cal-opt2">
              <fieldset id="employees" class="subfields">
                <legend>Calculate your employee wages</legend>
                <p>Include all your eligible employees.</p>
                <fieldset class="subfields" id="emp-1">
                  <legend class="col-xs-7 col-sm-9 mrgn-tp-md"><span class="fas fa-user"></span> Eligible employee <span class="employeeNumber">1</span></legend>
                  <button type="button" class="col-xs-4 col-sm-2 btn btn-xs btn-danger pull-right rm-emp hidden mrgn-rght-md mrgn-tp-md" >Remove</button>
                  <div class="clearfix"></div>
                  <div class="panel-body">
                    <div class="form-group">
                      <label for="ee-name-1">Employee name or alias<span class="wb-inv"> (use a first name or nickname)</span></label>
                      <input type="text" class="form-control input-lg text-right" id="ee-name-1">
                      <p class="small text-muted" aria-hidden="true">Use a first name or nickname</p>
                    </div>
                    <div class="form-group">
                      <label for="arms-1">Is employee at arm's length?</label>
                      <p><a class="wb-lbx arms-length-def" role="button" aria-controls="armslength" href="#armslength">Definition of arm's length<span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                      <select class="arms-length-select form-control" id="arms-1" data-updates="emp-arms-1">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                      </select>
                    </div>
                    <hr>
                    <div class="form-group">
                      <label for="baseline-1">Weekly average pre-crisis (baseline) pay<span class="wb-inv"> (do not include a
                        dollar sign, spaces or commas)</span></label>
                      <p><a class="wb-lbx baseline-rem-def" role="button" aria-controls="baseline-rem" href="#baseline-rem">Choose how to determine pre-crisis <span class="nowrap">pay<span class="far fa-question-circle mrgn-lft-sm"></span></span></a></p>
                      <div class="row">
                        <div class="col-md-5 col-xs-9"> 
                          <div class="input-group">
                            <span class="input-group-addon">$</span>
                            <input type="number" class="form-control input-lg text-right currency" id="baseline-1" data-updates="emp-base-1" placeholder="0.00">
                          </div>
                        </div>
                        <div class="col-md-7 col-xs-3">
                          <span class="small">per week</span>
                        </div>
                      </div>
                      <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces,
                        commas,</strong> or a <strong>dollar sign</strong></p>
                    </div>
                    <fieldset class="subfields">
                      <legend class="mrgn-bttm-0">Eligible remuneration (pay) in respect of the claim period <span class="claim-period"></span> </legend>
                      <p><a class="wb-lbx pay-claim-def" role="button" aria-controls="pay-claim" href="#pay-claim">Claim period pay per week<span class="emp-lv hidden"> and active
                        employees or employees on leave with pay</span>&nbsp;<span class="far fa-question-circle"></span></a></p>
                      <!-- <div class="provisional alert alert-info p22-plus">
                        <h3 class="h4">Do not include leave with pay</h3>
                        <p class="small">Remuneration to employees on leave with pay is not included in calculations for CRHP, THRP or HHBRP.</p>
                      </div> -->
                      <div class="form-group row mrgn-tp-lg mrgn-bttm-0">
                        <div class="col-md-3">
                          <label for="wkone-1">Week one<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wkone-1" placeholder="0.00" data-updates="w1-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wkone-cb-1" class="emp-lv">
                              <input id="wkone-cb-1" type="checkbox" value="">
                              Leave
                              with pay<span class="wb-inv"> in week one</span></label>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label for="wktwo-1">Week two<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wktwo-1" placeholder="0.00" data-updates="w2-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wktwo-cb-1" class="emp-lv">
                              <input id="wktwo-cb-1" type="checkbox" value="">
                              Leave
                              with pay<span class="wb-inv"> in week two</span></label>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label for="wkthree-1">Week three<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wkthree-1" placeholder="0.00" data-updates="w3-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wkthree-cb-1" class="emp-lv">
                              <input id="wkthree-cb-1" type="checkbox" value="">
                              Leave with pay<span class="wb-inv"> in week three</span></label>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label for="wkfour-1">Week four<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wkfour-1" placeholder="0.00" data-updates="w4-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wkfour-cb-1" class="emp-lv">
                              <input id="wkfour-cb-1" type="checkbox" value="">
                              Leave
                              with pay<span class="wb-inv"> in week four</span></label>
                          </div>
                        </div>
                      </div>
                      <p class="small text-muted mrgn-bttm-0" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
                    </fieldset>
                  </div>
                  <footer class="panel-footer">
                    <details open>
                      <summary>Calculation summary for <span class="ee-name-1">employee <span class="employeeNumber">1</span></span> </summary>
                      <div class="eligible-wage-subsidy">
                        <table class="table table-condensed small text-muted" id="emp-smry-1">
                          <caption class="wb-inv">
                          Calculation summary for employee <span class="employeeNumber">1</span>
                          </caption>
                          <thead>
                            <tr>
                              <th scope="col">Week</th>
                              <th scope="col">Calculated amount</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr>
                              <td>Week one (<span class="elWageP">CEWS</span>)</td>
                              <td data-updates="amt-ttl-1" id="w1-amt-1">$0</td>
                            </tr>
                            <tr>
                              <td>Week two (<span class="elWageP">CEWS</span>)</td>
                              <td data-updates="amt-ttl-1" id="w2-amt-1">$0</td>
                            </tr>
                            <tr>
                              <td>Week three (<span class="elWageP">CEWS</span>)</td>
                              <td data-updates="amt-ttl-1" id="w3-amt-1">$0</td>
                            </tr>
                            <tr>
                              <td>Week four (<span class="elWageP">CEWS</span>)</td>
                              <td data-updates="amt-ttl-1" id="w4-amt-1">$0</td>
                            </tr>
                          </tbody>
                          <tfoot>
                            <tr>
                              <td>4-week total (<span class="elWageP">CEWS</span>)</td>
                              <td id="amt-ttl-1" data-updated-by="emp-wkly-wage-1">$0</td>
                            </tr>
                          </tfoot>
                        </table>
                      </div>
                      <table id="emp-no-elgbl-1" class="table table-condensed small text-muted hidden">
                        <thead>
                          <tr>
                            <th scope="col">Week</th>
                            <th scope="col">Calculated amount</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td colspan="2">This employee is not eligible for this claim period</td>
                          </tr>
                        </tbody>
                      </table>
                      <p class="text-muted crhp-eligible">Eligible remuneration for the CRHP: <span id="amt-crhp-rem-1">$0</span></p>
                      <p class="small tex-muted crhp-eligible">Note: The CRHP amount you could receive is only calculated on the total remuneration of all employees at the end of the calculator in step 6.</p>
                    </details>
                  </footer>
                </fieldset>
                <p class="mrgn-bttm-xl mrgn-tp-lg">
                  <button type="button" class="btn btn-default" id="addemp"><span class="fas fa-plus-circle"></span> Add another employee</button>
                </p>
              </fieldset>
              <p class="h3 mrgn-tp-sm brdr-tp"><span class="fas fa-users"></span> Employee summary</p>
              <ul class="list-unstyled">
                <li class="mrgn-tp-md"><a href="#ee-calculation-table" aria-controls="ee-calculation-table" class="wb-lbx lbx-modal btn btn-default" role="button" id="showEmpTable">Review, download
                  and print employee calculations</a></li>
                <!--<li class="mrgn-tp-md">
                  <button role="button" id="transfer-data" class="btn btn-primary">Calculate and send data to the next step</button>
                </li>//-->
              </ul>
            </div>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 5</span></a></p>
          </div> -->
        </div>
        <section id="ee-calculation-table" class="mfp-hide modal-dialog modal-content overlay-def wb-popup-full">
          <header class="modal-header">
            <h2 class="modal-title">Remuneration calculations for claim period <span class="claim-period"></span></h2>
          </header>
          <div class="modal-body">
            <p class="mrgn-bttm-md">
              <button type="button"  class="btn btn-default hidden-print toCSV"><span class="fas fa-download"></span> Download the following table as spreadsheet file (CSV)</button>
            </p>
            <div class="table-responsive">
              <table class="table table-bordered table-condensed small" id="dataset-filter">
                <caption class="wb-inv">Remuneration calculations for claim period</caption>
                <thead>
                  <tr>
                    <th>Eligible employees (EE)</th>
                    <th>Arm's length</th>
                    <th>Pre-crisis pay</th>
                    <th>Weekly gross pay for week 1</th>
                    <th>Weekly gross pay for week 2</th>
                    <th>Weekly gross pay for week 3</th>
                    <th>Weekly gross pay for week 4</th>
                    <th class="eligible-wage-subsidy">Calculated basic <span class="elWageP">CEWS</span> amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="emp1">
                    <td><span class="ee-name-1">Employee 1</span></td>
                    <td id="emp-arms-1"></td>
                    <td id="emp-base-1"></td>
                    <td data-updated-by="wkone-1"></td>
                    <td data-updated-by="wktwo-1"></td>
                    <td data-updated-by="wkthree-1"></td>
                    <td data-updated-by="wkfour-1"></td>
                    <td id="emp-ttl-1" class="eligible-wage-subsidy"></td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td class="nowrap">Total EEs: <span class="numEmps"></span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td class="eligible-wage-subsidy"><span>All EE total: <span class="total"></span></span></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <ul class="list-inline">
              <li>
                <button type="button" onclick="window.print()" class="btn btn-success btn-lg hidden-print"><span     class="glyphicon glyphicon-print"></span> Print this summary</button>
              </li>
              <li class="pull-right">
                <button type="button" title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss" >Close<span class="wb-inv"> overlay</span></button>
              </li>
            </ul>
          </div>
          <div class="modal-footer hidden"> </div>
        </section>
      </div>
    </fieldset>
    <fieldset id="prem-cont-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Premiums, contributions and deductions for the <span class="elWageP">CEWS</span></span></legend>
      <div class="panel-body hidden">
        <div class="row ineligible-wage-subsidy hidden">
          <div class="col-sm-12">
            <p>Premiums, contributions and deductions only apply to the CEWS, THRP or HHBRP. Continue to the next step to calculate your CRHP amount.</p>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 6</span></a></p>
          </div> -->
        </div>
        <div class="row eligible-wage-subsidy">
          <div class="col-sm-12 p19-minus">
            <p class="h3">Premiums and contributions</p>
            <p>Enter the total employer-paid amount of <a href="#contributions" aria-controls="contributions"
                    class="wb-lbx" role="button">premiums or contributions&nbsp;<span
                      class="far fa-question-circle"></span></a> paid
              on behalf of <a href="#lwp" aria-controls="lwp" class="wb-lbx" role="button">eligible
              employees on leave with pay&nbsp;<span class="far fa-question-circle"></span></a> during the
              selected period. Enter
              $0 if not applicable. </p>
            <div class="mrgn-lft-md">
              <div class="p20-21 alert alert-info provisional">
                <h4>Premiums and contributions you claim for period 20 may need to be repaid</h4>
                <p>A proposed change <a href="">announced on July 30, <span class="nowrap">2021<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></a>, would retroactively remove the ability to claim CPP, QPP, EI and QPIP amounts for claim periods 20 and later. Although you may claim these amount based on the current rules rather than the upcoming change, you would need to repay any excess amount with interest if this change becomes law.</p>
                <p>Alternatively, you may choose to enter $0 for your premiums and contributions before the proposed change becomes law.</p>
              </div>
              <div class="form-group">
                <label class="control-label required" for="p3-ei"><span class="field-name">Total EI and QPIP
                  premiums that you paid on salary to eligible employees on leave with pay <small>(for the claim
                  period)</small><span class="wb-inv"> (do not include a dollar sign or commas)</span></span> <strong class="required p3-ee-req">(required)</strong> </label>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency required" id="p3-ei">
                </div>
                <p class="small hidden text-danger no-lwp-disclaimer">You have no employees on leave with pay (line AA) during this claim period.</p>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
              <div class="form-group">
                <label class="control-label required" for="p3-cpp"><span class="field-name">Total CPP and QPP
                  contributions that you made on salary to eligible employees on leave with pay <small>(for the
                  claim
                  period)</small><span class="wb-inv"> (do not include a dollar sign or commas)</span></span> <strong class="required p3-ee-req">(required)</strong> </label>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency required" id="p3-cpp">
                </div>
                <p class="small hidden text-danger no-lwp-disclaimer">You have no employees on leave with pay (line AA) during this claim period.</p>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
            </div>
          </div>
          <div class="col-sm-12">
            <p class="h3">Deductions</p>
            <div class="mrgn-lft-md">
              <div class="form-group p14">
                <label class="control-label required" for="p4-tws"><span class="field-name">Amount you
                  calculated for the 10% Temporary Wage Subsidy for Employers <small>(for the claim
                  period)</small> (enter $0 if not applicable)<span class="wb-inv"> (do not include a dollar
                  sign or commas)</span></span> <strong class="required">(required)</strong> </label>
                <p><a href="#tempwage" aria-controls="tempwage" class="wb-lbx" role="button">10% Temporary Wage
                  Subsidy for Employers amount&nbsp;<span class="far fa-question-circle"></span></a></p>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency required" id="p4-tws">
                </div>
                <p id="p4-tws-disclaimer" class="small hidden text-danger">The amount for this claim period is $0
                  because the temporary subsidy has ended.</p>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
              <div class="form-group">
                <label class="control-label required" for="p4-wsb"><span class="field-name">Total amount that your
                  eligible employees have received under ESDC’s Work-Sharing benefit program <small>(for the
                  claim period)</small> (enter $0 if not applicable) <span class="wb-inv"> (do not include a
                  dollar sign or commas)</span></span> <strong class="required">(required)</strong> </label>
                <p><a href="#worksharing" aria-controls="worksharing" class="wb-lbx" role="button">Work-Sharing
                  benefit program amount&nbsp;<span class="far fa-question-circle"></span></a></p>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency required" id="p4-wsb">
                </div>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
            </div>
          </div>
          <!-- <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Summary: <span class="nowrap">Steps 1 to 6</span></a></p>
          </div> -->
        </div>
      </div>
    </fieldset>
    <fieldset id="results-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Amount to claim on your application</span></legend>
      <div class="panel-body">
        <div class="clearfix"></div>
	      <div id="not-qualify-either-alert" class="alert alert-danger provisional hidden">
          <h3 class="text-warning">You do not qualify</h3>
          <p>You do not qualify for either subsidy in <div class="claim-period"></div>.</p>
	      </div>
        <div class="alert alert-info provisional not-yet-apply-alert">
          <h3 class="text-info">Apply for the <span class="h4 subsidy-to-apply-for"></span> with the amounts in this summary:</h3>
          <p class="crhp-eligible">You have still not applied. Apply for the <span class="h4 subsidy-to-apply-for"></span> <strong><span id="same-amount-from-both">if the two subsidies would give the same amount</span><span id="different-amount-from-both">as it results in the higher subsidy for this claim period</span></strong>. The <span class="subsidy-for-information"></span> calculation summary is only here for your information.</p>
          <ol>
            <li>Print and keep the record of <span class="crhp-eligible">your <strong><span class="subsidy-to-apply-for"></span> summary</strong></span> using the print preview button at the bottom.</li>
            <li>Continue to <strong>How to apply</strong> beneath the summary.</li>
          </ol>
	      </div>

        <div class="wb-tabs ignore-session">
          <div class="tabpanels">
            <details id="details-panel1">
              <summary><span class="elWageP">CEWS</span> total amount:<br class="hidden-sm hidden-xs">
                <output class="h3 wb-calc nowrap total-calculated-cews">$0.00</output> <span class="hidden cews-total-tab-fyi">(FYI)</span>
              </summary>
              <div id="cews-no">
                <div id="cews-statement">
                  <div class="alert alert-danger provisional cews-fyi not-yet-apply-alert">
                    <h3 class="h4 mrgn-tp-0 text-warning">Go to the <span class="subsidy-to-apply-for"></span> tab to get the line amounts for your application</h3>
                    <p>The <span class="subsidy-for-information"></span> amount is <strong>less than</strong> <span class="subsidy-to-apply-for"></span> for this claim period. Apply for the subsidy that gives you the higher amount.</p>
                  </div>
                  <div class="p14-crhp well text-muted mrgn-tp-md hidden">
                    <h3 class="mrgn-tp-0">CRHP base remuneration to use in periods 17 to 22</h3>
                    <p>Your <strong>CRHP base remuneration</strong> is <span class="p14-base-crhp-rem h4">$0</span></p>
                    <p>You had <span class="total-eligible-emps h4">0</span> active eligible employees (not on leave with pay) during the CRHP base period (March 14 to April 10).</p>
                    <p>You only need to calculate this once for all future CRHP calculations.</p>
                  </div>
                  <p><span class="cews-fyi">Calculation summary for your information</span><span class="crhp-fyi">Enter the following lines in your application for <strong class="claim-period"></strong></span>:</p>
                  <ul class="lst-spcd">
                    <li class="p14"> <strong>Line A:</strong> Number of eligible employees: <strong>
                      <output class="h3 wb-calc nowrap total-eligible-emps"></output>
                      </strong></li>
                    <li id="sum-ee-active3" class="hidden p59"><strong>Line A:</strong> Number of active eligible employees:
                      <output class="h3 wb-calc nowrap total-active-emps"></output>
                    </li>
                    <li id="sum-ee-lwp3" class="hidden p5-21"><strong>Line AA:</strong> Number of eligible employees on leave with pay:
                      <output class="h3 wb-calc nowrap total-furloughed-emps"></output>
                    </li>
                    <li><strong>Line B:</strong> Total eligible remuneration paid: <strong>
                      <output class="h3 wb-calc nowrap cews-remuneration-total"></output>
                      </strong></li>
                    <li id="sum-rev3" class="hidden p59">Revenue drop and subsidy rate
                      <ul class="list-unstyled mrgn-lft-md">
                        <li class="p11-plus"><strong>Line c0:</strong> Revenue drop for the previous period:
                          <output class="h3 wb-calc nowrap" for="p2b-c0"></output>
                        </li>
                        <li><strong>Line c1:</strong> Revenue drop for the current period:
                          <output class="h3 wb-calc nowrap" for="p2b-c1"></output>
                        </li>
                        <li class="p10-"><strong>Line c2:</strong> Average revenue drop for the previous three months:
                          <output class="h3 wb-calc nowrap" for="p2b-c2"></output>
                        </li>
                        <li><strong>Line c3:</strong> Subsidy rate used for active employees in the calculation of Line C:
                          <output class="h3 wb-calc nowrap" for="p2b-c3"></output>
                        </li>
                      </ul>
                    </li>
                    <li><strong>Line C:</strong> Basic <span class="line-c-cews">CEWS</span> (including top-up, if applicable): <strong>
                      <output class="h3 wb-calc nowrap total"></output>
                      </strong></li>
                    <li class="p19-minus"><strong>Line D:</strong> Employer’s EI and QPIP premiums payable on salary paid to employees on leave with pay <small>(for
                      the claim period)</small>: <strong>
                      <output class="h3 wb-calc nowrap" for="p3-ei"
                              data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output>
                      </strong></li>
                    <li class="p19-minus"><strong>Line E:</strong> Employer’s CPP and QPP contributions payable on salary paid to employees on leave with pay <small>(for the claim period)</small>: <strong>
                      <output class="h3 wb-calc nowrap" for="p3-cpp"
                              data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output>
                      </strong></li>
                    <li class="p14"><strong>Line F:</strong> 10% Temporary Wage Subsidy for Employers reduction <small>(for the claim
                      period)</small>: <strong>
                      <output class="h3 wb-calc nowrap" for="p4-tws"
                              data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output>
                      </strong></li>
                    <li><strong>Line G:</strong> Amounts received by eligible employees under ESDC’s Work-Sharing benefit program <small>(for
                      the claim period)</small>: <strong>
                      <output class="h3 wb-calc nowrap" for="p4-wsb"
                              data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output>
                      </strong></li>
                    <li class="hidden p22-plus">12-month average revenue drop: <strong><output class="h3 twelveMonthDecline wb-calc nowrap"></output></strong></li>
                  </ul>
                  <div class="alert alert-success provisional crhp-fyi">
                    <h3>Result</h3>
                    <p><strong>Line H:</strong> The <strong>total amount</strong> you will claim for the <span class="elWageP">CEWS</span> for this period is: <strong>
                      <output class="h3 wb-calc nowrap total-calculated-cews"></output><br />
                      </strong> This amount is subject to verification. </p>
                  </div>
                </div>
                <table class="table" id="cews-statement-table">
                  <caption class="h5 mrgn-bttm-0">
                  Summary of <span class="elWageP">CEWS</span> calculation
                  </caption>
                  <tbody>
                    <tr>
                      <th scope="row" class="h6">Basic <span class="line-c-cews">CEWS</span> <small class="nowrap">(Line C)</small></th>
                      <td class="text-right nowrap"><output class="h6 wb-calc nowrap total"></output></td>
                    </tr>
                    <tr class="p19-minus">
                      <th scope="row" class="h6">(add) EI and QPIP share <small class="nowrap">(Line D)</small></th>
                      <td class="text-right nowrap">+
                        <output class="h6 wb-calc nowrap" for="p3-ei"
                            data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output></td>
                    </tr>
                    <tr class="p19-minus">
                      <th scope="row" class="h6">(add) CPP and QPP share <small class="nowrap">(Line E)</small></th>
                      <td class="text-right nowrap">+
                        <output class="h6 wb-calc nowrap" for="p3-cpp"
                            data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output></td>
                    </tr>
                    <tr class="p14">
                      <th scope="row" class="h6">(less) 10% Temporary Wage Subsidy for Employers claim <small class="nowrap">(Line
                        F)</small></th>
                      <td class="text-right nowrap"><abbr title="negative" class="brdr-0">-</abbr>
                        <output class="h6 wb-calc nowrap" for="p4-tws"
                            data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output></td>
                    </tr>
                    <tr>
                      <th scope="row" class="h6">(less) Work-Sharing benefit program received <small class="nowrap">(Line G)</small></th>
                      <td class="text-right nowrap"><abbr title="negative" class="brdr-0">-</abbr>
                        <output class="h6 wb-calc nowrap" for="p4-wsb"
                            data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output></td>
                    </tr>
                    <tr class="success">
                      <th scope="row" class="h6">Your <span class="elWageP">CEWS</span> claim, subject to verification, is <small class="nowrap">(Line H)</small></th>
                      <td class="text-right nowrap"><output class="h6 wb-calc nowrap total-calculated-cews"></output></td>
                    </tr>
                  </tbody>
                </table>
                <p class="crhp-fyi">You are now ready to <strong>print these amounts</strong> so you can enter them into your wage subsidy application. Information is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
                <p class="hidden-print"><a href="#pp-statement" class="wb-lbx btn btn-default btn-lg" role="button"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> <span class="elWageP">CEWS</span> statement</span></span></a></p>
              
                <nav class="mrgn-bttm-lg mrgn-tp-lg crhp-no" id="cews-hta">
                  <h3 class="wb-inv">Document navigation</h3>
                  <ul class="pager">
                    <li class="next"><a href="../wage-subsidy/how-apply.html" rel="next">How to apply for the wage or hiring subsidy</a></li>
                  </ul>
                </nav>
              </div>
            </details>
            <details id="details-panel2">
              <summary>CRHP total amount:<br class="hidden-sm hidden-xs">
                <output class="h3 wb-calc nowrap total-calculated-crhp">$0.00</output> <span class="hidden crhp-total-tab-fyi">(FYI)</span>
              </summary>
              <div class="crhp-no">
                <div id="crhp-statement">
                  <div class="alert alert-danger provisional crhp-fyi not-yet-apply-alert">
                    <h3 class="h4 mrgn-tp-0 text-warning">Go to the <span class="subsidy-to-apply-for"></span> tab to get the line amounts for your application</h3>
                    <p>The <span class="subsidy-for-information"></span> amount is <strong>less than</strong> <span class="subsidy-to-apply-for"></span> for this claim period. Apply for the subsidy that gives you the higher amount.</p>
                  </div>   
                  <p><span class="crhp-fyi">Calculation summary for your information</span><span class="cews-fyi">Enter the following lines in your application for <strong class="claim-period"></strong></span>:</p>
                  <ul class="lst-spcd">
                    <li class="p1-21"> <strong>Line 300:</strong> Amount calculated for <span class="line-c-cews">CEWS</span> for the claim period<sup><a href="#line-300-footnote">1</a></sup>: <strong>
                      <output class="h3 wb-calc nowrap total-calculated-cews"></output>
                      </strong> </li>
                    <li><strong>Line 400:</strong> Active eligible employees for the claim period:
                      <output class="h3 wb-calc nowrap total-active-emps"></output>
                    </li>
                    <li><strong>Line 410:</strong> Active eligible employees for the base period (March 14 to April 10):
                      <output class="h3 wb-calc nowrap total-active-emps-14"></output>
                    </li>
                    <li><strong>Line 420:</strong> Total eligible remuneration for the claim period: <strong>
                      <output class="h3 wb-calc nowrap crhp-current-rem"></output>
                      </strong> </li>
                    <li><strong>Line 430:</strong> Total eligible remuneration for the base period (March 14 to April 10): <strong>
                      <output class="h3 wb-calc nowrap crhp-base-rem"></output>
                      </strong> </li>
                    <li><strong>Line 500:</strong> Revenue drop for the current period:
                      <output class="h3 wb-calc nowrap" for="p2b-c1"></output>
                    </li>
                    <li><strong>Line 510:</strong> Revenue drop for the previous period:
                      <output class="h3 wb-calc nowrap" for="p2b-c0"></output>
                    </li>
                  </ul>
                  <p class="small p1-21" id="line-300-footnote">1. You must enter the calculated line 300 <span class="elWageP">CEWS</span> amount on your CRHP application. If you receive CRHP, we will deem your <span class="elWageP">CEWS</span> for the period to be $0.</p>
                </div>
                <table class="table" id="crhp-statement-table">
                  <caption class="h5 mrgn-bttm-0">Summary of CRHP calculation</caption>
                  <tbody>
                    <tr>
                      <th scope="row" class="h6">Current period remuneration for CRHP <small class="nowrap">(Line 420)</small></th>
                      <td class="text-right nowrap"><output class="h6 wb-calc nowrap crhp-current-rem"></output></td>
                    </tr>
                    <tr>
                      <th scope="row" class="h6">(minus) Base period remuneration for CRHP <small class="nowrap">(Line 430)</small></th>
                      <td class="text-right nowrap">-
                        <output class="h6 wb-calc nowrap crhp-base-rem"></output></td>
                    </tr>
                    <tr>
                      <th scope="row" class="h6">(equals) Incremental remuneration paid <small class="nowrap">(Line 440)</small></th>
                      <td class="text-right nowrap">=
                        <output class="h6 wb-calc nowrap crhp-incremental-rem"></output></td>
                    </tr>
                    <tr>
                      <th scope="row" class="h6">(multiplied by) CRHP subsidy rate <small class="nowrap">(Line 520)</small></th>
                      <td class="text-right nowrap"><abbr title="multiply" class="brdr-0">x</abbr>
                        <output class="h6 wb-calc nowrap crhp-rate"></output></td>
                    </tr>
                    <tr class="success">
                      <th scope="row" class="h6">Your CRHP claim, subject to verification <small class="nowrap">(Line 600)</small></th>
                      <td class="text-right nowrap"><output class="h6 wb-calc nowrap total-calculated-crhp"></output></td>
                    </tr>
                  </tbody>
                </table>
                <p class="cews-fyi">You are now ready to <strong>print these amounts</strong> so you can enter them into your hiring subsidy application. Information is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
                <p class="hidden-print"><a href="#pp-crhp-statement" class="wb-lbx btn btn-default btn-lg"
                      role="button"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CRHP
                  statement</span></span></a></p>
                <nav class="mrgn-bttm-lg mrgn-tp-lg" id="crhp-hta">
                  <h3 class="wb-inv">Document navigation</h3>
                  <ul class="pager">
                    <!-- <li class="next"><a href="http://test.canada.ca/covid-19-guidance/proto/hiring-program/crhp-how-apply.html" rel="next">How to apply for CRHP</a></li> -->
                    <li class="next"><a href="../wage-subsidy/how-apply.html" rel="next">How to apply for the wage or hiring subsidy</a></li>
                  </ul>
                </nav>
              </div>
            </details>
          </div>
        </div>
        </div>
        </fieldset>		  
            <button id="calculate" class="btn btn-primary btn-lg hidden" type="submit">Calculate your total subsidy comparison</button>
          </form>
        </div>
	</div>
<section id="calc-summary" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Summary of your online wage and hiring calculation</h2>
  </header>
  <div class="modal-body">
    <p>Line numbers refer to comparable lines you must fill out in the application form.</p>
    <p>All amounts are for the claim period unless otherwise noted.</p>
    <ul class="lst-spcd">
      <li>Claim period: <span class="claim-period h3">default</span></li>
      <li id="sec-2-c" class="hidden">12-month average revenue drop: <span class="h3 twelveMonthDecline">0.00%</span>
      <li id="sec-2-d" class="hidden">THRP and HHBRP eligibility: <span class="h3 ineligible-thrp-hhbrp">Ineligible</span><span class="h3 eligible-thrp-lockdown hidden">THRP (Lockdown)</span><span class="h3 eligible-thrp-12-month">THRP</span><span class="h3 eligible-hhbrp-12-month">HHBRP</span></li>
      <li id="sec-3" class="hidden">CRHP base period remuneration (March 14 to April 10): <span class="h3 crhp-ineligible-tag">Ineligible</span><span class="h3 crhp-eligible crhp-base-rem">$0.00</span></li>
      <li id="sec-2-a" class="hidden">Revenue drop
        <ul>
          <li>Previous period (Line c0): <span class="priorRevReduction h4 alt-bl-no hidden">0.00%</span><span class="priorRevReduction-alt h4 alt-bl-yes hidden">0.00%</span></li>
          <li>Current period (Line c1): <span class="currentRevReduction h4 alt-bl-no hidden">$0.00</span><span class="currentRevReduction-alt h4 alt-bl-yes hidden">$0.00</span></li>
          <li class="p7-and-before">Average revenue drop for previous three months (Line c2): <span class="rev-drop-top-up h4 alt-bl-no hidden">$0.00</span><span class="rev-drop-top-up-alt h4 alt-bl-yes hidden">$0.00</span></li>
        </ul>
      </li>
      <li id="sec-2-b" class="hidden">Rates (based on the higher revenue drop)
        <ul>
          <li class="p1-21">Base rate: <span class="base-rate h4 alt-bl-no hidden">0.00%</span><span class="base-rate-alt h4 alt-bl-yes hidden">0.00%</span></li>
          <li class="p1-21">Top up rate: <span class="top-up-rate h4 alt-bl-no hidden">0.00%</span><span class="top-up-rate-alt h4 alt-bl-yes hidden">0.00%</span></li>
          <li>Overall <span class="elWageP">CEWS</span> rate (Line c3): <span class="cews-rate h4 alt-bl-no hidden">0.00%</span><span class="cews-rate-alt h4 alt-bl-yes hidden">0.00%</span></li>
        </ul>
      </li>
      <li id="sec-4-a" class="hidden">Employees
        <ul>
          <li class="p14">Eligible  employees (Line A):
            <output class="h4 wb-calc nowrap total-eligible-emps"></output>
          </li>
          <li class="p59">Active eligible employees (Line A):
            <output class="h4 wb-calc nowrap total-active-emps"></output>
          </li>
          <li class="p59">Eligible employees on leave with pay (Line AA):
            <output class="h4 wb-calc nowrap total-furloughed-emps"></output>
          </li>
          <li>Eligible remuneration paid (Line B):
            <output class="h4 wb-calc nowrap cews-remuneration-total"></output>
          </li>
        </ul>
      </li>
      <li id="sec-4-b" class="hidden">Basic <span class="line-c-cews">CEWS</span> (Line C):
        <output class="h3 wb-calc nowrap total" for="p2c-cews"></output>
      </li>
      <li id="sec-5" class="hidden">Premiums and contributions
        <ul>
          <li>EI and QPIP premiums payable (Line D):
            <output class="h4 wb-calc nowrap" for="p3-ei" data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output>
          </li>
          <li>CPP and QPP premiums payable (Line E):
            <output class="h4 wb-calc nowrap" for="p3-cpp" data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output>
          </li>
        </ul>
      </li>
      <li id="sec-6" class="hidden">Deductions
        <ul>
          <li class="p14">10% TWS reduction (Line F):
            <output class="h4 wb-calc nowrap" for="p4-tws" data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output>
          </li>
          <li>Work-sharing benefits received (Line G):
            <output class="h4 wb-calc nowrap" for="p4-wsb" data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output>
          </li>
        </ul>
      </li>
    </ul>
    <p>Further explanations will be in the summary review before the final calculation.</p>
    
  </div>
</section>
<section id="armslength" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Arm's length and non-arm's length</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #nonarm-cntnt">
    <p><a href="../wage-subsidy/cews-who-employees.html#nonarm">Non-arm’s-length and arm’s-length eligible employees</a></p>
  </div>
</section>
<section id="contributions" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Lines D and E - Employer’s EI, QPIP, CPP, and QPP premiums payable on salary paid to
      employees on leave with pay </h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #refund-contrib">
    <p><a href="../wage-subsidy/cews-who-employees.html#leave">Active employees and employees on leave with pay</a></p>
  </div>
</section>
<div class="mfp-hide">
  <section id="tempwage" class="modal-dialog modal-content overlay-def">
    <header class="modal-header">
      <h2 class="modal-title">10% Temporary Wage Subsidy for Employers reduction</h2>
    </header>
    <div class="modal-body">
      <p class="lead">Line F –10% Temporary Wage Subsidy for Employers reduction</p>
      <p><strong>For claim periods 5 and later</strong>, the amount for this line will be 0.</p>
      <p><strong>For periods 1 to 4</strong>, you will need to calculate the amount of your 10% Temporary Wage
        Subsidy (a separate
        program) that applies to this CEWS claim period before you enter it at Line F.</p>
      <p>Generally, the 10% Temporary Wage Subsidy for Employers is equal to:</p>
      <p class="mrgn-lft-md"><strong>10% of the remuneration you paid from March 18 to June 19, 2020, up to $1,375
        for
        each eligible employee</strong></p>
      <p>The total maximum of the temporary subsidy is $25,000 per employer.</p>
      <p>CEWS and the 10% Temporary Wage Subsidy for Employers are intended to provide total support of up to 75%,
        not
        75% + 10%. If you are eligible for both wage subsidies for a claim period, any amount you calculate under
        the
        10% Temporary Wage Subsidy for Employers in the period will reduce the amount available for you to claim
        under
        the CEWS in that same period.</p>
      <p>You may choose to have the 10% Temporary Wage Subsidy be less than 10% of the remuneration you paid so that
        you can receive a higher amount of Canada Emergency Wage Subsidy. If you enter 0 as your amount for the 10%
        Temporary Wage Subsidy for Employers in your CEWS application, the CEWS will be determined as if you are
        electing 0% as the prescribed percentage for 10% Temporary Wage Subsidy for Employers, and are requesting
        the
        maximum amount of CEWS instead.</p>
      <p>Read more: <a href="/content/canadasite/en/revenue-agency/services/subsidy/temporary-wage-subsidy.html">Temporary Wage
        Subsidy for Employers</a></p>
    </div>
  </section>
</div>
<section id="worksharing" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Line G - Amounts received by eligible employees under ESDC's Work-Sharing benefit
      program </h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace="../wage-subsidy/cews-who-employees.html #worksharing-cntnt"><a
            href="../wage-subsidy/cews-who-employees.html#worksharing-cntnt">Eligible employees participating in a Work-Sharing benefit
      program</a></div>
    <p>Enter the total amount received under the Work-Sharing program by your eligible employees during the period
      covered by this claim in the box for line G. </p>
  </div>
</section>
<section id="qualifying-restriction-definition" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Qualifying public health restriction</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../tourism-hospitality-recovery-program.html#ajax-pub-hlth">
    <p><a href="../tourism-hospitality-recovery-program.html#ajax-pub-hlth">Qualifying public health restriction</a></p>
  </div>
</section>
<section id="lwp" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Active employees and employees on leave with pay</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #leave-cntnt">
    <p><a href="../hiring-program/crhp-who-employees.html#leave-cntnt">Active employees and employees on leave with pay</a></p>
  </div>
</section>
<section id="pp-statement" class="mfp-hide modal-dialog modal-content overlay-def experimental">
  <header class="modal-header">
    <h2 class="modal-title">Print preview for <span class="elWageP">CEWS</span> statement</h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace="#cews-statement"></div>
    <div data-ajax-replace="#cews-statement-table"></div>
    <ul class="list-inline">
      <li>
        <button type="button" onclick="window.print()" class="btn btn-success btn-lg"><span
                class="glyphicon glyphicon-print"></span> Print this statement</button>
      </li>
      <li class="pull-right">
        <button type="button" title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss"
              >Close<span class="wb-inv"> overlay</span></button>
      </li>
    </ul>
  </div>
  <div class="modal-footer hidden"> </div>
</section>
<section id="pp-crhp-statement" class="mfp-hide modal-dialog modal-content overlay-def experimental">
  <header class="modal-header">
    <h2 class="modal-title">Print preview for CRHP statement</h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace=" #crhp-statement"></div>
    <div data-ajax-replace=" #crhp-statement-table"></div>
    <ul class="list-inline">
      <li>
        <button type="button" onclick="window.print()" class="btn btn-success btn-lg"><span
                class="glyphicon glyphicon-print"></span> Print this statement</button>
      </li>
      <li class="pull-right">
        <button type="button" title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss"
              >Close<span class="wb-inv"> overlay</span></button>
      </li>
    </ul>
  </div>
  <div class="modal-footer hidden"> </div>
</section>
<section id="crhp-rem-definition" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">CRHP base period remuneration</h2>
  </header>
  <div class="modal-body">
    <h3 class="mrgn-tp-sm">Eligible remuneration paid to active employees between March 14 to April 10, 2021</h3>
    <div> 
      <p>We need the amount you paid your employees during the base period (CRHP base period remuneration) to calculate how much the amount you pay eligible employees has increased since then.</p>
      <!-- data-ajax-replace="../wage-subsidy/how-much-reduction.html #basebaselinecalc-cntnt"> -->
      <p>The CRHP base period remuneration is:</p>
      <ul>
        <li>the total eligible remuneration paid to all your active employees (i.e. not on leave with pay)</li>
        <li>paid from March 14 to April 10, 2021 (the same dates as CEWS period 14)</li>
        <li>limited to $1,129 per week, per employee (non-arm's-length employees are further limited to the lower of their weekly or pre-crisis remuneration)</li>
      </ul>
      <p>This is <strong>not</strong> the same as the CEWS total remuneration and was not provided as part of your CEWS period 14 summary, unless you calculated for period 14 after the latest update on <mark>date the calculator updated</mark></p>
      <p><a target="_blank" href="how-much-crhp-base.html" class="btn btn-primary">Calculate your CRHP base period <span class="nowrap">remuneration<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></a></p>
    </div>
    <!-- <details>
      <summary>Example: Choosing a revenue comparison option</summary>
      <div data-ajax-replace="../wage-subsidy/how-much-reduction.html #rev-drop-example-1-cntnt"> </div>
    </details> -->
  </div>
</section>

<!-- <section id="12-month-calculator" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Calculate your 12-month average revenue drop</h2>
  </header>
  <div class="modal-body">
    <h3 class="h2">Which pre-crisis revenue comparison options did you use for your past subsidy applications</h3>
    <p>If you applied for any of these periods, ensure that your choice is consistent with past applications. If you did not, you can decide on an option now.</p>
    
    <legend class="mrgn-tp-md required" ><span class="field-name">CEWS periods 1 to 4 (March 15th to July 4th, 2020)</span> <strong class="required">(required)</strong></legend>
    <select required id="rev-comp-1-4" class="form-control input-lg">
      <option value=""> Select a comparison option</option>
      <option value="regular">Compare claim month to same month in a prior year</option>
      <option value="alternate">Compare claim month to average of January and February 2020</option>
    </select>

    <legend class="mrgn-tp-md required" ><span class="field-name">CEWS periods 5 to 13, CERS and CRHP</span> <strong class="required">(required)</strong></legend>
    <select required id="rev-comp-5-plus" class="form-control input-lg">
      <option value=""> Select a comparison option</option>
      <option value="regular">Compare claim month to same month in a prior year</option>
      <option value="alternate">Compare claim month to average of January and February 2020</option>
    </select>

    <legend class="mrgn-tp-md required" ><span class="field-name">CEWS and CRHP periods 14 to 17 or CERS periods 7 to 10 (March 14th to July 3rd, 2021)</span> <strong class="required">(required)</strong></legend>
    <details>
      <summary>What is the period 14 to 17 exception?</summary>
      <p>A special provision was made available to retroactively use the alternate baseline revenue comparison method during periods 7 to 10 if you were using the regular method.</p>
    </details>
    <select required id="rev-comp-14-17" class="form-control input-lg">
      <option value=""> Select a comparison option</option>
      <option value="regular">Compare claim month to same month in a prior year</option>
      <option value="alternate">Compare claim month to average of January and February 2020</option>
    </select>

    <h3 class="h2"></h3>
  </div>
</section> -->


<section id="baseline-optns" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Compare the pre-crisis revenue options</h2>
  </header>
  <div class="modal-body">
    <h3 class="mrgn-tp-sm">Pre-crisis revenue and prior reference period options</h3>
    <div data-ajax-replace="../wage-subsidy/how-much-reduction.html#basebaselinecalc-cntnt">
      <p><a href="../wage-subsidy/how-much-reduction.html#basebaselinecalc-cntnt">Pre-crisis revenue and prior reference period options</a></p>
    </div>
    <details>
      <summary>Example: Choosing a revenue comparison option</summary>
      <div data-ajax-replace="../wage-subsidy/how-much-reduction.html#rev-drop-example-1-cntnt"> </div>
    </details>
  </div>
</section>
<section id="baseline-rem" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Pre-crisis pay (baseline remuneration)</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #baselineremuneration-cntnt">
    <p><a href="../wage-subsidy/cews-who-employees.html#baselineremuneration">Pre-crisis pay (baseline remuneration)</a></p>
  </div>
</section>
<section id="pay-claim" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Claim period pay per week<span class="emp-lv hidden"> and active employees or employees
      on leave with pay</span></h2>
  </header>
  <div class="modal-body">
    <h3>Claim period pay per week</h3>
    <div data-ajax-replace="../wage-subsidy/cews-who-employees.html #week-cntnt">
      <p><a href="../wage-subsidy/cews-who-employees.html#week">Claim period pay per week</a></p>
    </div>
    <div class="emp-lv hidden">
      <h3>Active employees and employees on leave with pay</h3>
      <div data-ajax-replace="../wage-subsidy/cews-who-employees.html #leave-cntnt">
        <p><a href="../wage-subsidy/cews-who-employees.html#leave">Active employees and employees on leave with pay</a></p>
      </div>
    </div>
  </div>
</section>
<section id="eligible-rev" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Eligible revenue</h2>
  </header>
  <div class="modal-body">
    <p>These months are needed to calculate your revenue drops for the current period, prior period, and top-up
      period, using your chosen baseline.</p>
    <p>Read more about <a href="../hiring-program/crhp-who-apply.html" target="_blank">eligible <span class="nowrap">revenue<span class="far fa-window-restore mrgn-lft-sm"></span><span class="wb-inv"> (opens in new window)</span></span></a></p>
  </div>
</section>
	<!--End of overlays//-->
	
	

  <div id="def-preFooter"></div>
  <!-- Write closure template --> 
  <script>
      var defPreFooter = document.getElementById("def-preFooter");
      defPreFooter.outerHTML = wet.builder.preFooter({
        dateModified: "2021-12-07",
        showPostContent: true,
        showFeedback: true,
        showShare: true
      });
    </script> 
</main>
<div id="def-footer"></div>
<!-- Write closure template --> 
<script>
    var defFooter = document.getElementById("def-footer");
    defFooter.outerHTML = wet.builder.footer({
      showFooter: true,
      showFeatures: true
    });
  </script> 
<!-- Write closure template --> 
<script>
    document.write(wet.builder.refFooter({
    }));
  </script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<!--Scripts by CXO149 May 2021 //--> 
<script> 
  $(document).bind("mobileinit", function () {
      // jQuery Mobile's Ajax navigation does not work in all cases (e.g.,
      // when navigating from a mobile to a non-mobile page), especially when going back, hence disabling it.
      $.extend($.mobile, {
          ajaxEnabled: false
      });
  }); 
</script>
<script>
$(document).on("click", ".steps-wrapper button", function (event) {
	$("legend.wb-steps-active").parents().prevAll().find("legend.panel-heading").addClass("prev-wb-step");			
	$("legend.wb-steps-active").parents().nextAll().find("legend.panel-heading").removeClass("prev-wb-step");	
	$("legend.wb-steps-active").removeClass("prev-wb-step").attr("tabindex", "0");
	$("legend:not(.wb-steps-active)").attr("tabindex", "-1");
	//wrap with button
	$("legend.wb-steps-active").parents().prevAll().find("legend.panel-heading").wrapInner("<button class='btn-link p-0 btn-lgnd' type='button'></button>");
	$("fieldset legend.wb-steps-active").nextAll().addBack().find('.btn-lgnd').contents().unwrap();
	$(".btn-lgnd .btn-lgnd").contents().unwrap(); 
});
$(document).on("click", ".prev-wb-step", function (event) { 
	$(this).addClass("wb-steps-active").removeClass("prev-wb-step");
	$(this).parent().parent().find("legend + div.panel-body.hidden, .buttons").removeClass("hidden");
	$("legend.wb-steps-active").parents().nextAll().find(".wb-steps-active, legend.prev-wb-step").removeClass("wb-steps-active prev-wb-step");	
	$("legend.wb-steps-active").parents().nextAll().find("legend + div.panel-body, .buttons").addClass("hidden");	
  
  $("legend.wb-steps-active").parents().nextAll().each(function( index ) {
    // const wrapperNode = document.querySelector('h1')
    // wrapperNode.replaceWith(...wrapperNode.childNodes)
  });
  
});		
</script>	
<script>
    /**
     * EmployeeFormGenerator class
     * 
     * used to help creating new employee wage forms based on the chosen pay schedule
     */
    var EmployeeFormGenerator = (function () {
      /**
       * Constructor
       * 
       * @param {Int} paySchedule the numeric value of the chosen pay schedule
       */
      function EmployeeFormGenerator(paySchedule) {
        //the payschedule chosen by the user
        this.paySchedule = paySchedule;
        //variables to avoid magic numbers & strings
        this.prefix = "";
        this.numberOfEmployees = 1;
        this.weekly = 1;
        this.biWeekly = 2;
        this.templateId = "emp-1";
        this.armsLengthId = "arms-";
        this.crhpRemId = "amt-crhp-rem-";
        this.baselineId = "baseline-"
        this.employeeNumberClass = "employeeNumber";
        this.removeablePanelClass = "extra-emp-pnl";
        this.currencyPlaceholderValue = "$0";
        this.weeklySummaryBaseClass = "emp-wkly-wage-1";
        this.weeklySummaryClass = "emp-wkly-wage-";
        this.employeeIndexRegex = /-1$/g;
        this.prefix = this.weeklyPrefix
      }

      /**
       * generateNewEmployeeForm
       * 
       * function called to run the routine to generate the new form
       * 
       * @param {Int} numEmps the number of employee panels currently on the 
       * page
       * 
       * @return {DOMDocumentFragment} the cloned template with ID's and other 
       * attributes updated for use in as a new employee wage form
       */
      EmployeeFormGenerator.prototype.generateNewEmployeeForm = function (numEmps) {
        //update number of employee frames
        this.numberOfEmployees = numEmps;
        //generate another pay form
        var newForm = this.generateNewForm();
        return newForm;
      }

      /**
       * generateNewForm
       * 

       * clone the template DOM element and update the required attributes for 
       * a new employee wage form
       * 
       * @calls EmployeeFormGenerator::updateArmsLengthElementId()
       * @calls EmployeeFormGenerator::updateBaselineWageElementId() to update 
       * the baseline wage element
       * @calls EmployeeFormGenerator::setUpdatesAndUpdatedByData() to update 
       * the data-updates and data-update-by attributes
       * @calls EmployeeFormGenerator::updateInputs() to update the input fields
       * @calls EmployeeFormGenerator::updateTableIds() to update the summary 
       * table cells
       * @calls EmployeeFormGenerator::openAccordion() to open all accordion 
       * elements
       *
       * @return {DOMDocumentFragment} the update DOM fragment to be used as 
       * the new employee wage form
       */
      EmployeeFormGenerator.prototype.generateNewForm = function () {
        var frag = $("#" + this.templateId).clone();
        //update the frame id
        $(frag).attr("id", $(frag).attr("id").replace("-1", "-" + this.numberOfEmployees));
        //add class that will be used to identify panels to remove when the selected pay schedule is changed
        $(frag).addClass(this.removeablePanelClass);
        //update the employee number text
        var numEmps = this.numberOfEmployees;
        $(frag).find("." + this.employeeNumberClass).each(function (e, element) {
          $(element).text(numEmps);
        });
        //add the aria-live=polite attr for screen readers
        $(frag).attr("aria-live", "polite");
        var rmBtn = $(frag).find(".rm-emp");
        $(rmBtn).removeClass("hidden");
        //update the DOM fragment
        this.updateArmsLengthElementId(frag);
        this.updateBaselineWageElementId(frag);
        this.setUpdatesAndUpdatedByData(frag);
        this.updateInputs(frag);
        this.updateTableIds(frag);
        this.openAccordion(frag);
        this.updateSummaryHeading(frag);
        this.updateCRHPRem(frag);
        return frag;
      }

      /**
       * updateArmsLengthElementId
       * 
       * update the arms length dropdown element
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateArmsLengthElementId = function (frag) {
        var armsLengthElement = $(frag).find(
          "#" + this.armsLengthId + "1"
        );
        $(armsLengthElement).attr("id", $(armsLengthElement).attr("id").replace(this.employeeIndexRegex, "-" + this.numberOfEmployees));
        $(armsLengthElement).first("option").attr("selected", true);
      }

      /**
       * updateBaselineWageElementId
       * 
       * update the baseline wage input id and reset the value
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateBaselineWageElementId = function (frag) {
        var baselineWageElement = $(frag).find(
          "#" + this.baselineId + "1"
        );
        $(baselineWageElement).attr("id", $(baselineWageElement).attr("id").replace(this.employeeIndexRegex, "-" + this.numberOfEmployees));
        $(baselineWageElement).val("");
      }

      /**
       * updateInputs
       * 
       * update the id, class, and value for the new inputs. also update the 
       * label 'for' value with the new input id
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateInputs = function (frag) {
        var inputs = $(frag).find("input[id$='-1']");
        var numEmps = this.numberOfEmployees;
        var weeklyBaseClass = this.weeklySummaryBaseClass;
        var weeklyClass = this.weeklySummaryClass;
        var indexRegex = this.employeeIndexRegex;
        $(inputs).each(function (i, element) {
          if ($(element).is(":checkbox")) {
            $(element).prop("checked", false);
          } else if ($(element).attr("type", "text")) {
            $(element).val("");
          }
          //need to get the label for each of these elements and update the 'for' attr
          var label = $(frag).find("label[for='" + $(element).attr("id") + "']");
          $(element).attr(
            "id",
            $(element).attr("id").replace(indexRegex, "-" + numEmps)
          );
          $(label).attr(
            "for",
            $(label).attr("for").replace(indexRegex, "-" + numEmps)
          );
          //update the class that drives employee wage summary 
          if ($(element).hasClass(weeklyBaseClass)) {
            $(element).removeClass(weeklyBaseClass);
            $(element).addClass(weeklyClass + numEmps);
          }
        });
      }

      /**
       * setUpdatesAndUpdatedByData
       * 
       * increment the date-updates and data-updated-by value so the 
       * appropriate summary table is updated
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.setUpdatesAndUpdatedByData = function (frag) {
        var updateElements = $(frag).find("*[data-updates$='-1']");
        var updatedByElements = $(frag).find("*[data-updated-by$='-1']");
        var numEmps = this.numberOfEmployees;
        var indexRegex = this.employeeIndexRegex;
        $(updateElements).each(function (i, element) {
          var newval = $(element).data("updates").replace(indexRegex, "-" + numEmps);
          $(element).attr("data-updates", newval);
        });
        $(updatedByElements).each(function (i, element) {
          var newval = $(element).data("updated-by").replace(indexRegex, "-" + numEmps)
          $(element).attr("data-updated-by", newval);
        });
      }

      /**
       * updateTableIds
       * 
       * update table cell id and values required for employee wage summary
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateTableIds = function (frag) {
        var tds = $(frag).find("td[id$='-amt-1']");
        var totalCell = $(frag).find("td[id$='ttl-1']");
        // var remTotalCell = $(frag).find("td[id$='amt-crhp-rem-1']");
        var numEmps = this.numberOfEmployees;
        var currencyPlaceholderValue = this.currencyPlaceholderValue;
        var indexRegex = this.employeeIndexRegex;
        $(tds).each(function (i, element) {
          $(element).attr(
            "id",
            $(element).attr("id").replace(indexRegex, "-" + numEmps)
          );
          $(element).text(currencyPlaceholderValue);
        });
        $(totalCell).attr(
          "id",
          $(totalCell).attr("id").replace(indexRegex, "-" + numEmps)
        );
        // $(remTotalCell).attr(
        //   "id",
        //   $(remTotalCell).attr("id").replace(indexRegex, "-" + numEmps)
        // );
        $(totalCell).text(currencyPlaceholderValue);
        // $(remTotalCell).text(currencyPlaceholderValue);
        $(frag).find("#emp-no-elgbl-1").attr("id", "emp-no-elgbl-" + this.numberOfEmployees);
        $(frag).find("#emp-smry-1").attr("id", "emp-smry-" + this.numberOfEmployees);
      }

      /**
       * openAccordion
       *
       * open all open accordions
       *
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.openAccordion = function (frag) {
        var accordion = $(frag).find("details").each(function (i, element) {
          $(element).attr("open", "open");
        });
      }

      EmployeeFormGenerator.prototype.updateSummaryHeading = function (frag) {
        var heading = $(frag).find('.ee-name-1');
        $(heading).removeClass("ee-name-1");
        $(heading).addClass("ee-name-" + this.numberOfEmployees);
        $(heading).text("Employee " + this.numberOfEmployees);
      }

      EmployeeFormGenerator.prototype.updateCRHPRem = function(frag) {
        var remCRHP = $(frag).find(
          "#" + this.crhpRemId + "1"
        );
        $(remCRHP).attr("id", $(remCRHP).attr("id").replace(this.employeeIndexRegex, "-" + this.numberOfEmployees));
        $(remCRHP).text(this.currencyPlaceholderValue);
      }

      return EmployeeFormGenerator;
    })();

  </script> 
<script>
    (function ($, window, wb) {
      "use strict";
      /*
      * Variable and function definitions.
      * These are global to the plugin - meaning that they will be initialized once per page,
      * not once per instance of plugin on the page. So, this is a good place to define
      * variables that are common to all instances of the plugin on a page.
      */
      // function that should be moved as a helper class or something
      const toMoney = new Intl.NumberFormat(wb.lang + "-CA", {
        style: "currency",
        currency: "CAD",
        minimumFractionDigits: 2
      });
      var employeeFormGenerator = new EmployeeFormGenerator();
      var componentName = "wb-calc",
        selector = "." + componentName,
        initEvent = "wb-init" + selector,
        $document = wb.doc,
        defaults = {},
        sep = {
          iso: {
            en: "--",
            fr: "--"
          },
          claim: {
            en: " to ",
            fr: " au "
          }
        },
        /**
         * @method init
         * @param {jQuery Event} event Event that triggered the function call
         */
        init = function (event) {
          // Start initialization
          // returns DOM object = proceed with init
          // returns undefined = do not proceed with init (e.g., already initialized)

          var elm = wb.init(event, componentName, selector),
            $elm,
            settings;

          if (elm) {
            $elm = $(elm);
            // ... Do the plugin initialisation
            // Get the plugin JSON configuration set on attribute data-wb-helloworld
            settings = $.extend(
              true,
              {},
              defaults,
              window[componentName],
              wb.getData($elm, componentName)
            );

            // Call my custom event
            $elm.trigger("change", settings);
            // Identify that initialization has completed
            wb.ready($elm, componentName);
          }
        };

      // Plugin event handlers
      $document.on("change", "input", function (event) {
        var elm = event.currentTarget,
          $elm = $(elm),
          $elmId = $elm.attr("id"),
          data = wb.getData($("output[for='" + $elmId + "']"), componentName),
          value = $elm.val().replace(/\,\s/g, ''), // Needs to be replaced by data.expr evaluation
          total = 0;

        if (data.expr) {
          //protect against NaN values
          if (value == "") {
            value = 0;
          }
          if (data.format === "currency") {
            $("output[for='" + $elmId + "']").html(toMoney.format(value * 1));
          } else {
            $("output[for='" + $elmId + "']").html(value * 1);
          };
        }
        // if (claimPeriod > 20) { //p21 differences
        //   total = ($("#p2c-cews").val() * 1) - ($("#p4-tws").val() * 1) - ($("#p4-wsb").val() * 1);
        // } else {
          total = ($("#p2c-cews").val() * 1) + ($("#p3-ei").val() * 1) + ($("#p3-cpp").val() * 1) - ($("#p4-tws").val() * 1) - ($("#p4-wsb").val() * 1);
        // }
        if (total < 0) {
          $("[for='p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(0));
        } else {
          $("[for='p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(total));
        };
      });

      $document.on("change", selector, function (event, data) {
        var elm = event.currentTarget,
          $elm = $(elm),
          $input = $("#" + $elm.attr("for")),
          value = $input.val();

        if (data && data.format === "currency") {
          $elm.html(toMoney.format(value * 1));
        } else {
          $elm.html(value * 1);
        };
        $("[for='p2c-ee p2c-pyrl p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(0));
      });

      //when the claim period dropdown is changed
      var elWageP = 0; //if 0, not eligible for THRP or HHBRP, if 1, eligible for THRP, if 2, eligible for HHBRP, 3 is eligible for CEWS
      $document.on("change", "#claim-period", function (event) {
        var rangeISO = $(this).find('option:selected').val(),
          startDateISO = rangeISO.substring(0, rangeISO.indexOf(sep.iso[wb.lang])),
          endDateISO = rangeISO.substring(rangeISO.indexOf(sep.iso[wb.lang]) + sep.iso[wb.lang].length, rangeISO.length),
          rangeClaim = $(this).find("option:selected").text(),
          rangeClaimNo = rangeClaim.substring(7, 8),
          startDateClaim = rangeClaim.substring(0, rangeClaim.indexOf(sep.claim[wb.lang])),
          endDateClaim = rangeClaim.substring(rangeClaim.indexOf(sep.claim[wb.lang]) + sep.claim[wb.lang].length, rangeClaim.length);
        
        // var endDateParts = endDateISO.split("-");
        var claimMonth = getClaimMonth(rangeISO);
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        // var claimMonths = getMonthNamesPlusYear(endDateParts[1], claimPeriod); //send the endDate month number
        if (!$("#claim-period option:selected:eq(0)")) {
          $('.claim-period').html("<time datetime=\"" + startDateISO + "\">" + startDateClaim + "</time>" + sep.claim[wb.lang] + "<time datetime=\"" + endDateISO + "\">" + endDateClaim + "</time>");
          $(".crhp-rate").text(toPercent(0));
        } else {
          $('.claim-period').html($("#claim-period option:selected").text());
          $(".claim-period-no").text(claimPeriod);
          if ((revReduction >= 0.1 && claimPeriod > 17) || (revReduction > 0 && claimPeriod == 17)) {
            var crhpRateScale = [50, 50, 50, 40, 30, 20];
            $(".crhp-rate").text(toPercent(crhpRateScale[claimPeriod - 17]));
            crhpRate = parseFloat("0." + crhpRateScale[claimPeriod - 17]);
          } else {
            $(".crhp-rate").text(toPercent(0));
            $('.crhp-eligible-tag').addClass("hidden");
            crhpRate = 0;
          }
          if ($('#elig-type-yes' + ':checked').length == 0 && $('#elig-type-no' + ':checked').length == 0) {
            if (claimPeriod < 17) {
              $("#details-panel2-lnk").parent().addClass("hidden");
            } else {
              $("#details-panel2-lnk").parent().removeClass("hidden");
            }
          }
        }
        //show/hide elements based on chosen claim period

        //defaults
        var nolongeravailablePeriod = "";
        $('*[class*="nolongeravailable-1-"]').addClass("hidden");
        if ($('*[class*="nolongeravailable-1-"]').length > 0) {
          var nolongeravailable = $('*[class*="nolongeravailable-1-"]').attr('class');
          nolongeravailable = nolongeravailable.split(" ");
          $(nolongeravailable).each(function (i, element) {
            if (nolongeravailable[i].indexOf("longeravailable-1-") > 0) {
              nolongeravailablePeriod = nolongeravailable[i].split("-")[2];
            }
          });
          if (claimPeriod <= nolongeravailablePeriod) {
            $('*[class*="nolongeravailable-1-"]').removeClass("hidden");
          }
        }

		    //defaults
        $("#2022-05-yes").closest("div.form-group").addClass("hidden");
        $("#2022-04-yes").closest("div.form-group").addClass("hidden");
        $("#2022-03-yes").closest("div.form-group").addClass("hidden");
        $("#2022-02-yes").closest("div.form-group").addClass("hidden");
        $("#2022-01-yes").closest("div.form-group").addClass("hidden");
        $("#2021-12-yes").closest("div.form-group").addClass("hidden");
        $("#2021-11-yes").closest("div.form-group").addClass("hidden");
        $("#2021-10-yes").closest("div.form-group").addClass("hidden");
        $("#2021-09-yes").closest("div.form-group").addClass("hidden");
        $("#2021-08-yes").closest("div.form-group").addClass("hidden");
        $("#2021-07-yes").closest("div.form-group").addClass("hidden");
        $("#2021-06-yes").closest("div.form-group").addClass("hidden");
        $("#2021-05-yes").closest("div.form-group").addClass("hidden");
        $("#2021-04-yes").closest("div.form-group").addClass("hidden");
        $("#2021-03-yes").closest("div.form-group").addClass("hidden");
        $("#2021-02-yes").closest("div.form-group").addClass("hidden");
        $("#2021-01-yes").closest("div.form-group").addClass("hidden");
        $("#2020-12-yes").closest("div.form-group").addClass("hidden");
        $("#2020-11-yes").closest("div.form-group").addClass("hidden");
        $("#2020-10-yes").closest("div.form-group").addClass("hidden");
        $("#2020-09-yes").closest("div.form-group").addClass("hidden");
        $("#2020-08-yes").closest("div.form-group").addClass("hidden");
        $("#2020-07-yes").closest("div.form-group").addClass("hidden");
        $("#2020-06-yes").closest("div.form-group").addClass("hidden");
        $("#2020-05-yes").closest("div.form-group").addClass("hidden");
        $("#2020-04-yes").closest("div.form-group").addClass("hidden");
        $("#2022-05-no").closest("div.form-group").addClass("hidden");
        $("#2022-04-no").closest("div.form-group").addClass("hidden");
        $("#2022-03-no").closest("div.form-group").addClass("hidden");
        $("#2022-02-no").closest("div.form-group").addClass("hidden");
        $("#2022-01-no").closest("div.form-group").addClass("hidden");
        $("#2021-12-no").closest("div.form-group").addClass("hidden");
        $("#2021-11-no").closest("div.form-group").addClass("hidden");
        $("#2021-10-no").closest("div.form-group").addClass("hidden");
        $("#2021-09-no").closest("div.form-group").addClass("hidden");
        $("#2021-08-no").closest("div.form-group").addClass("hidden");
        $("#2021-07-no").closest("div.form-group").addClass("hidden");
        $("#2021-06-no").closest("div.form-group").addClass("hidden");
        $("#2021-05-no").closest("div.form-group").addClass("hidden");
        $("#2021-04-no").closest("div.form-group").addClass("hidden");
        $("#2021-03-no").closest("div.form-group").addClass("hidden");
        $("#2021-02-no").closest("div.form-group").addClass("hidden");
        $("#2020-02-no").closest("div.form-group").addClass("hidden");
        $("#2021-01-no").closest("div.form-group").addClass("hidden");
        $("#2020-01-no").closest("div.form-group").addClass("hidden");
        $("#2020-12-no").closest("div.form-group").addClass("hidden");
        $("#2019-12-no").closest("div.form-group").addClass("hidden");
        $("#2020-11-no").closest("div.form-group").addClass("hidden");
        $("#2019-11-no").closest("div.form-group").addClass("hidden");
        $("#2020-10-no").closest("div.form-group").addClass("hidden");
        $("#2019-10-no").closest("div.form-group").addClass("hidden");
        $("#2020-09-no").closest("div.form-group").addClass("hidden");
        $("#2019-09-no").closest("div.form-group").addClass("hidden");
        $("#2020-08-no").closest("div.form-group").addClass("hidden");
        $("#2019-08-no").closest("div.form-group").addClass("hidden");
        $("#2020-07-no").closest("div.form-group").addClass("hidden");
        $("#2019-07-no").closest("div.form-group").addClass("hidden");
        $("#2020-06-no").closest("div.form-group").addClass("hidden");
        $("#2019-06-no").closest("div.form-group").addClass("hidden");
        $("#2020-05-no").closest("div.form-group").addClass("hidden");
        $("#2019-05-no").closest("div.form-group").addClass("hidden");
        $("#2020-04-no").closest("div.form-group").addClass("hidden");
        $("#2019-04-no").closest("div.form-group").addClass("hidden");
        $("#2019-03-no").closest("div.form-group").addClass("hidden");
        $("#2019-03-2-no").closest("div.form-group").addClass("hidden");
        $("#cal-sprdsht-p1-4").addClass("hidden");
        $("#cal-sprdsht-none").addClass("hidden");
        $("#cal-sprsht-p5").addClass("hidden");
        $("#cal-sprsht-p7").addClass("hidden");
        $("#cal-sprsht-p9").addClass("hidden");
        $("#cal-sprsht-p11").addClass("hidden");
        $("#no-crhp-message").addClass("hidden");
        $("#crhp-questions").removeClass("hidden");
        if ($('#elig-type-yes' + ':checked').length == 0 && $('#elig-type-no' + ':checked').length == 0) {
          $(".crhp-eligible").removeClass("hidden");
        }
        $(".p10-").addClass("hidden");
        $(".p18-plus").addClass("hidden");
        $(".p17-only").addClass("hidden");
        $(".p18-only").addClass("hidden");
        $(".p19-only").addClass("hidden");
        $(".p19-minus").addClass("hidden");
        $(".p20-only").addClass("hidden");
        $(".p21-minus").addClass("hidden");
        $(".p17-plus").addClass("hidden");
        $(".p1-17").addClass("hidden");
        $(".p7-and-before").addClass("hidden");
        $(".p14-crhp").addClass("hidden");
        $(".p18-21").addClass("hidden");
        $(".p20-21").addClass("hidden");
        $(".p22-26").addClass("hidden");
        $(".p27-28").addClass("hidden");
        $(".p21-hide").removeClass("hidden");
        $(".p14").addClass("hidden");
        $(".p59").addClass("hidden");
        $(".p5-21").addClass("hidden");
        $(".emp-lv").addClass("hidden");

        if (claimPeriod > 4) {
          $(".p59").removeClass("hidden");
          $("#p4-tws").prop("readonly", true);
          $("#p4-tws").val("0.00");
          $("#p4-tws-disclaimer").removeClass("hidden");
          $("#rate-reduction").removeClass("hidden");
          $(".choose-claim-period").addClass("hidden");
          $(".emp-lv").removeClass("hidden");
          if (claimPeriod < 22) {
            $(".p5-21").removeClass("hidden");
          }
        } else {
          $(".p14").removeClass("hidden");
        }
        if (claimPeriod > 6) {
          $(".btn-cews-cal").removeClass("disabled");
          $(".btn-cews-cal").prop("disabled", false);
        }
        if (claimPeriod < 8) {
          $(".p7-and-before").removeClass("hidden");
        } else if (claimPeriod < 11) {
          $(".p8-plus").removeClass("hidden");
        }
        if (claimPeriod < 11) {
          $(".p10-").removeClass("hidden");
        } else {
          $(".p11-plus").removeClass("hidden");
        }
        if (claimPeriod < 17) {
          $("#no-crhp-message").removeClass("hidden");
          $("#crhp-questions").addClass("hidden");
          if ($('#elig-type-yes' + ':checked').length == 0 && $('#elig-type-no' + ':checked').length == 0) {
            $(".crhp-eligible").addClass("hidden");
          }
        } else {
          $(".p17-plus").removeClass("hidden");
        }
        if (claimPeriod < 18) {
          $(".p18-plus").addClass("hidden");
        } else {
          if (claimPeriod < 22) {
            $(".p18-21").removeClass("hidden");
            if (claimPeriod > 19) {
              $(".p20-21").removeClass("hidden");
            }
          }
          $(".p18-plus").removeClass("hidden");
        }
        if (claimPeriod < 20) {
          //default the contributions and premiums to 0
          $("#p3-ei").val(0);
          $("#p3-cpp").val(0);
          $(".p19-minus").removeClass("hidden");
        }
        if (claimPeriod < 22) {
          elWageP = 3; //eligible for CEWS
          $('.eligible-wage-subsidy').removeClass("hidden");
          $('.ineligible-wage-subsidy').addClass("hidden");
          $("#details-panel1-lnk").parent().removeClass("hidden");
          $('.thrp-specific').addClass("hidden");
          $('.hhbrp-specific').addClass("hidden");
          if (document.documentElement.lang == "fr") {
            $('.elWageP').text("SSUC");
            $('.line-c-cews').text("SSUC");
          } else {
            $('.elWageP').text("CEWS");
            $('.line-c-cews').text("CEWS");
          }
          $(".p1-21").removeClass("hidden");
          $(".p22-plus").addClass("hidden");
        } else { //THRP/HHBRP stuff
          if (document.documentElement.lang == "fr") {
            $('.line-c-cews').text("subvention salariale");
          } else {
            $('.line-c-cews').text("wage subsidy");
          }
          $(".p1-21").addClass("hidden");
          $(".p22-plus").removeClass("hidden");
          if (claimPeriod < 27) {
            $(".p22-26").removeClass("hidden");
            $(".p27-28").addClass("hidden");
          } else {
            $(".p22-26").addClass("hidden");
            $(".p27-28").removeClass("hidden");
          }
        }

        switch (claimPeriod) {
          case 28:
            $("#2022-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            $("#2022-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            break;
          case 27:
            $("#2022-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-03-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            $("#2022-03-no").closest("div.form-group").removeClass("hidden");
            $("#2019-03-no").closest("div.form-group").removeClass("hidden");
            break;
          case 26:
            $("#2022-03-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-02-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-03-no").closest("div.form-group").removeClass("hidden");
            $("#2019-03-2-no").closest("div.form-group").removeClass("hidden"); //uses the inverted March field for layout reasons
            $("#2022-02-no").closest("div.form-group").removeClass("hidden");
            $("#2020-02-no").closest("div.form-group").removeClass("hidden");
            break;
          case 25:
            $("#2022-02-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-01-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-02-no").closest("div.form-group").removeClass("hidden");
            $("#2020-02-no").closest("div.form-group").removeClass("hidden");
            $("#2022-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-01-no").closest("div.form-group").removeClass("hidden");
            break;
          case 24:
            $("#2022-01-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2022-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-01-no").closest("div.form-group").removeClass("hidden");
            $("#2021-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            break;
          case 23:
            $("#2021-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            $("#2021-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            break;
          case 22:
            $("#2021-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            $("#2021-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            break;
          case 21:
            // $(".p21-hide").addClass("hidden");
             //change the values to 0
            $("#2021-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2021-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            break;
          case 20:
            $(".p20-only").removeClass("hidden");
            $("#2021-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2021-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            break;
          case 19:
            $(".p19-only").removeClass("hidden");
            $("#2021-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2021-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            break;
          case 18:
            $(".p18-only").removeClass("hidden");
            $("#2021-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2021-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            break;
          case 17:
            $(".p17-only").removeClass("hidden");
            $("#2021-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            $("#2021-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            break;
          case 16:
            $("#2021-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            $("#2021-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            break;
          case 15:
            $("#2021-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-03-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            $("#2021-03-no").closest("div.form-group").removeClass("hidden");
            $("#2019-03-no").closest("div.form-group").removeClass("hidden");
            break;
          case 14:
            $(".p14-crhp").removeClass("hidden");
            $("#2021-03-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-02-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-03-no").closest("div.form-group").removeClass("hidden");
            $("#2019-03-2-no").closest("div.form-group").removeClass("hidden");
            $("#2021-02-no").closest("div.form-group").removeClass("hidden");
            $("#2020-02-no").closest("div.form-group").removeClass("hidden");
            break;
          case 13:
            $(".p11-only").addClass("hidden");
            $("#2021-02-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-01-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-02-no").closest("div.form-group").removeClass("hidden");
            $("#2020-02-no").closest("div.form-group").removeClass("hidden");
            $("#2021-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-01-no").closest("div.form-group").removeClass("hidden");
            break;
          case 12:
            $(".p11-only").addClass("hidden");
            $("#2021-01-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            break;
          case 11:
            $(".p11-only").removeClass("hidden");
            $("#2020-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            $("#2020-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            break;
          case 10:
            $(".p11-only").addClass("hidden");
            $("#cal-sprsht-p9").removeClass("hidden");
            $("#2020-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            $("#2020-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            $("#2020-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            break;
          case 9:
            $(".p11-only").addClass("hidden");
            $("#2020-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            $("#2020-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            break;
          case 8:
            $(".p11-only").addClass("hidden");
            $("#2020-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            break;
          case 7:
            $(".p11-only").addClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2020-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            break;
          case 6:
            $(".p11-only").addClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2020-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            $("#2020-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            break;
          case 5:
            $(".p11-only").addClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2020-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            $("#2020-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            $("#2020-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            break
          case 4:
          case 3:
          case 2:
          case 1:
            $(".p11-only").addClass("hidden");
            $("#rate-reduction").addClass("hidden");
            $("#p4-tws").prop("readonly", false);
            $("#p4-tws-disclaimer").addClass("hidden");
            $("#cal-sprdsht-none").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            break;
          default:
            $(".p11-only").addClass("hidden");
            $("#rate-reduction").addClass("hidden");
            $("#p4-tws").prop("readonly", false);
            $("#p4-tws-disclaimer").addClass("hidden");
            $(".btn-cews-cal").addClass("disabled");
            $(".btn-cews-cal").prop("disabled", true);
            $(".choose-claim-period").removeClass("hidden");
        }

        var topUpMultiplier = [1.25, 1.25, 1.25, 1.25, 1.25, 1.25, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.25, 0.75, 0.75, 0.5];
        $('.scaleTopUp').text(topUpMultiplier[claimPeriod - 5]);
        var scaleBase = [1.2, 1.2, 1.0, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.875, 0.625, 0.625, 0.25];
        $('.scaleBase').text(scaleBase[claimPeriod - 5]);

        //recalculate the summary based on the values that are already there
        if ($("#2020-" + claimMonth + "-no").is(":visible") || $("#2021-" + claimMonth + "-no").is(":visible")) {
          calculateRevenueDrop();
        } else if ($("#2020-" + claimMonth + "-yes").is(":visible") || $("#2021-" + claimMonth + "-yes").is(":visible")) {
          calculateRevenueDropAlt();
        // } else {
        //   NoCERSRate();
        }
      });

      /**
      * NoCERSRate()
      * Fill in default values of 0% when there's not enough information to determine the rate
      */
      function NoCEWSRate() {
        cewsRate = 0;
        crhpRate = 0;
        $(".currentRevReduction").text(toPercent("0"));
        $(".priorRevReduction").text(toPercent("0"));
        $(".preferentialRevReduction").text(toPercent("0"));
        $(".base-rate").text(toPercent("0"));
        recalculateAllEmployees();
      }

      function recalculateAllEmployees() {
        $(".arms-length-select").each(function (i, element) {
          var parts = $(element).prop("id").split("-");
          var employeeNumber = parts[parts.length - 1];
          recalculateEmployeeAmounts(employeeNumber);
        });
        calculateTotals();
      }

      // when the submit button is clicked
      
      $(document).on("click", ".steps-wrapper:nth-child(7) button:contains('Next')", function (event) {
        validationCheck(event);
      });
      $(document).on("click", ".steps-wrapper:nth-child(7) button:contains('Suivant')", function (event) {
        validationCheck(event);
      });
      
      function validationCheck(event) {
        event.preventDefault();
        //remove the required attribute in all hidden elements
        $("[required]:hidden").each(function (i, element) {
          $(element).removeAttr("required");
        });
        var count = 0,
          $elms = $(".wb-frmvld select[required], .wb-frmvld input[required]"),
          $emptyElms = [];
        //find all required fields that were left empty
        for (let i = 0; i < $($elms).length; i++) {
          var $elm = $($elms).eq(i);
          if ($elm.val() == "") {
            $emptyElms.push($elm);
            count++;
          }
        }
        //if WET4 already has errors, scroll to those
        if ($("#errors-default")[0]) {
          $('html, body').animate({ scrollTop: $("#errors-default").offset().top }, 'slow');
          //scroll to the FIRST element that failed custom validation
        } else if ($emptyElms[0]) {
          $('html, body').animate({ scrollTop: $($emptyElms[0]).offset().top }, 'slow');
          console.debug($emptyElms);
          //validation passed, show the results
        } else {
          $("#results").removeClass("hidden");
        }
      }


      // function recalculateAllEmployees() {
      //   $(".arms-length-select").each(function (i, element) {
      //     var parts = $(element).prop("id").split("-");
      //     var employeeNumber = parts[parts.length - 1];
      //     recalculateEmployeeAmounts(employeeNumber);
      //   });
      //   calculateTotals();
      // }

      /**
       * update the employee wage summary
       */
      var numEmployeePanels = 1;
      $document.on("blur", "*[data-updates]", function (event) {
        var target = event.target;
        var parts = target.id.split("-");
        var employeeNumber = parts[parts.length - 1];
        recalculateEmployeeAmounts(employeeNumber);
      });

      function recalculateEmployeeAmounts(employeeNumber) {
        var unformattedValue = [$("#wkone-" + employeeNumber).val().replace("$", ""), $("#wktwo-" + employeeNumber).val().replace("$", ""), $("#wkthree-" + employeeNumber).val().replace("$", ""), $("#wkfour-" + employeeNumber).val().replace("$", "")];
        var claimPeriod = $("#claim-period option:selected").data("claim-period");
        var outputFields = ['wkone-', 'wktwo-', 'wkthree-', 'wkfour-'];
        var weeklyCews = {};
        var crhpRem = {};
        var p1to4eligibility = claimPeriod < 5 ? checkEmployeeEligibility(employeeNumber) : "true";
        for (let i = 0; i < 4; ++i) {
          $('#emp-arms-' + employeeNumber).text($("#arms-" + employeeNumber).val().charAt(0).toUpperCase() + $("#arms-" + employeeNumber).val().slice(1));
          var armsLength = $("#arms-" + employeeNumber).val().toLowerCase() == "yes" || $("#arms-" + employeeNumber).val().toLowerCase() == "oui" ? true : false;
          var updateTarget = $('#' + $("#" + outputFields[i] + employeeNumber).attr("data-updates"));
          //if the target is a select element, capitalize the first letter then update the target
          var baselineWage = zeroIfEmpty($("#baseline-" + employeeNumber).val());
            //get the wkX prefix of the input being updated, look for the leave w/ pay input with the same prefix
          // var parts = outputFields[i].match(/(wk)(one|two|three|four)-/g);
          var weekNumber = outputFields[i].substring(0, outputFields[i].indexOf("-"));
          var paidLeave = $("#" + weekNumber + "-cb-" + employeeNumber).is(":checked");
          if (paidLeave) {
            crhpRem[i] = 0;
          } else {
            if (armsLength) {
              crhpRem[i] = Math.min(1129, zeroIfEmpty(unformattedValue[i]));;
            } else {
              crhpRem[i] = Math.min(1129, baselineWage, zeroIfEmpty(unformattedValue[i]));
            } 
          }
          //get the weekly cews; if it's not an int or float, use 0
          weeklyCews[i] = getWeeklyCEWS(armsLength, baselineWage, zeroIfEmpty(unformattedValue[i]), paidLeave);
          if (!isInt(weeklyCews[i]) && !isFloat(weeklyCews[i])) {
            weeklyCews[i] = 0;
          }
          if (p1to4eligibility) {
            $("#emp-no-elgbl-" + employeeNumber).addClass("hidden");
            $("#emp-smry-" + employeeNumber).removeClass("hidden");
          } else {
            weeklyCews[i] = 0;
            $("#emp-smry-" + employeeNumber).addClass("hidden");
            $("#emp-no-elgbl-" + employeeNumber).removeClass("hidden");
          }
          //format and update the targets using localized currency format
          var formattedVal = toMoney.format(weeklyCews[i]);
          $(updateTarget).text(formattedVal);
          var updatedByElements = $("*[data-updated-by='" + outputFields[i] + employeeNumber + "']");
          $(updatedByElements).each(function (j, element) {
            $(element).text(toMoney.format(unformattedValue[i]));
          });
        }
        // update the total
        if ($(updateTarget).data("updates")) {
            /*
              update the target to the total column and get all elements that make up the total
            */
            updateTarget = $("#" + $(updateTarget).attr("data-updates"));
            //get the total cews
            var employeeCews = getEmployeeCews(employeeNumber, baselineWage);
            var formattedTotal = toMoney.format(employeeCews);
            $(updateTarget).text(formattedTotal);
          }
          //calculate the total eligible remuneration for CRHP, and plop to 'amt-crhp-rem-' + employeeNumber
          var CRHPEmpRem = 0;
          for (let i = 0; i < 4; ++i) {
            CRHPEmpRem += crhpRem[i];
          }
          $("#amt-crhp-rem-" + employeeNumber).text(toMoney.format(CRHPEmpRem));
      }

      //when the user clicks the remove button on an employee panel
      $(document).on("click", ".rm-emp", function(event) {
        var fieldset = $(event.target).parent("fieldset");
        var id = $(fieldset).attr("id");
        var empNumber = id.split("-")[1];
        $("#emp-arms-" + empNumber).parent("tr").remove();
        $(fieldset).remove();
      });

      //https://stackoverflow.com/questions/3885817/how-do-i-check-that-a-number-is-float-or-integer
      function isInt(n) {
        return Number(n) === n && n % 1 === 0;
      }
      function isFloat(n) {
        return Number(n) === n && n % 1 !== 0;
      }

      /**
       * getEmployeeCews()
       * 
       * get the cews total for an employee 
       * 
       * @param {Int} employeeNumber The employee panel number
       * @param {String} baselineWage The employees baseline pre-crisis wage
       *
       * @return {Float} Total calculated cews for this employee || 0 if not 
       * all data was entered
       */
      function getEmployeeCews(employeeNumber, baselineWage) {
        var armsLength = $("#arms-" + employeeNumber).val() == "Yes" || $("#arms-" + employeeNumber).val() == "Oui" ? true : false;
        var weekone = zeroIfEmpty($('#wkone-' + employeeNumber).val());
        var weekOnePaidLeave = $("#wkone-cb-" + employeeNumber).is(":checked");
        var weektwo = zeroIfEmpty($('#wktwo-' + employeeNumber).val());
        var weekTwoPaidLeave = $("#wktwo-cb-" + employeeNumber).is(":checked");
        var weekthree = zeroIfEmpty($('#wkthree-' + employeeNumber).val());
        var weekThreePaidLeave = $("#wkthree-cb-" + employeeNumber).is(":checked");
        var weekfour = zeroIfEmpty($('#wkfour-' + employeeNumber).val());
        var weekFourPaidLeave = $("#wkfour-cb-" + employeeNumber).is(":checked");
        var weekOneCews = getWeeklyCEWS(armsLength, baselineWage, weekone, weekOnePaidLeave);
        var weekTwoCews = getWeeklyCEWS(armsLength, baselineWage, weektwo, weekTwoPaidLeave);
        var weekThreeCews = getWeeklyCEWS(armsLength, baselineWage, weekthree, weekThreePaidLeave);
        var weekFourCews = getWeeklyCEWS(armsLength, baselineWage, weekfour, weekFourPaidLeave);
        if (
          isNaN(weekOneCews) ||
          isNaN(weekTwoCews) ||
          isNaN(weekThreeCews) ||
          isNaN(weekFourCews)
        ) {
          return 0;
        }
        return parseFloat(weekOneCews + weekTwoCews + weekThreeCews + weekFourCews);
      }

      /**
       * getEmployeeTotalWages
       * 
       * get the total wages paid for the given employee number
       *
       * @param {Int} employeeNumber The employee panel number 
       * 
       * @return {Float} The total wage paid for 4 weeks 
       */
      function getEmployeeTotalWages(employeeNumber) {
        var weekone = zeroIfEmpty($('#wkone-' + employeeNumber).val());
        var weektwo = zeroIfEmpty($('#wktwo-' + employeeNumber).val());
        var weekthree = zeroIfEmpty($('#wkthree-' + employeeNumber).val());
        var weekfour = zeroIfEmpty($('#wkfour-' + employeeNumber).val());
        return parseFloat(weekone) + parseFloat(weektwo) + parseFloat(weekthree) + parseFloat(weekfour);
      }

      /**
       * getEmployeeTotalWagesCrhp
       * 
       * get the total wages paid for the given employee number eligible for the CRHP
       *
       * @param {Int} employeeNumber The employee panel number 
       * 
       * @return {Float} The total wage paid for 4 weeks 
       */
       function getEmployeeTotalWagesCrhp(employeeNumber, basePay, armsLength) {
        var weeklyPay = [zeroIfEmpty($('#wkone-' + employeeNumber).val()), zeroIfEmpty($('#wktwo-' + employeeNumber).val()), zeroIfEmpty($('#wkthree-' + employeeNumber).val()), zeroIfEmpty($('#wkfour-' + employeeNumber).val())];
        var paidLeave = [$("#wkone-cb-" + employeeNumber).is(":checked"), $("#wktwo-cb-" + employeeNumber).is(":checked"), $("#wkthree-cb-" + employeeNumber).is(":checked"), $("#wkfour-cb-" + employeeNumber).is(":checked")];
        var totalRem = 0;
        for(let i = 0; i < 4; ++i) {
          if (!paidLeave[i]) {
            if (armsLength) {
              totalRem += Math.min(1129, weeklyPay[i]);
            } else {
              totalRem += Math.min(1129, weeklyPay[i], basePay);
            }
          }
        }
        return totalRem;
      }

      /**
       * calculate the total wages/total cews when the summary table is opened
       */
      $(document).on("click", "#showEmpTable", function (event) {
        calculateTotals();
      });
      var totalCews = 0;
      var totalWages = 0;
      var totalCrhp = 0;
      function calculateTotals() {
        var totalWagesPaid = 0;
        var cews = 0;
        var eligibleEmployees = 0;
        var crhpRemuneration = 0;
        // var cewsBasic = 0;
        var eligibleCrhpRemuneration = 0;
        var claimPeriod = $("#claim-period option:selected").data("claim-period");
        $("#dataset-filter > tbody > tr").each(function (i, element) {
          var id = $(element).prop("id").split("emp")[1];
          var eligibility = true;
          if (document.documentElement.lang == "fr") {
            crhpRemuneration = crhpRemuneration + zeroIfEmpty($('#amt-crhp-rem-' + id).text().replace(/[^0-9,]/g, ''));
            // cewsBasic = cewsBasic + zeroIfEmpty($('#amt-ttl-' + id).text().replace(/[^0-9,]/g, ''));
          } else {
            crhpRemuneration = crhpRemuneration + zeroIfEmpty($('#amt-crhp-rem-' + id).text().replace(/[^0-9.]/g, ''));
            // cewsBasic = cewsBasic + zeroIfEmpty($('#amt-ttl-' + id).text().replace(/[^0-9.]/g, ''));
          }
          //determine the eligibility
          if ($("#emp-smry-" + id).hasClass("hidden")) {
            eligibility = false;
          }
          //show baselineWage or 0 if the baseline was left empty (protect against showing NaN)
          var baselineWage = $("#baseline-" + id).val();
          if (baselineWage == "") {
            $("#emp-base-" + id).text(toMoney.format("0.00"));
          } else {
            baselineWage = parseFloat(baselineWage);
          }
          $("#emp-base-" + id).text(toMoney.format(baselineWage));
          //show the arms length value
          var armsLength = $("#arms-" + id).val().toLowerCase() == "yes" || $("#arms-" + id).val().toLowerCase() == "oui" ? true : false;
          $("#emp-arms-" + id).text($("#arms-" + id).val());
          var totalCell = $("#emp-ttl-" + id);
          if (eligibility) {
            eligibleEmployees++;
            var employeeCews = zeroIfEmpty(getEmployeeCews(id, baselineWage));
            cews += employeeCews;
            totalWagesPaid += zeroIfEmpty(getEmployeeTotalWages(id));
            var formattedTotal = toMoney.format(Math.max(employeeCews, 0));
            $("#emp-ttl-" + id).text(employeeCews);
            $(totalCell).html(formattedTotal);
            eligibleCrhpRemuneration += zeroIfEmpty(getEmployeeTotalWagesCrhp(id, baselineWage, armsLength));
          } else {
            $(totalCell).html(toMoney.format(0.00));
          }
        });
        if (claimPeriod == 14) {
          $('.p14-base-crhp-rem').text(toMoney.format(eligibleCrhpRemuneration));
          $('.p14-base-crhp-rem').text(toMoney.format(eligibleCrhpRemuneration));
        }
        $(".numEmps").text(eligibleEmployees);
        $(".total").html(toMoney.format(cews));
        if (claimPeriod < 5) {
          var tempWageSubAmount = zeroIfEmpty($("#p4-tws").val());
        } else {
          var tempWageSubAmount = 0;
        }
        if (revReduction > 0.1 || (revReduction > 0 && claimPeriod < 22) || claimPeriod < 5)  {
          totalCews = cews + zeroIfEmpty($("#p3-ei").val()) + zeroIfEmpty($("#p3-cpp").val()) - tempWageSubAmount - zeroIfEmpty($("#p4-wsb").val());
        } else {
          totalCews = 0;
        }
        totalCews = Math.max(0, totalCews.toFixed(2));
        totalWages = totalWagesPaid.toFixed(2);
        // $('.basic-cews').text(toMoney.format(cewsBasic));
        if (claimPeriod >= 5) {
          if (claimPeriod > 16) {
            $('.crhp-current-rem').text(toMoney.format(crhpRemuneration)); 
            totalCrhp = Math.max(0, (crhpRemuneration - baseCRHPRem) * crhpRate);
            $('.total-calculated-crhp').text(toMoney.format(totalCrhp)); 
            $('.current-crhp-remuneration').html(toMoney.format(totalWages));
            // $('.p14-crhp-remuneration').val(toMoney.format(totalWages));
            $('.crhp-incremental-rem').html(toMoney.format(Math.max(eligibleCrhpRemuneration - baseCRHPRem, 0)));
            $('.crhp-rate').val(toPercent(crhpRate * 100));
          } else {
            totalCrhp = 0;
            $('.crhp-current-rem').text(toMoney.format(0)); 
            $('.crhp-incremental-rem').text(toMoney.format(0)); 
            $('.total-calculated-crhp').text(toMoney.format(0)); 
            $('.crhp-rate').text(toPercent(0)); 
          }

          var numWeeksLeaveWPay = $("input[id*='-cb-']:checked").length;
          var totalEmps = $("fieldset[id^='emp-']").length;
          var eligibleEmps = totalEmps - (0.25 * numWeeksLeaveWPay);
          //active eligible employees
          $(".total-active-emps").html(Math.ceil(eligibleEmps));
          //get eligible furloughed employees
          $(".total-furloughed-emps").html(Math.ceil(totalEmps - eligibleEmps));
          // $("#p2c-ee-alt2").trigger("change");
          // if ($("#p2c-ee-alt2").val() == 0) {
          //   $("#p3-ei").prop("readonly", true);
          //   $("#p3-ei").val("0.00");
          //   $("#p3-cpp").prop("readonly", true);
          //   $(".p3-ee-req").addClass("hidden");
          //   $("#p3-cpp").val("0.00");
          //   $(".no-lwp-disclaimer").removeClass("hidden");
          // } else {
          //   $("#p3-ei").prop("readonly", false);
          //   $("#p3-ei").val("");
          //   $("#p3-cpp").prop("readonly", false);
          //   $(".p3-ee-req").removeClass("hidden");
          //   $("#p3-cpp").val("");
          //   $(".no-lwp-disclaimer").addClass("hidden");
          // }
          // var totalWages = $(".total").attr("data-total-wages");
          $(".cews-remuneration-total").html(toMoney.format(totalWages));
          // $("#p2c-pyrl").trigger("change");
          // var totalCews = $(".total").attr("data-total-cews");
          $(".total-calculated-cews").html(toMoney.format(totalCews));
          // $("#p2c-cews").trigger("change");
          if (claimPeriod < 11) {
            var revenuePriorDisplay = Math.max(0, roundPercDown(priorRevReduc));
            var revenueDisplay = Math.max(0, roundPercDown(currentRevReduc));
          } else {
            var revenuePriorDisplay = Math.max(0, priorRevReduc * 100);
            revenuePriorDisplay = revenuePriorDisplay.toFixed(2);
            var revenueDisplay = Math.max(0, currentRevReduc * 100);
            revenueDisplay = revenueDisplay.toFixed(2);
            if (claimPeriod == 17 && revReduction <= 0) {
              if (revReductionCRHPcur > 0) {
              var revenueDisplay = 0.01;
              }
              if (revReductionCRHPprev > 0) {
                var revenuePriorDisplay = 0.01;
              }
            } else if (claimPeriod > 17 && revReduction <= 0.1) {
              if (revReductionCRHPcur > 10) {
                var revenueDisplay = 10.01;
              }
              if (revReductionCRHPprev > 10) {
                var revenuePriorDisplay = 10.01;
              }
            }
          }
          $("#p2b-c0").val(revenuePriorDisplay);
          $("output[for='p2b-c0']").text(toPercent(revenuePriorDisplay));
          $("#p2b-c1").val(revenueDisplay);
          $("output[for='p2b-c1']").text(toPercent(revenueDisplay));
          var threeMonthRevenueDisplay = Math.max(0, roundPercDown(threeMonthReduction));
          $("#p2b-c2").val(threeMonthRevenueDisplay);
          $("output[for='p2b-c2']").text(toPercent(threeMonthRevenueDisplay));
          var cewsRateDisplay = cewsRate * 100;
          cewsRateDisplay = cewsRateDisplay.toFixed(2);
          $("#p2b-c3").val(cewsRateDisplay);
          $("output[for='p2b-c3']").text(toPercent(cewsRateDisplay));
        } else {
          $(".cews-remuneration-total").html(toMoney.format(totalWages));
          $(".total-calculated-cews").html(toMoney.format(totalCews));
        }
        var eligibleEmployees = $("fieldset[id^='emp-']").length;
        for (var i = 1; i < $("fieldset[id^='emp-']").length; i++) {
          if ($("#emp-smry-" + i).hasClass("hidden")) {
            eligibleEmployees--;
          }
        }
        $(".total-eligible-emps").text(Math.ceil(eligibleEmployees));
        // for (var i = 1; i < (numEmployeePanels + 1); i++) {
        //   $("#wkone-" + i).blur();
        //   $("#wktwo-" + i).blur();
        //   $("#wkthree-" + i).blur();
        //   $("#wkfour-" + i).blur();
        // }
        
        if (totalCrhp <= 0 && totalCews <= 0) {
          $("#not-qualify-either-alert").removeClass("hidden");
          $(".contact-to-apply-p18-21").addClass("hidden");
          $(".not-yet-apply-alert").addClass("hidden");
          $('.crhp-no .hidden-print a').removeClass('btn-default');
          $('.crhp-no .hidden-print a').removeClass('btn-call-to-action');
          $('#cews-no .hidden-print a').removeClass('btn-default');
          $('#cews-no .hidden-print a').removeClass('btn-call-to-action');
          $('.crhp-no .hidden-print a').addClass('btn-default');
          $('#cews-no .hidden-print a').addClass('btn-default');
        } else if (claimPeriod > 16 && totalCrhp > totalCews && !$("#details-panel2-lnk").parent().hasClass("hidden")) {
          $("#same-amount-from-both").addClass("hidden");
          $("#different-amount-from-both").removeClass("hidden");
          $("#not-qualify-either-alert").addClass("hidden");
          $(".contact-to-apply-p18-21").removeClass("hidden");
          $(".not-yet-apply-alert").removeClass("hidden");
          $("#details-panel2-lnk").click(); //default select the CRHP tab
          if (document.documentElement.lang == "fr") {
            $('.subsidy-to-apply-for').text('PEREC');
            if (elWageP == 3) {
              $('.subsidy-for-information').text('SSUC');
            } else if (elWageP == 1) { //THRP
              $('.subsidy-for-information').text('PRTA');
            } else if (elWageP == 2) { //HHBRP
              $('.subsidy-for-information').text('PREPDT');
            }
          } else {
            $('.subsidy-to-apply-for').text('CRHP');
            if (elWageP == 3) {
              $('.subsidy-for-information').text('CEWS');
            } else if (elWageP == 1) { //THRP
              $('.subsidy-for-information').text('THRP');
            } else if (elWageP == 2) { //HHBRP
              $('.subsidy-for-information').text('HHBRP');
            }
          }
          $('.crhp-fyi').addClass("hidden");
          $('.cews-fyi').removeClass("hidden");
          $("#cews-hta").addClass("hidden");
          $("#crhp-hta").removeClass("hidden");	
          $('.crhp-no .hidden-print a').removeClass('btn-default');
          $('.crhp-no .hidden-print a').removeClass('btn-call-to-action');
          $('#cews-no .hidden-print a').removeClass('btn-default');
          $('#cews-no .hidden-print a').removeClass('btn-call-to-action');
          $('.crhp-no .hidden-print a').addClass('btn-call-to-action');
          $('#cews-no .hidden-print a').addClass('btn-default');
          // $('.crhp-current-rem').text(toMoney.format(crhpRemuneration)); 
          // totalCrhp = Math.min(0, crhpRemuneration - baseCRHPRem) * crhpRate;
        } else {
          if (totalCrhp == totalCews) {
            $("#same-amount-from-both").removeClass("hidden");
            $("#different-amount-from-both").addClass("hidden");
          } else {
            $("#same-amount-from-both").addClass("hidden");
            $("#different-amount-from-both").removeClass("hidden");
          }
          $("#not-qualify-either-alert").addClass("hidden");
          $(".contact-to-apply-p18-21").removeClass("hidden");
          $(".not-yet-apply-alert").removeClass("hidden");
          $("#details-panel1-lnk").click(); 
          if (document.documentElement.lang == "fr") {
            $('.subsidy-for-information').text('PEREC');
            if (elWageP == 3) {
              $('.subsidy-to-apply-for').text('SSUC');
            } else if (elWageP == 1) { //THRP
              $('.subsidy-to-apply-for').text('PRTA');
            } else if (elWageP == 2) { //HHBRP
              $('.subsidy-to-apply-for').text('PREPDT');
            }
          } else {
            $('.subsidy-for-information').text('CRHP');
            if (elWageP == 3) {
              $('.subsidy-to-apply-for').text('CEWS');
            } else if (elWageP == 1) { //THRP
              $('.subsidy-to-apply-for').text('THRP');
            } else if (elWageP == 2) { //HHBRP
              $('.subsidy-to-apply-for').text('HHBRP');
            }
          }
          $('.crhp-fyi').removeClass("hidden");
          $('.cews-fyi').addClass("hidden");
          $("#crhp-hta").addClass("hidden");
          $("#cews-hta").removeClass("hidden");	
          //how to select the print preview button inside the hidden-print inside the CRHP vs CEWS?
          $('.crhp-no .hidden-print a').removeClass('btn-default');
          $('.crhp-no .hidden-print a').removeClass('btn-call-to-action');
          $('#cews-no .hidden-print a').removeClass('btn-default');
          $('#cews-no .hidden-print a').removeClass('btn-call-to-action');
          $('#cews-no .hidden-print a').addClass('btn-call-to-action');
          $('.crhp-no .hidden-print a').addClass('btn-default');
        }
      }
       

      /**
       * getWeeklyCEWS
       * 
       * determine the weekly cews amount based on claim period
       *
       * @param {Boolean} armsLength Whether the employee is at arms length
       * @param {String} baselineAmount The employees baseline pay pre-crisis
       * @param {String} weeklyAmount The weekly wage value
       * @param {Boolean} paidLeave Whether the employee was on paid leave for 
       * the week being calculated
       * 
       * @return {Int} The calculated weekly cews amount || 0 if no claim 
       * period is chosen
       */
      function getWeeklyCEWS(armsLength, baselineAmount, weeklyAmount, paidLeave) {
        var period = parseInt($("#claim-period option:selected").data("claim-period"));
        switch (true) {
          //period 1-4
          case (period < 5):
            return parseFloat(oldFormula(armsLength, weeklyAmount, baselineAmount).toFixed(2));
            break;
          // period 5-7
          case (period < 7):
            if (paidLeave) {
              return parseFloat(oldFormula(armsLength, weeklyAmount, baselineAmount).toFixed(2));
            } else {
              if (cewsRate == 0) {
                return 0;
              } else if (revReduction >= 0.3) {
                return parseFloat(Math.max(oldFormula(armsLength, weeklyAmount, baselineAmount), newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate)).toFixed(2));
              } else {
                return parseFloat(Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0).toFixed(2));
              }
            }
            break;
          case (period > 19): //no more paid leave after p19
            if (paidLeave || cewsRate == 0) {
              return 0;
            } else {
              return parseFloat(Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0).toFixed(2));
            }
            break;
          case (period > 10): //paid leave changes
            if (paidLeave) {
              if (revReduction > 0 && (armsLength || baselineAmount > 0)) {
                return parseFloat(Math.min(weeklyAmount, Math.max(500, Math.min(0.55 * baselineAmount, 595))).toFixed(2));
              }
              else
              {
                return 0;
              }
            } else {
              if (cewsRate == 0) {
                return 0;
              } else {
                return parseFloat(Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0).toFixed(2));
              }
            }
            break;
          //periods 9 - 10
          case (period > 8): //paid leave changes
            if (paidLeave) {
              if (cewsRate > 0 && (armsLength || baselineAmount > 0)) {
                return parseFloat(Math.min(weeklyAmount, Math.max(500, Math.min(0.55 * baselineAmount, 573))).toFixed(2));
              }
              else
              {
                return 0;
              }
            } else {
              if (cewsRate == 0) {
                return 0;
              } else {
                return parseFloat(Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0).toFixed(2));
              }
            }
            break;
          //period 7+
          case (period > 6):
            if (paidLeave) {
              return parseFloat(oldFormula(armsLength, weeklyAmount, baselineAmount).toFixed(2));
            } else {
              if (cewsRate == 0) {
                return 0;
              } else {
                return parseFloat(Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0).toFixed(2));
              }
            }
            break;
          default:
            return 0;
        }
      }

      /**
       * determine if an employee has been paid $0 for two consecutive pays
       */
      function checkEmployeeEligibility(employeeNumber) {
        //get all inputs for this employees weekly wages
        var wages = [zeroIfEmpty($('#wkone-' + employeeNumber).val()), zeroIfEmpty($('#wktwo-' + employeeNumber).val()), zeroIfEmpty($('#wkthree-' + employeeNumber).val()), zeroIfEmpty($('#wkfour-' + employeeNumber).val())];
        var eligibility = true;
        for (let i = 0; i < 3; i++) {
          if (wages[i] == 0 && wages[i+1] == 0) {
            eligibility = false;
          }
        }
        return eligibility;
      }


      /**
       * add a new employee form  
       */
      $("#addemp").on("click", addEmp);
      $("#addemp").on("keypress", addEmp);
      function addEmp() {
        numEmployeePanels++;
        var frag = employeeFormGenerator.generateNewEmployeeForm(
          numEmployeePanels
        );
        //create new row for the calculation table
        var row = document.createElement("tr");
        row.id = "emp" + numEmployeePanels;
        //create the employee 'name' cell
        var eligibleEmployeeCell = document.createElement("td");
        var eeSpan = document.createElement("span");
        $(eeSpan).addClass("ee-name-" + numEmployeePanels);
        eeSpan.innerHTML = "Employee " + numEmployeePanels;
        eligibleEmployeeCell.appendChild(eeSpan);
        // create the arms length cell 
        var armsLengthCell = document.createElement("td");
        armsLengthCell.id = "emp-arms-" + numEmployeePanels;
        //create the cell for the baseline wage
        var baselineCell = document.createElement("td");
        baselineCell.id = "emp-base-" + numEmployeePanels;
        //create cells for each wage entry
        var weeklyWageCells = [];
        for (var i = 0; i < 4; i++) {
          weeklyWageCells[i] = document.createElement("td");
        }
        //add the data-update-by attr so these cells are populated by the blur event on *[data-updates]
        $(weeklyWageCells[0]).attr(
          "data-updated-by",
          "wkone-" + numEmployeePanels
        );
        $(weeklyWageCells[1]).attr(
          "data-updated-by",
          "wktwo-" + numEmployeePanels
        );
        $(weeklyWageCells[2]).attr(
          "data-updated-by",
          "wkthree-" + numEmployeePanels
        );
        $(weeklyWageCells[3]).attr(
          "data-updated-by",
          "wkfour-" + numEmployeePanels
        );
        //create the total cell
        var totalCell = document.createElement("td");
        totalCell.id = "emp-ttl-" + numEmployeePanels;
        $(totalCell).addClass($("#emp-ttl-1").attr('class'));
        //put the row together
        row.appendChild(eligibleEmployeeCell);
        row.appendChild(armsLengthCell);
        row.appendChild(baselineCell);
        $(weeklyWageCells).each(function (i, element) {
          row.appendChild(weeklyWageCells[i]);
        });
        //add the row to the table
        row.appendChild(totalCell);
        $("#dataset-filter > tbody").append(row);
        var lastEmpPanel = $("fieldset[id^='emp-']").last();
        $(frag).insertAfter(lastEmpPanel);
        $("#emp-" + numEmployeePanels).focus();
        document.getElementById($(frag).prop("id")).scrollIntoView({
          behavior: 'smooth'
        });
        $("#emp-no-elgbl-" + numEmployeePanels).addClass("hidden");
        $("#emp-smry-" + numEmployeePanels).removeClass("hidden");
      }


      //Needed to show/hide calculator or spreadsheet....can probably be removed when doaction feature works again in AEM (GCWeb 9.3)//	
      $('#show-online-calc').on("click", function() {
        $(this).addClass("btn-primary");
        $("#show-sprdsht").removeClass("btn-primary").addClass("btn-default");	
        $("#cal-calc").removeClass("hidden"); 
        $("#cews-cal-opt1").addClass("hidden"); 
        // $('#steps-example').reset();
        $('#claim-period').prop('selectedIndex', 0);
      });
      $('#show-sprdsht').on("click", function() {
        $(this).addClass("btn-primary");
        $("#show-online-calc").removeClass("btn-primary").addClass("btn-default");	
        $("#cews-cal-opt1").removeClass("hidden"); 
        $("#cal-calc").addClass("hidden"); 
      });	
      //Passes value of publically traded question to summary//
      // $('input:radio[name="bsn-eligibility"]').change(function(){		
      //   $('.crhp-eligible').text(
      //   $(this).val())
      // });
      //Next button clicks to show more of summary so far  (need to try and clean this up into an array//
      $(document).on("click", ".steps-wrapper:nth-child(2) button:contains('Next')", function (event) {
        $('#sec-2-c').removeClass("hidden");
        thrpHhbrpSummary();
        calculateRevenueDrop();
      });
      $(document).on("click", ".steps-wrapper:nth-child(2) button:contains('Suivant')", function (event) {
        $('#sec-2-c').removeClass("hidden");
        thrpHhbrpSummary();
        calculateRevenueDrop();
      });
      $(document).on("click", ".steps-wrapper:nth-child(3) button:contains('Next')", function (event) {
        $('#sec-2-d').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(3) button:contains('Suivant')", function (event) {
        $('#sec-2-d').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(4) button:contains('Next')", function (event) {
        $('#sec-3').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(4) button:contains('Suivant')", function (event) {
        $('#sec-3').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(5) button:contains('Next')", function (event) {
        $('#sec-2-a, #sec-2-b').removeClass("hidden");
        calculateRevenueDrop();
      });
      $(document).on("click", ".steps-wrapper:nth-child(5) button:contains('Suivant')", function (event) {
        $('#sec-2-a, #sec-2-b').removeClass("hidden");
        calculateRevenueDrop();
      });
      $(document).on("click", ".steps-wrapper:nth-child(6) button:contains('Next')", function (event) {
        $('#sec-4-a, #sec-4-b').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(6) button:contains('Suivant')", function (event) {
        $('#sec-4-a, #sec-4-b').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(7) button:contains('Next')", function (event) {
        $('#sec-5').removeClass("hidden");
        calculateTotals();
      });
      $(document).on("click", ".steps-wrapper:nth-child(7) button:contains('Suivant')", function (event) {
        $('#sec-5').removeClass("hidden");
        calculateTotals();
      });
      $(document).on("click", ".steps-wrapper:nth-child(8) button:contains('Next')", function (event) {
        $('#sec-6').removeClass("hidden");
      });	
      $(document).on("click", ".steps-wrapper:nth-child(8) button:contains('Suivant')", function (event) {
        $('#sec-6').removeClass("hidden");
      });	

      //Radio event listener
      $document.on("click", "input[type=radio]", function (event) {
        var target = event.target;
        var parts = target.name.split("-");
        var locationNumber = parts[parts.length - 1];
        if (target.name == "rev-comp") {
          if (target.id == "rev-comp-no") {
            $('#alt-bl-no').addClass("hidden");
						 $('.alt-bl-no').addClass("hidden");
            $('#alt-bl-yes').removeClass("hidden");
						$('.alt-bl-yes').removeClass("hidden");
            calculateRevenueDrop();
          } else {
            $('#alt-bl-no').removeClass("hidden");
						 $('.alt-bl-no').removeClass("hidden");
            $('#alt-bl-yes').addClass("hidden");
						 $('.alt-bl-yes').addClass("hidden");
            calculateRevenueDropAlt();
          }
        } else if (target.name == "crhp-eligibility") {
          if (target.id == "elig-type-yes") {
            $('.crhp-ineligible-tag').addClass("hidden");
            $('#crhp-base-q1').removeClass("hidden");
            $('#crhp-ineligible').addClass("hidden");
            $('#crhp-base-summary').removeClass("hidden");
            $(".crhp-eligible").removeClass("hidden");
            $("#details-panel2-lnk").parent().removeClass("hidden");
            calculateTotals();
          } else {
            $('.crhp-ineligible-tag').removeClass("hidden");
            $('#crhp-base-q1').addClass("hidden");
            $('#crhp-ineligible').removeClass("hidden");
            $('#crhp-base-summary').addClass("hidden");
            $(".crhp-eligible").addClass("hidden");
            $("#details-panel2-lnk").parent().addClass("hidden");
            calculateTotals(); //Or maybe 'clear chrp'?
          }
          $('#crhp-eligibility-summary').removeClass('hidden');
          checkWageEligibility();
        } else if (target.name == "qualifying-lockdown") {
          thrpHhbrpSummary();
        } else if (target.name == "tourism-hospitality") {
          // if (target.id == "tourism-hospitality-continue") { //continue
          //   $('#q3-check-12-month').addClass("hidden");
          // } else { //yes or no
          //$('#q3-check-12-month').removeClass("hidden");
          //}
          thrpHhbrpSummary();
          // $('#crhp-eligibility-summary').removeClass('hidden');
        }
      });

      function checkWageEligibility() {
        if ($('#elig-type-no:checked').length == 1 && elWageP == 0) { //eligible for CRHP
          $('.not-el-hhbrp-crhp').removeClass("hidden");
          $('.el-hhbrp-crhp').addClass("hidden");
        } else {
          $('.not-el-hhbrp-crhp').addClass("hidden");
          $('.el-hhbrp-crhp').removeClass("hidden");
        }
        if (elWageP == 3 || (elWageP > 0 && (revReduction > 0.5 || (elWageP == 1 && revReduction > 0.4)))) {
          $('.eligible-wage-subsidy').removeClass("hidden");
          $('.ineligible-wage-subsidy').addClass("hidden");
        }
      }

      $document.on("blur", "#12-month-decline", function(event) {thrpHhbrpSummary()});
      function thrpHhbrpSummary() {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        if (claimPeriod < 22) {
          $('.thrp-hhbrp-eligible').removeClass("hidden");
          $('.ineligible-thrp-hhbrp').addClass("hidden");
          if (document.documentElement.lang == "fr") {
            $(".twelveMonthDecline").text("Non nécessaire pour les périodes 1 à 21");
          } else {
            $(".twelveMonthDecline").text("Not needed in periods 1 to 21");
          }
          elWageP = 3;
          $('.thrp-specific').addClass("hidden");
          $('.hhbrp-specific').addClass("hidden");
        } else {
          var twelveMonthDecline = zeroIfEmpty($('#12-month-decline').val());
          $(".twelveMonthDecline").text(toPercent(twelveMonthDecline));
          $("#details-panel1-lnk").parent().removeClass("hidden");
          $('#q1-tourism-hospitality').addClass("hidden");
          $('#q2-check-lockdown').addClass("hidden");
          $('.eligible-thrp-lockdown').addClass("hidden"); //hide all by default
          $('.eligible-thrp-12-month').addClass("hidden");
          $('.eligible-hhbrp-12-month').addClass("hidden");
          $('.ineligible-thrp-hhbrp').addClass("hidden");
          $('.thrp-not-enough-data').addClass("hidden");
          $('.thrp-hhbrp-eligible').addClass("hidden");
          $('.thrp-specific').addClass("hidden");
          $('.hhbrp-specific').addClass("hidden");
          if (twelveMonthDecline < 40) { //only possibly eligible through lockdown
            $('#q2-check-lockdown').removeClass("hidden");
            if ($('#qualifying-lockdown-yes:checked').length > 0) {
              $('.eligible-thrp-lockdown').removeClass("hidden"); //lockdown visible
              elWageP = 1;
              $('.thrp-specific').removeClass("hidden");
              $('.hhbrp-specific').addClass("hidden");
              if (document.documentElement.lang == "fr") {
                $('.elWageP').text("PRTA");
              } else {
                $('.elWageP').text("THRP");
              }
              $('.thrp-hhbrp-eligible').removeClass("hidden");
            } else if ($('#qualifying-lockdown-no:checked').length > 0) {
              elWageP = 0;
              $("#details-panel1-lnk").parent().addClass("hidden");
              $('.ineligible-thrp-hhbrp').removeClass("hidden");
              $('.eligible-wage-subsidy').addClass("hidden");
              $('.ineligible-wage-subsidy').removeClass("hidden");
            } else { //neither selected
              $('.thrp-not-enough-data').removeClass("hidden");
            }
          } else { //12-month >= 40 - might qualify
            $('#q1-tourism-hospitality').removeClass("hidden");
            if ($('#tourism-hospitality-yes:checked').length > 0) { //they are THRP
              $('.eligible-thrp-12-month').removeClass("hidden");
              elWageP = 1;
              $('.thrp-specific').removeClass("hidden");
              if (document.documentElement.lang == "fr") {
                $('.elWageP').text("PRTA");
              } else {
                $('.elWageP').text("THRP");
              }
              $('.thrp-hhbrp-eligible').removeClass("hidden");
            } else if ($('#tourism-hospitality-no:checked').length > 0) { //not tourism/hospitality
              $('#q2-check-lockdown').removeClass("hidden");
              if ($('#qualifying-lockdown-yes:checked').length > 0) {
                $('.eligible-thrp-lockdown').removeClass("hidden"); //lockdown visible
                elWageP = 1;
                $('.thrp-specific').removeClass("hidden");
                $('.hhbrp-specific').addClass("hidden");
                if (document.documentElement.lang == "fr") {
                  $('.elWageP').text("PRTA");
                } else {
                  $('.elWageP').text("THRP");
                }
                $('.thrp-hhbrp-eligible').removeClass("hidden");
              } else if ($('#qualifying-lockdown-no:checked').length > 0) {
                if (twelveMonthDecline < 50) {
                  elWageP = 0;
                  $('.ineligible-thrp-hhbrp').removeClass("hidden");
                  $('.eligible-wage-subsidy').addClass("hidden");
                  $('.ineligible-wage-subsidy').removeClass("hidden");
                  $("#details-panel1-lnk").parent().addClass("hidden");
                } else {
                  $('.eligible-hhbrp-12-month').removeClass("hidden");
                  elWageP = 2;
                  $('.hhbrp-specific').removeClass("hidden");
                  if (document.documentElement.lang == "fr") {
                    $('.elWageP').text("PREPDT");
                  } else {
                    $('.elWageP').text("HHBRP");
                  }
                  $('.thrp-hhbrp-eligible').removeClass("hidden");
                }
              } else { //neither selected
                $('.thrp-not-enough-data').removeClass("hidden");
              }
            } else { //hasn't indicated tourism/hospitality yet
              $('.thrp-not-enough-data').removeClass("hidden");
            }
          }
        }
        checkWageEligibility();
      }

      var baseCRHPRem = 0;
      //update the CRHP base amount summary
      $(document).on("blur", "#crhp-base-rem", function (event) {
        baseCRHPRem = zeroIfEmpty($('#crhp-base-rem').val());
        $('.crhp-base-rem').text(toMoney.format(baseCRHPRem));
        validateCRHPBaseRem();
        calculateTotals(); //Or maybe 'clear chrp'?
      });
      $(document).on("blur", "#crhp-base-active-emps", function (event) {
        var baseCRHPEmps = zeroIfEmpty($('#crhp-base-active-emps').val());
        $('.total-active-emps-14').text(baseCRHPEmps);
        validateCRHPBaseRem();
      });

      function validateCRHPBaseRem() {
        var baseCRHPEmps = zeroIfEmpty($('#crhp-base-active-emps').val());
        if (baseCRHPEmps * 4516 < baseCRHPRem) {
          $('#crhp-base-summary').addClass("hidden");
          $('#crhp-base-over-max').removeClass("hidden");
          if (document.documentElement.lang == "fr") {
            $(".steps-wrapper:nth-child(3) button:contains('Suivant')").addClass("disabled");
            $(".steps-wrapper:nth-child(3) button:contains('Suivant')").attr("disabled", true);
          } else {
            $(".steps-wrapper:nth-child(3) button:contains('Next')").addClass("disabled");
            $(".steps-wrapper:nth-child(3) button:contains('Next')").attr("disabled", true);
          }
        } else {
          $('#crhp-base-summary').removeClass("hidden");
          $('#crhp-base-over-max').addClass("hidden");
          if (document.documentElement.lang == "fr") {
            $(".steps-wrapper:nth-child(3) button:contains('Suivant')").removeClass("disabled");
            $(".steps-wrapper:nth-child(3) button:contains('Suivant')").attr("disabled", false);
          } else {
            $(".steps-wrapper:nth-child(3) button:contains('Next')").removeClass("disabled");
            $(".steps-wrapper:nth-child(3) button:contains('Next')").attr("disabled", false);
          }
        }
      }

      // function uploadDealcsv () {}; 
      // /*------ Method for read uploded csv file ------*/
      // uploadDealcsv.prototype.getCsv = function(e) {
      //     let input = document.getElementById('p14csv');
      //     input.addEventListener('change', function() {
      //       if (this.files && this.files[0]) {
      //           var myFile = this.files[0];
      //           var reader = new FileReader();
      //           reader.addEventListener('load', function (e) {
      //               let csvdata = e.target.result; 
      //               parseCsv.getParsecsvdata(csvdata); // calling function for parse csv data 
      //           });
      //           reader.readAsBinaryString(myFile);
      //       }
      //     });
      //   }
      //   /*------- Method for parse csv data and display --------------*/
      //   uploadDealcsv.prototype.getParsecsvdata = function(data) {
      //       let parsedata = [];
      //       let newLinebrk = data.split("\n");
      //       var i = 0;
      //       for(i = 0; i < newLinebrk.length; i++) {
      //           parsedata.push(newLinebrk[i].split(","))
      //       }
      //       if (document.documentElement.lang == "fr") { //check that column headings are correct
      //         if (parsedata[0][1] != "Sansliendedépendance" || parsedata[0][2] != "Paieavantlacrise" || parsedata[0][3] != "Salairebruthebdomadairepourlapremièresemaine" || parsedata[0][4] != "Salairebruthebdomadairepourladeuxièmesemaine" || parsedata[0][5] != "Salairebruthebdomadairepourlatroisièmesemaine" || parsedata[0][6] != "Salairebruthebdomadairepourlaquatrièmesemaine" || parsedata[0][7] != "MontantdebaselaSSUCcalculée") {
      //           $('#crhp-csv-parse-error').removeClass("hidden");
      //           $('#crhp-base-manual').removeClass("hidden");
      //           $('#crhp-base-input').removeClass("hidden");
      //         } else {
      //           $('#crhp-csv-parse-error').addClass("hidden");
      //           $('#crhp-base-manual').addClass("hidden");
      //           $('#crhp-base-input').addClass("hidden");
      //         }
      //       } else {
      //         if (parsedata[0][1] != "Arm's length" || parsedata[0][2] != "Pre-crisis pay" || parsedata[0][3] != "Weekly gross pay for week 1" || parsedata[0][4] != "Weekly gross pay for week 2" || parsedata[0][5] != "Weekly gross pay for week 3" || parsedata[0][6] != "Weekly gross pay for week 4" || parsedata[0][7] != "Calculated basic CEWS amount") {
      //           $('#crhp-csv-parse-error').removeClass("hidden");
      //           $('#crhp-base-manual').removeClass("hidden");
      //           $('#crhp-base-input').removeClass("hidden");
      //         } else {
      //           $('#crhp-csv-parse-error').addClass("hidden");
      //           $('#crhp-base-manual').addClass("hidden");
      //           $('#crhp-base-input').addClass("hidden");
      //         }
      //       }
      //       var re = /[^\d.]/g;
      //       // if (parsedata[i][1] == "No") { //NAL employee
      //       //   p14rate = total / (Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(/[^\d.]\g,'')) + Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')))) 
      //       // } else {
      //       //   p14rate = total / (Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')))) 
      //       // }
      //       //   week1 = p14rate * Math.min(1129, parsedata[i][3], parsedata[i][2])
      //       //   week2 = p14rate * Math.min(1129, parsedata[i][4], parsedata[i][2])
      //       //   week3 = p14rate * Math.min(1129, parsedata[i][5], parsedata[i][2])
      //       //   week4 = p14rate * Math.min(1129, parsedata[i][6], parsedata[i][2])
      //       baseCRHPRem = 0;
      //       var week1 = 0, week2 = 0, week3 = 0, week4 = 0;
      //       for(i = 1; i < parsedata.length; i++) { //for each employee
      //         if (parsedata[i][1] == "No") { //NAL employee
      //           week1 = Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
      //           week2 = Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
      //           week3 = Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
      //           week4 = Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
      //         } else { //Arm's length
      //           week1 = Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,'')));
      //           week2 = Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,'')));
      //           week3 = Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,'')));
      //           week4 = Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')));
      //         }
      //         baseCRHPRem = baseCRHPRem + week1 + week2 + week3 + week4;
      //       }
      //       $('.total-active-emps-14').text(parsedata.length - 1);
      //       $('.crhp-base-rem').text(toMoney.format(baseCRHPRem));
      //       calculateTotals(); //Or maybe 'clear chrp'?
      //   }
      //   var parseCsv = new uploadDealcsv();
      //   parseCsv.getCsv();

      /**
       * calculate the cews rate reductions
       */
      var currentRevReduc = 0;
      var priorRevReduc = 0;
      var revReduction = 0;
      var revReductionCRHPcur = 0;
      var revReductionCRHPprev = 0;
      var claimPeriodRevReduction = 0;
      var topUpRate = 0;
      var cewsRate = 0;
      var crhpRate = 0;
      var baseRate = 0;
      var threeMonthReduction = 0;
      $document.on("blur", ".cews-rate-calc", function(event) {calculateRevenueDrop()});
      function calculateRevenueDrop() {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        var cewsRateElements = $('.cews-rate-calc');
        //find the claim month based on the chosen claim period 
        var claimMonth = getClaimMonth($("#claim-period").val());

        //Get claim months function??
        var monthsArray = getClaimMonths(claimMonth, claimPeriod);
        var months2019Array = getClaimMonths2019(claimMonth, claimPeriod);
        if (claimPeriod == 14 || claimPeriod == 26) { //use the other March 2019 input - display order swap
          months2019Array[0] = months2019Array[0] + '-2';
        }
        //get the previous month from the claim month
        var prevClaimMonth = claimMonth - 1;
        if (
            zeroIfEmpty($("#" + months2019Array[0] + "-no").val()) > 0 ||
            zeroIfEmpty($("#" + months2019Array[1] + "-no").val()) > 0
        ) {
          //get the value of the claim month
          var claimMonth2020Value = zeroIfEmpty($("#" + monthsArray[0] + "-no").val());
          var claimMonth2019Value = zeroIfEmpty($("#" + months2019Array[0] + "-no").val());
          //get the value of the previous month
          var prevClaim2020Value = zeroIfEmpty($("#" + monthsArray[1] + "-no").val());
          var prevClaim2019Value = zeroIfEmpty($("#" + months2019Array[1] + "-no").val());
          
          if (claimPeriod < 11) {
            //get the avg of the revenue from the previous three motnhs (2020)
            var threeMonthRev2020 = [
              zeroIfEmpty($("#" + monthsArray[3] + "-no").val()),
              zeroIfEmpty($("#" + monthsArray[2] + "-no").val()),
              zeroIfEmpty($("#" + monthsArray[1] + "-no").val())
            ];
            var threeMonthAvg2020 = (threeMonthRev2020[0] + threeMonthRev2020[1] + threeMonthRev2020[2]) / 3;
            //get the avg of the revenue from the previous three months (2019)
            var threeMonthRev2019 = [
              zeroIfEmpty($("#" + months2019Array[3] + "-no").val()),
              zeroIfEmpty($("#" + months2019Array[2] + "-no").val()),
              zeroIfEmpty($("#" + months2019Array[1] + "-no").val())
            ];
            var threeMonthAvg2019 = (threeMonthRev2019[0] + threeMonthRev2019[1] + threeMonthRev2019[2]) / 3;
            //get the rate reduction from the three month average
            if (threeMonthAvg2019 == 0) {
              threeMonthReduction = 0;
            } else {
              threeMonthReduction = (threeMonthAvg2019 - threeMonthAvg2020) / threeMonthAvg2019;
            }
          }
          //get the revenue reduction from claim/prev claim months from 2020 and 2019
          if (claimMonth2019Value == 0) {
            claimPeriodRevReduction = 0;
          } else {
            claimPeriodRevReduction = (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value;
          }
          if (claimMonth2019Value == 0) {
            revReduction = (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value;
            priorRevReduc = Math.max(0, (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value);
            currentRevReduc = 0;
          } else if (prevClaim2019Value == 0) {
            revReduction = (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value;
            priorRevReduc = 0;
            currentRevReduc = Math.max(0, (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value);
          } else {
            revReduction = Math.max(
              (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value,
              (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value
            );
            priorRevReduc = Math.max(0, (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value);
            currentRevReduc = Math.max(0, (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value);
          }
          if (claimPeriod > 16) {
            revReductionCRHPcur = roundPercUp(currentRevReduc);
            revReductionCRHPprev = roundPercUp(priorRevReduc);
          }
          if (claimPeriod > 10) {
            revReduction = parseFloat(revReduction).toFixed(4);
            threeMonthReduction = parseFloat(threeMonthReduction).toFixed(4);
          }
          //get the base rate
          baseRate = parseFloat(Math.max(getP5PlusBaseRate(revReduction), 0));
          //get the top-up rate - only applies to periods 5-21
          if (claimPeriod < 22) {
            if (claimPeriod > 10 || (claimPeriod > 7 && revReduction > threeMonthReduction)) {
              topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(revReduction), 0));
            } else {
              topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(threeMonthReduction), 0));
            }
          } else {
            topUpRate = 0;
          }
          
          if (claimPeriod > 10) {
            topUpRate = parseFloat(topUpRate).toFixed(4);
            baseRate = parseFloat(baseRate).toFixed(4);
          }
          //calculate the overall rate
          cewsRate = parseFloat(baseRate) + parseFloat(topUpRate);
          cewsRate = parseFloat(cewsRate).toFixed(4);

          $(".rate-formula-max").addClass("hidden");
          $(".rate-formula-u70").addClass("hidden");
          $(".rate-formula-u50").addClass("hidden");
          $(".rate-formula-0").addClass("hidden");
          $(".more-than-zero-revdrop").removeClass("hidden");
          if (revReduction == 0) {
            $(".rate-formula-0").removeClass("hidden");
            $(".more-than-zero-revdrop").addClass("hidden");
          } else if (revReduction < 0.5) {
            $(".rate-formula-u50").removeClass("hidden");
          } else if (revReduction < 0.7) {
            $(".rate-formula-u70").removeClass("hidden");
          } else if (revReduction >= 0.7) {
            $(".rate-formula-max").removeClass("hidden");
          }

          if (claimPeriod > 16) {
            if (elWageP == 2 || elWageP == 1) {
              $(".thrp-hhbrp-revd-eligible").removeClass("hidden");
              $(".thrp-hhbrp-revd-ineligible").addClass("hidden");
              if ((elWageP == 2 && revReduction < 0.5) || (elWageP == 1 && revReduction < 0.4)) { //HHBRP
                $(".thrp-hhbrp-revd-eligible").addClass("hidden");
                $(".thrp-hhbrp-revd-ineligible").removeClass("hidden");
              }
            } else {
              $(".thrp-hhbrp-revd-eligible").addClass("hidden");
              $(".thrp-hhbrp-revd-ineligible").addClass("hidden");
            }
            if ((revReductionCRHPcur <= 0 && revReductionCRHPprev <= 0 && claimPeriod == 17) || (revReductionCRHPcur <= 10 && revReductionCRHPprev <= 10 && claimPeriod > 17)) {
              cewsRate = 0;
              crhpRate = 0;
              $(".greater-than-10-drop").addClass("hidden");
              $(".less-than-10-drop").removeClass("hidden");
            } else if (((revReductionCRHPcur > 10 || revReductionCRHPprev > 10) && claimPeriod > 17) || ((revReductionCRHPcur > 0 || revReductionCRHPprev > 0) && claimPeriod == 17)) {
              var crhpRateScale = [50, 50, 50, 40, 30, 50, 50, 50, 50, 50, 50, 50]
              if ((revReduction <= 0.1 && claimPeriod > 17) || (revReduction <= 0 && claimPeriod == 17)) {
                $(".10drop").removeClass("hidden");
                if (revReduction == 0) {
                  $(".rate-formula-0").addClass("hidden");
                  $(".rate-formula-u50").removeClass("hidden");
                }
              } else {
                $(".10drop").addClass("hidden");
              }
              $(".crhp-rate").text(toPercent(crhpRateScale[claimPeriod - 17]));
              $(".greater-than-10-drop").removeClass("hidden");
              $(".less-than-10-drop").addClass("hidden");
              crhpRate = parseFloat("0." + crhpRateScale[claimPeriod - 17]);
            }
          } else {
            $(".greater-than-10-drop").removeClass("hidden");
            $(".less-than-10-drop").addClass("hidden");
          }

          if (cewsRate < 0.1) {
            $("#employees").addClass("hidden");
          }
          if (cewsRate < 0.75 && revReduction >= 0.3 && claimPeriod < 7) {
            //if safe harbour applies
            cewsRate = 0.75;
            $("#rate-reduction").addClass("hidden");
            $(".safe-harbour-show").removeClass("hidden");
            $(".safe-harbour-hide").addClass("hidden");
          } else {
            //if safe harbour doesn't apply
            $(".safe-harbour-show").addClass("hidden");
            $(".safe-harbour-hide").removeClass("hidden");
            //update the view and round down base and top up dates to nearest 2 decimals on the percentage
            if (claimPeriod < 22) {
              $(".top-up-rate").text(toPercent(roundPercDown(topUpRate)));
            }
            $(".base-rate").text(toPercent(roundPercDown(baseRate)));
          }
          if (claimPeriod < 11) {
            $(".rev-drop-top-up").text(toPercent(roundPercDown(threeMonthReduction)));
            $(".currentRevReduction").text(toPercent(roundPercDown(currentRevReduc)));
            $(".priorRevReduction").text(toPercent(roundPercDown(priorRevReduc)));
            $(".rev-reduc-base").text(toPercent(roundPercDown(revReduction)));
          } else {
            var displayRevReducCurrent = currentRevReduc * 100;
            var displayPriorReducCurrent = priorRevReduc * 100;
            var displayPrefReducCurrent = revReduction * 100;
            $(".currentRevReduction").text(toPercent(displayRevReducCurrent.toFixed(2)));
            $(".priorRevReduction").text(toPercent(displayPriorReducCurrent.toFixed(2)));
            $(".rev-reduc-base").text(toPercent(displayPrefReducCurrent.toFixed(2)));
          }
          if (claimPeriod > 7 && claimPeriod < 11) {
            if (revReduction > threeMonthReduction) {
              $(".rev-drop-top-up-higher").text(toPercent(roundPercDown(revReduction)));
            } else {
              $(".rev-drop-top-up-higher").text(toPercent(roundPercDown(threeMonthReduction)));
            }
          }
          var cewsRateDisplay = cewsRate * 100;
          cewsRateDisplay = cewsRateDisplay.toFixed(2);
          $(".cews-rate").text(toPercent(cewsRateDisplay));
          $("#employees").removeClass("hidden");
        } else {
          //if it can't compute because of 0 values, then reset calculation summary to 0
          $(".currentRevReduction").text(toPercent("0"));
          $(".priorRevReduction").text(toPercent("0"));
          $(".top-up-rate").text(toPercent("0"));
          $(".base-rate").text(toPercent("0"));
          $(".rev-drop-top-up").text(toPercent("0"));
          $(".rev-reduc-base").text(toPercent("0"));
          $(".cews-rate").text(toPercent("0"));
        }
        recalculateAllEmployees();
      }


      //Checkbox event listener
      $document.on("click", "input[type=checkbox]", function (event) {
        var target = event.target;
        //Check which radio button it is and which content it's show/hiding
        if (target.id == "jan-feb-closed") {
          if ($('#jan-feb-closed-inputs').is(":hidden")) {
            $('#jan-feb-closed-inputs').removeClass("hidden");
          } else {
            $('#jan-feb-closed-inputs').addClass("hidden");
          }
          calculateRevenueDropAlt();
        }
      });

      /**
       * calculate the cews rate reductions with alternate baseline
       */
      $document.on("blur", ".cews-rate-calc-alt", function(event) {calculateRevenueDropAlt()});
      $document.on("blur", "#jan-feb-closed-days", function(event) {calculateRevenueDropAlt()});
      function calculateRevenueDropAlt() {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        var cewsRateElements = $('.cews-rate-calc-alt');
        var janRev = zeroIfEmpty($("#2020-01-yes").val());
        var febRev = zeroIfEmpty($("#2020-02-yes").val());
        if (parseFloat(janRev) > 0 || parseFloat(febRev) > 0) {
          var baseRevTopUp = (janRev + febRev) / 2;
          if ($('#jan-feb-closed-inputs').is(":visible")) {
            var daysNotOperating = zeroIfEmpty($('#jan-feb-closed-days').val());
            var baseRev = ((janRev + febRev) / 2) * (60 / (60 - daysNotOperating));
          } else {
            var baseRev = (janRev + febRev) / 2;
          }
          
          //find the claim month based on the chosen claim period 
          var claimMonth = getClaimMonth($("#claim-period").val());
          var monthsArray = getClaimMonths(claimMonth, claimPeriod);

          //get the value of the claim month
          var claimMonthValue = zeroIfEmpty($("#" + monthsArray[0] + "-yes").val());
          //get the value of the previous month
          var prevClaimValue = zeroIfEmpty($("#" + monthsArray[1] + "-yes").val());
          //get the avg of the revenue from the last three months

          if (claimPeriod < 11) {
            var threeMoAgo = zeroIfEmpty($("#" + monthsArray[3] + "-yes").val());
            var twoMoAgo = zeroIfEmpty($("#" + monthsArray[2] + "-yes").val());
            var threeMonthAvg = (threeMoAgo + twoMoAgo + prevClaimValue) / 3;
            //get the rate reduction from the three month average
            threeMonthReduction = (baseRevTopUp - threeMonthAvg) / baseRevTopUp;
          }
          claimPeriodRevReduction = (baseRev - claimMonthValue) / baseRev;
          //get the revenue reduction
          revReduction = Math.max(
            (baseRev - claimMonthValue) / baseRev,
            (baseRev - prevClaimValue) / baseRev
          );
          currentRevReduc = Math.max(0, (baseRev - claimMonthValue) / baseRev);
          priorRevReduc = Math.max(0, (baseRev - prevClaimValue) / baseRev);
          if (claimPeriod > 16) {
            revReductionCRHPcur = roundPercUp(currentRevReduc);
            revReductionCRHPprev = roundPercUp(priorRevReduc);
          }
          if (claimPeriod > 10) {
            revReduction = parseFloat(revReduction).toFixed(4);
            threeMonthReduction = parseFloat(threeMonthReduction).toFixed(4);
          }
          //get the base rate
          baseRate = parseFloat(
            Math.max(getP5PlusBaseRate(revReduction), 0)
          );
          //get the top-up rate
          if (claimPeriod < 22) {
            if (claimPeriod > 10 || (claimPeriod > 7 && revReduction > threeMonthReduction)) {
              topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(revReduction), 0));
            } else {
              topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(threeMonthReduction), 0));
            }
          }
          if (claimPeriod > 10) {
            topUpRate = parseFloat(topUpRate).toFixed(4);
            baseRate = parseFloat(baseRate).toFixed(4);
          }
          //calculate the overall rate
          cewsRate = parseFloat(baseRate) + parseFloat(topUpRate);
          cewsRate = parseFloat(cewsRate).toFixed(4);

          $(".rate-formula-max").addClass("hidden");
          $(".rate-formula-u70").addClass("hidden");
          $(".rate-formula-u50").addClass("hidden");
          $(".rate-formula-0").addClass("hidden");
          $(".more-than-zero-revdrop").removeClass("hidden");
          switch (true) {
              case (revReduction == 0):
                  $(".rate-formula-0").removeClass("hidden");
                  $(".more-than-zero-revdrop").addClass("hidden");
                  break;
              case (revReduction < 0.5):
                  $(".rate-formula-u50").removeClass("hidden");
                  break;
              case (revReduction < 0.7):
                  $(".rate-formula-u70").removeClass("hidden");
                  break;
              case (revReduction >= 0.7):
                  $(".rate-formula-max").removeClass("hidden");
                  break;
          }
          if (claimPeriod > 16) {
            if (elWageP == 2 || elWageP == 3) {
              $(".thrp-hhbrp-revd-eligible").removeClass("hidden");
              $(".thrp-hhbrp-revd-ineligible").addClass("hidden");
              if ((elWageP == 2 && revReduction < 0.5) || (elWageP == 1 && revReduction < 0.4)) { //HHBRP
                $(".thrp-hhbrp-revd-eligible").addClass("hidden");
                $(".thrp-hhbrp-revd-ineligible").removeClass("hidden");
              }
            } else {
              $(".thrp-hhbrp-revd-eligible").addClass("hidden");
              $(".thrp-hhbrp-revd-ineligible").addClass("hidden");
            }
            if (revReductionCRHPcur <= 10 && revReductionCRHPprev <= 10 && claimPeriod > 17) {
              cewsRate = 0;
              crhpRate = 0;
              $(".greater-than-10-drop").addClass("hidden");
              $(".less-than-10-drop").removeClass("hidden");
            } else if (((revReductionCRHPcur > 10 || revReductionCRHPprev > 10) && claimPeriod > 17) || ((revReductionCRHPcur > 0 || revReductionCRHPprev > 0) && claimPeriod == 17)) {
              var crhpRateScale = [50, 50, 50, 40, 30, 50, 50, 50, 50, 50, 50, 50]
              if ((revReduction <= 0.1 && claimPeriod > 17) || (revReduction <= 0 && claimPeriod == 17)) {
                $(".10drop").removeClass("hidden");
                if (revReduction == 0) {
                  $(".rate-formula-0").addClass("hidden");
                  $(".more-than-zero-revdrop").removeClass("hidden");
                  $(".rate-formula-u50").removeClass("hidden");
                }
              } else {
                $(".10drop").addClass("hidden");
              }
              $(".crhp-rate").text(toPercent(crhpRateScale[claimPeriod - 17]));
              $(".greater-than-10-drop").removeClass("hidden");
              $(".less-than-10-drop").addClass("hidden");
              crhpRate = parseFloat("0." + crhpRateScale[claimPeriod - 17]);
            }
          } else {
            $(".greater-than-10-drop").removeClass("hidden");
            $(".less-than-10-drop").addClass("hidden");
          }
          
          if (cewsRate < 0.1) {
            $("#employees").addClass("hidden");
          }
          if (cewsRate < 0.75 && revReduction >= 0.3 && claimPeriod < 7) {
            //if safe harbour applies
            cewsRate = 0.75;
            $("#rate-reduction").addClass("hidden");
            $(".safe-harbour-show").removeClass("hidden");
            $(".safe-harbour-hide").addClass("hidden");
          } else {
            //if safe harbour doesn't apply
            $(".safe-harbour-show").addClass("hidden");
            $(".safe-harbour-hide").removeClass("hidden");
            //update the view and round down base and top up dates to nearest 2 decimals on the percentage
            if (claimPeriod < 22) {
              $(".top-up-rate-alt").text(toPercent(roundPercDown(topUpRate)));
            }
            $(".base-rate-alt").text(toPercent(roundPercDown(baseRate)));
          }
          if (claimPeriod > 7 && claimPeriod < 11) {
            if (revReduction > threeMonthReduction) {
              $(".rev-drop-top-up-higher-alt").text(toPercent(roundPercDown(revReduction)));
            } else {
              $(".rev-drop-top-up-higher-alt").text(toPercent(roundPercDown(threeMonthReduction)));
            }
          }
          if (claimPeriod < 11) {
            $(".rev-drop-top-up-alt").text(toPercent(roundPercDown(threeMonthReduction)));
            $(".currentRevReduction-alt").text(toPercent(roundPercDown(currentRevReduc)));
            $(".priorRevReduction-alt").text(toPercent(roundPercDown(priorRevReduc)));
            $(".rev-reduc-alt-base").text(toPercent(roundPercDown(revReduction)));
          } else {
            var displayRevReducCurrent = currentRevReduc * 100;
            var displayPriorReducCurrent = priorRevReduc * 100;
            var displayPrefReducCurrent = revReduction * 100;
            $(".currentRevReduction-alt").text(toPercent(displayRevReducCurrent.toFixed(2)));
            $(".priorRevReduction-alt").text(toPercent(displayPriorReducCurrent.toFixed(2)));
            $(".rev-reduc-alt-base").text(toPercent(displayPrefReducCurrent.toFixed(2)));
          }
          var cewsRateDisplay = cewsRate * 100;
          cewsRateDisplay = cewsRateDisplay.toFixed(2);
          $(".cews-rate-alt").text(toPercent(cewsRateDisplay));
          $("#employees").removeClass("hidden");
        } else {
          //if it can't compute because of 0 values, then reset calculation summary to 0
          $(".currentRevReduction-alt").text(toPercent(0));
          $(".priorRevReduction-alt").text(toPercent(0));
          $(".top-up-rate-alt").text(toPercent(0));
          $(".base-rate-alt").text(toPercent(0));
          $(".rev-drop-top-up-alt").text(toPercent(0));
          $(".rev-reduc-alt-base").text(toPercent(0));
          $(".cews-rate-alt").text(toPercent(0));
        }
        recalculateAllEmployees();
      }


      /**
       * getClaimMonths()
       * returns an array of the 4 months with year and prefix based on the claim month
       */
      function getClaimMonths(claimMonth, claimPeriod) {
        var monthsArray = [claimMonth, claimMonth - 1, claimMonth - 2, claimMonth - 3];
        //Adding a 0 in front of a month in case it was single digit
        for (var i = 0; i < monthsArray.length; i++) {
          if (monthsArray[i] <= 0) { //non-months
            monthsArray[i] += 12;
          }
          if (monthsArray[i].toString().match(/^[1-9]$/)) { //checking for single digit, in which case add 0 ahead of it
            monthsArray[i] = "0" + monthsArray[i];

          }
          //get the year for the month based on period
          if (claimPeriod < 11) {
            monthsArray[i] = "2020-" + monthsArray[i];
          } else if (claimPeriod < 15) {
            if (parseInt(monthsArray[i]) > 5) {
              monthsArray[i] = "2020-" + monthsArray[i];
            } else {
              monthsArray[i] = "2021-" + monthsArray[i];
            }
          } else if (claimPeriod < 24) {
            monthsArray[i] = "2021-" + monthsArray[i];
          } else {
            if (parseInt(monthsArray[i]) > 5) {
              monthsArray[i] = "2021-" + monthsArray[i];
            } else {
              monthsArray[i] = "2022-" + monthsArray[i];
            }
          }
        }
        return monthsArray;
      }
       /**
       * getClaimMonths2019()
       * returns an array of the 4 months adjusted for year 2019
       */
       function getClaimMonths2019(claimMonth, claimPeriod) {
        var monthsArray = [claimMonth, claimMonth - 1, claimMonth - 2, claimMonth - 3];
        
        //Adding a 0 in front of a month in case it was single digit
        for (var i = 0; i < monthsArray.length; i++) {
          if (monthsArray[i] <= 0) { //negative numbers
            monthsArray[i]+= 12;
          }
          if (monthsArray[i].toString().match(/^[1-9]$/)) { //checking for single digit, in which case add 0 ahead of it
            monthsArray[i] = "0" + monthsArray[i];
          }
          if (claimPeriod < 11) {
            monthsArray[i] = "2019-" + monthsArray[i];
          } else {
            if ((claimPeriod < 14 && parseInt(monthsArray[i]) > 5) || (parseInt(monthsArray[i]) > 2)) {
              monthsArray[i] = "2019-" + monthsArray[i];
            } else {
              monthsArray[i] = "2020-" + monthsArray[i];
            }
          }
        }
        return monthsArray;
      }
      /**
       * roundPercDown()
       * round the given percent value to two decimal places
       */
      function roundPercDown(perc) {
        perc = perc * 10000;
        perc = Math.floor(perc);
        perc = perc / 100;
        return perc;
      }

      function roundPercUp(perc) {
        perc = perc * 10000;
        perc = Math.ceil(perc);
        perc = perc / 100;
        return perc;
      }

      /**
      * Apply the transforms necessary for FR vs EN syntax of percentages
      */
      function toPercent(percentage) {
        if (document.documentElement.lang == "fr") {
          return parseFloat(percentage).toFixed(2) + '\xa0%';
        } else {
          return parseFloat(percentage).toFixed(2) + '%';
        }
      }


      /**
       * zeroIfEmpty()
       * return 0 if the number cannot be parsed into a float; does not account * for letter values.
       */
      function zeroIfEmpty(fieldVal) {
        if (fieldVal != null && fieldVal != "") {
          return parseFloat(fieldVal);
        } else {
          return 0;
        }
      }

      /**
       * getMonthNamesPlusYear()
       *
       * get the name of the claim month and previous month
       *
       * @param {iMonth} integer the month expressed as an integer
       * YYYY-MM-DD--YYYY--MM-DD format
       *
       * @return {claimMonths} the 2 months that the CERS period overlaps
       */
      function getMonthNamesPlusYear(iMonth, claimPeriod) {
        if (document.documentElement.lang == "fr") {
          var monthNames = ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre"];
        } else {
          var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        }
        var claimMonths = [monthNames[iMonth - 2], monthNames[iMonth - 1]];
        if (iMonth == 1) {
          if (document.documentElement.lang == "fr") {
            claimMonths[0] = "décembre";
          } else {
            claimMonths[0] = "December";
          }
        }
        //add years
        if (claimPeriod < 4) {
          claimMonths[0] = claimMonths[0] + ' 2020';
          claimMonths[1] = claimMonths[1] + ' 2020';
        } else if (claimPeriod == 4) {
          claimMonths[0] = claimMonths[0] + ' 2020';
          claimMonths[1] = claimMonths[1] + ' 2021';
        } else {
          claimMonths[0] = claimMonths[0] + ' 2021';
          claimMonths[1] = claimMonths[1] + ' 2021';
        }
        return claimMonths;
      }

      //update the employee wages summary when the arms length value is changed
      $(document).on("change", "select[id^='arms-']", function (event) {
        //get the employee number
        var target = event.target;
        var id = target.id.split('-')[1];
        //trigger the blur event on all the inputs for the employees wages to recalculate
        $("#wkone-" + id).blur();
        $("#wktwo-" + id).blur();
        $("#wkthree-" + id).blur();
        $("#wkfour-" + id).blur();
      });
      //update the employee wage summary when the baseline value is changed
      $(document).on("blur", "input[id^='baseline-']", function (event) {
        //get the employee number
        var target = event.target;
        var id = target.id.split('-')[1];
        //trigger the blur event on all the inputs for the employees wages to recalculate
        $("#wkone-" + id).blur();
        $("#wktwo-" + id).blur();
        $("#wkthree-" + id).blur();
        $("#wkfour-" + id).blur();
      });

      /**
       * run the blur event for the wage input when the corresponding leave 
       * with pay option is checked
       */
      $(document).on("click", ".emp-lv > *", function (event) {
        leaveWithPayStateChanged(event);
      });
      function leaveWithPayStateChanged(event) {
        var target = null;
        //keypress event will send the checkbox as the event target
        if (event.target.nodeName == 'INPUT') {
          target = $("label[for='" + event.target.id + "']");
        } else {
          target = event.target;
        }
        var forValue = $(target).attr("for");
        var parts = forValue.split('-');
        var wageInputId = parts[0] + '-' + parts[2];
        $("#" + wageInputId).blur();
      }

      //send data to fields in 2B (need to add French text)
			
     //Changed to target NEXT button instead of push to 2b button (might not be needed);
			$(document).on("click", ".steps-wrapper:nth-child(5) button:contains('Next')", function (event) {
        calculateTotals();
      });
      $(document).on("click", ".steps-wrapper:nth-child(5) button:contains('Suivant')", function (event) {
        calculateTotals();
      });


      $(document).on("blur", "#p2c-ee-alt2", function(event) {
        if (event.target.value == 0) {
          $("#p3-ei").prop("readonly", true);
          $("#p3-ei").val("0.00");
          $("#p3-cpp").prop("readonly", true);
          $("#p3-cpp").val("0.00");
          $(".p3-ee-req").addClass("hidden");
          $(".no-lwp-disclaimer").removeClass("hidden");
        } else {
          $("#p3-ei").prop("readonly", false);
          $("#p3-ei").val("");
          $("#p3-cpp").prop("readonly", false);
          $("#p3-cpp").val("");
          $(".no-lwp-disclaimer").addClass("hidden");
          $(".p3-ee-req").removeClass("hidden");
        }
      });


      //update percentage summary elements in 2B
      $(document).on("blur", "#p2b-c0", function (event) {
        $("output[for='p2b-c0']").text(toPercent(zeroIfEmpty(event.target.value)));
      });
      //update percentage summary elements in 2B 
      $(document).on("blur", "#p2b-c1", function (event) {
        $("output[for='p2b-c1']").text(toPercent(zeroIfEmpty(event.target.value)));
      });
      $(document).on("blur", "#p2b-c2", function (event) {
        $("output[for='p2b-c2']").text(toPercent(zeroIfEmpty(event.target.value)));
      });
      $(document).on("blur", "#p2b-c3", function (event) {
        $("output[for='p2b-c3']").text(toPercent(zeroIfEmpty(event.target.value)));
      });

      /**
       * getClaimMonth()
       * 
       * get the month where the claim period mostly falls
       * 
       * @param {Int} dateRange the claim period dates in 
       * YYYY-MM-DD--YYYY--MM-DD format
       * 
       * @return {Int} the claim month in numeric form 
       */
      var date1Max = 0;
      function getClaimMonth(dateRange) {
        var dates = dateRange.split('--');
        var date1Arr = dates[0].split("-");
        var date2Arr = dates[1].split("-");
        date1Arr[1] = date1Arr[1] - 1;
        date2Arr[1] = date2Arr[1] - 1;
        var date1 = new Date(Date.UTC(date1Arr[0], date1Arr[1], date1Arr[2]));
        var date2 = new Date(Date.UTC(date2Arr[0], date2Arr[1], date2Arr[2]));
        var date1Counter = 0;
        var date1Month = date1.getUTCMonth();
        var date2Counter = 0;
        var date2Month = date2.getUTCMonth();
        if (dateRange == "2020-12-20--2021-01-16") { //period 11/4 was arbitrarily defined differently from this rule...
          var claimMonth = date1Month + 1;
          return pad(claimMonth, 2);
        } else if (dateRange == "2022-01-16--2022-02-12" || dateRange == "2022-02-13--2022-03-12" || dateRange == "2022-03-13--2022-04-09" || dateRange == "2022-04-10--2022-05-07") {
          return date2Month + 1;
        }
        if (date1Month == date2Month) {
          return date1Month + 1;
        }
        while (date1Month == date1.getUTCMonth()) {
          date1Counter++;
          date1.setUTCDate(date1.getUTCDate() + 1);
        }
        while (date2Month == date2.getUTCMonth()) {
          date2Counter++;
          date2.setUTCDate(date2.getUTCDate() - 1);
        }
        if (parseInt(date1Counter) < parseInt(date2Counter)) {
          return date2Month + 1;
        } else if (parseInt(date1Counter) > parseInt(date2Counter)) {
          return date1Month + 1;
        } else {
          return null;
        }
      }

      //https://stackoverflow.com/questions/2998784/how-to-output-numbers-with-leading-zeros-in-javascript
      function pad(num, size) {
        num = num.toString();
        while (num.length < size) num = "0" + num;
        return num;
      }

      /**
       * Calculate the top up rate
       * 
       * @param {Float} reduction the percentage average three month revenue 
       * reduction represented as a decimal
       *
       * @return {Float} the top up rate
       */
      function getP5PlusTopUpRate(reduction) {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        var topUpMultiplier = [1.25, 1.25, 1.25, 1.25, 1.25, 1.25, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.25, 0.75, 0.75, 0.5];
        var topUpMax = [0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.35, 0.35, 0.35, 0.35, 0.35, 0.35, 0.35, 0.25, 0.15, 0.15, 0.1];
        $('.scaleTopUp').text(topUpMultiplier[claimPeriod - 5]);
        if (topUpMultiplier[claimPeriod - 5] * (reduction - 0.5) > topUpMax[claimPeriod - 5]) {
          return topUpMax[claimPeriod - 5];
        } else {
          return topUpMultiplier[claimPeriod - 5] * (reduction - 0.5);
        }
      }

      /**
       * Calculate the base rate
       * @param {Float} revReduction the revenue reduction percentage 
       * represented as a decimal
       *  
       * @return {Float} the calculated base rate
       */
      function getP5PlusBaseRate(revReduction) {
        //max base and period for P5+
        var period = $("#claim-period option:selected").data("claim-period");
        var maxBase = [];
        var scaleBase = [];
        var minBase = [];
        var additonalPercentage = [];
        var adjP = 5;
        if (period < 22) { //CEWS
          maxBase = [0.6, 0.6, 0.5, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.35, 0.25, 0.25, 0.1];
          scaleBase = [1.2, 1.2, 1.0, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.875, 0.625, 0.625, 0.25];
          additonalPercentage = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        } else if (elWageP == 1) { //THRP
          if (revReduction < 0.4) {
            return 0;
          }
          maxBase = [0.75, 0.75, 0.75, 0.75, 0.75, 0.375, 0.375];
          scaleBase = [1, 1, 1, 1, 1, 0.5, 0.5];
          additonalPercentage = [0, 0, 0, 0, 0, 0, 0];
          adjP = 22;
        } else if (elWageP == 2) { //HHBRP
          if (revReduction < 0.5) {
            return 0;
          }
          maxBase = [0.5, 0.5, 0.5, 0.5, 0.5, 0.25, 0.25];
          scaleBase = [1.6, 1.6, 1.6, 1.6, 1.6, 0.8, 0.8];
          additonalPercentage = [0.1, 0.1, 0.1, 0.1, 0.1, 0.05, 0.05];
          adjP = 22;
        }
        $('.scaleBase').text(scaleBase[period - adjP]);
        if (period > 17) {
          if (elWageP == 2) { //hhbrp
            revReduction = revReduction - 0.5;
          } else if (elWageP == 3) {
            revReduction = revReduction - 0.1;
          }
        }
        if (additonalPercentage[period - adjP] + scaleBase[period - adjP] * revReduction >= maxBase[period - adjP]) {
          return maxBase[period - adjP];
        } else {
          return additonalPercentage[period - adjP] + scaleBase[period - adjP] * revReduction;
        }
      }

      /**
       * Calculate the employee CEWS amount with the p1-4 formula
       *
       * @param {Boolean} armsLength whether the employee is at arms length
       * @param {Int} weeklyRemun the employees weekly pay being calculated
       * @param {Int} baselineRemun the employees baseline pre-crisis pay
       *
       * @return {Int} the calculated weekly CEWS amount 
       */
      function oldFormula(armsLength, weeklyRemun, baselineRemun) {
        if (armsLength) {
          return Math.max(
            Math.min(0.75 * weeklyRemun, 847),
            Math.min(0.75 * baselineRemun, weeklyRemun, 847)
          );
        } else {
          return Math.max(0, Math.min(847, weeklyRemun, baselineRemun * 0.75));
        }
      }

      /**
       * Calculate the employee cews amount with the P5+ formula
       *
       * @param {Boolean} armsLength whether the employee is at arms length
       * @param {Int} weeklyRemun the employees weekly pay being calculated
       * @param {Int} baselineRemun the employees baseline pre-crisis pay
       * @param {String} overall the overall CEWS rate 
       *  
       * @return {Int} the calculated weekly CEWS amount    
       */
      function newFormula(armsLength, weeklyRemun, baselineRemun, overall) {
        if (armsLength) {

          return Math.min(1129, weeklyRemun) * overall;
        } else {
          return Math.min(1129, weeklyRemun, baselineRemun) * overall;
        }
      }

      // Bind the init event of the plugin
      $document.on("timerpoke.wb " + initEvent, selector, init);
      // Add the timer poke to initialize the plugin
      wb.add(selector);
    })(jQuery, window, wb);
    $(document).on("wb-ready.wb", function () {
      $("#rate-reduction").addClass("hidden");
      $("#reduction-percent-panel").addClass("hidden");
    });
    // TODO: Escape commas and whitespaces in input[type=number] in IE and Edge(Trident)

    //fix for duplicated popup trigger
    $(document).on("click", ".arms-length-def", function (event) {
      showPopup("armslength");
    });
    $(document).on("click", ".baseline-rem-def", function (event) {
      showPopup("baseline-rem");
    });
    $(document).on("click", ".pay-claim-def", function (event) {
      showPopup("pay-claim");
    });
    $(document).on("click", ".toCSV", function (event) {
      export_table_to_csv("employee-cews.csv");
    });

    /**
     * export_table_to_csv
     *
     * https://jsfiddle.net/gengns/j1jm2tjx/
     */
    function export_table_to_csv(filename) {
      var csv = [];
      var rows = $("#dataset-filter tr");
      for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td, th");

        for (var j = 0; j < cols.length; j++) {
          if (document.documentElement.lang == "fr") {
            var val = cols[j].innerText.replace(",", ".");
            val = val.replace(/,/g, ".")
            val = val.replace(/\s/g, "")
            row.push(val);
          } else {
            row.push(cols[j].innerText.replace(",", ""));
          }
        }

        csv.push(row.join(","));
      }
      // Download CSV
      download_csv(csv.join("\n"), filename);
    }
    /**
     * download_csv
     *
     * https://jsfiddle.net/gengns/j1jm2tjx/
     * 
     */
    function download_csv(csv, filename) {
      var csvFile;
      var downloadLink;

      // CSV FILE
      csv = "\uFEFF" + csv;
      csvFile = new Blob([csv], { type: "text/csv", encoding: "UTF-8" });

      // Download link
      downloadLink = document.createElement("a");

      // File name
      downloadLink.download = filename;

      // We have to create a link to the file
      downloadLink.href = window.URL.createObjectURL(csvFile);

      // Make sure that the link is not displayed
      downloadLink.style.display = "none";

      // Add the link to your DOM
      document.body.appendChild(downloadLink);

      // Lanzamos
      downloadLink.click();
    }

    /**
     * required to allow duplicated popup buttons to open the associated popup
     */
    function showPopup(id) {
      (function ($, wb) {
        'use strict';
        var $document = wb.doc;
        $document.trigger("open.wb-lbx", [
          [
            {
              src: "#" + id,
              type: "inline"
            }
          ],
          false
        ]);
      })(jQuery, wb);
    }

    


    $(document).on("blur", "input[id^='ee-name-']", function(event) {
      var className = $(event.target).prop("id");
      var empNumber = $(event.target).prop('id').split("-")[2];
      var displays = $("span." + className);
      var displayValue = "";
      if (empNumber > 0 && event.target.value == "") {
        displayValue = "Employee " + empNumber;
      } else {
        displayValue = event.target.value;
      }
      $(displays).each(function(i, element) {
        $(element).text(displayValue);
      });
    });
  </script> 
  <script>

      $(".action-checkbox").change(function () {
        if ($('.action-checkbox:checked').length == $('.action-checkbox').length) {
          $("#action-msg1").removeClass("hidden").addClass("visible");
          $("#action-no-msg").addClass("hidden").removeClass("visible");
        }
        if ($('.action-checkbox:checked').length !== $('.action-checkbox').length) {
          $("#action-msg1").addClass("hidden").removeClass("visible");
          $("#action-no-msg").removeClass("hidden").addClass("visible");
        }
      })
    </script>
	
<!---Adds target=_blank and text/icon to ajaxed hyperlinks //-->	
<script>
  $(function(){
    $('.wb-lbx').one( 'click', function( event){
      if (document.documentElement.lang.toLowerCase() === "en"){
        $('.modal-content [data-ajax-replace] a:not([target=_blank])').attr('target', '_blank').append('<span class="wb-inv"> (open in new window)</span><span class="mrgn-lft-sm far fa-window-restore"></span>');
      };
      if (document.documentElement.lang.toLowerCase() === "fr"){
        $('.modal-content [data-ajax-replace] a:not([target=_blank])').attr('target', '_blank').append('<span class="wb-inv"> (s&#39;ouvre dans une nouvelle fenêtre)</span><span class="mrgn-lft-sm far fa-window-restore"></span>');
      };	
    });
  });
</script>
		
</body>
</html>
