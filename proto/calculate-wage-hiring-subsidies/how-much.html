<!DOCTYPE html>
<html class="no-js" lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
<title>Calculate your CEWS or CRHP amount – Canada.ca</title>
<meta content="width=device-width,initial-scale=1" name="viewport" />
<meta name="robots" content="noindex" />
<!-- Meta data -->

<!-- Load closure template scripts -->

<script type="text/javascript"
    src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_39/cdts/compiled/soyutils.js"></script>
<script type="text/javascript"
    src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_39/cdts/compiled/wet-en.js"></script>
<link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet" />
<link href="../css/cews.css" rel="stylesheet" />
<link href="../css/checkbox-radio-cers.css" rel="stylesheet" />
	<link href="http://test.canada.ca/cra/css/and-or.css" rel="stylesheet" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
<!-- Write closure template -->
<script type="text/javascript">
    document.write(wet.builder.refTop({
    }));
  </script>
<style>
.provisional.wb-steps .wb-tggle-fildst > legend:before {
	background-color: #fff;
	padding: 4px;
	-webkit-border-radius: 50%;
	-moz-border-radius: 50%;
	border-radius: 50%;
	border: 3px solid #6f6f6f;
	height: 1.2em;
	width: 1.2em;
	box-sizing: content-box;
	margin-right: 10px;
	display: inline-block;
	text-align: center;
	line-height: 1.2;
	content: counter(fieldset_counter);
}
.panel-default > .panel-heading.wb-steps-active {
	background-color: #fff;
}
.provisional.wb-steps .wb-tggle-fildst > legend.wb-steps-active:before {
	background-color: #1c578a;
	border-color: #1c578a;
	color: #fff;
}
.provisional.wb-steps .wb-tggle-fildst > legend:not(.wb-steps-active) {
	font-size: 18px;
}
.provisional.wb-steps .wb-tggle-fildst > legend.wb-steps-active {
	font-weight: bold;
}
fieldset +.buttons {
	margin-left: 15px;
}
.wb-steps-active .panel-title {
	font-size: 1.3em;
}
	fieldset fieldset {min-width: 1px;}
.ds-example {
	margin-top: 15px;
	border: 1px solid #e3e3e3;
	box-shadow: 0px 0px 8px #e3e3e3;
}
.ds-example>.wb-tabs>.tabpanels {
	background: #f9f9f9;
}
.ds-example>.wb-tabs>.tabpanels legend {
	font-size: 80%;
	font-weight: 700;
	margin: 0 0 5px;
}
.ds-example>.wb-tabs>.tabpanels fieldset {
	padding-top: 0;
}
.ds-example>.wb-tabs>.tabpanels>details>summary {
	background: #fff;
	border-radius: 0;
}
.ds-example>.wb-tabs [role=tablist]>li:focus, .ds-example>.wb-tabs [role=tablist]>li:hover {
	background: #ddd;
}
.ds-example>.wb-tabs {
	margin-bottom: 0;
}
.ds-example>.wb-tabs>.tabpanels>details {
	margin-bottom: 0;
}
.ds-example .panel-body {
	box-shadow: none;
}

@media screen and (max-width: 991px) {
.ds-example>.wb-tabs .tgl-panel {
	margin-top: 15px;
}
}

@media screen and (min-width: 992px) {
.ds-example>.wb-tabs>.tabpanels>details {
	border: none;
	padding: 15px;
}
.ds-example>.wb-tabs [role=tablist]>li {
	border: none;
	background: none;
}
.ds-example>.wb-tabs [role=tablist]>li.active a {
	border-width: 0 0 4px;
}
.ds-example>.wb-tabs>.tabpanels>details {
	padding: 30px;
}
.ds-example>.wb-tabs>.tabpanels>details {
	background: #f9f9f9;
	padding: 30px;
	margin-bottom: 0;
}
}
</style>
</head>

<body vocab="http://schema.org/" typeof="WebPage">
<div id="def-top"> </div>
<!-- Write closure template --> 
<script type="text/javascript">
    var defTop = document.getElementById("def-top");
    defTop.outerHTML = wet.builder.top({
      lngLinks: [{

        lang: "fr",
        href: "../wage-subsidy/cews-how-much-mt-fr.html",
        text: "Français"
      }],
      breadcrumbs: [{
        title: "Canada.ca",
        href: "https://www.canada.ca/en.html"
      }, {
        title: "Business and industry",
        href: "https://www.canada.ca/en/services/business.html"
      // }, {
      //   title: "Canada Emergency Wage Subsidy (CEWS)",
      //   href: "index.html"
      }],
      search: true,
      siteMenu: true,
      showPreContent: true
    });
  </script>
<main property="mainContentOfPage" class="container">
  <h1 property="name" id="wb-cont">Calculate your CEWS or CRHP amount</h1>

  <div data-wb-urlmapping='{
		"subsidy=cews":
			[{
				"action": "removeClass",
				"source": ".breadcrumb li:nth-child(3)",
				"class": "hidden"
			}, {
				"action": "addClass",
				"source": ".breadcrumb li:nth-child(4)",
				"class": "hidden"
			}],
			"subsidy=crhp":
			[{
				"action": "removeClass",
				"source": ".breadcrumb li:nth-child(4)",
				"class": "hidden"
			}, {
				"action": "addClass",
				"source": ".breadcrumb li:nth-child(3)",
				"class": "hidden"
			}] 
		}'></div>
<h2 class="h3 mrgn-tp-sm">On this page</h2>
<ul>
  <!-- <li><a href="#h-1">How the calculator helps you</a></li> -->
  <li><a href="#h-1">Wage and hiring subsidies</a>
  <li><a href="#h-2">Before you start the calculation</a></li>
  <li><a href="#h-3">Use the calculator</a></li>
</ul>
<h2 id="h-1">Wage and hiring subsidies</h2>
	<p>Use this calculator to:</p>
	<ul>
		<li>calculate amounts for both the Canada Emergency Wage Subsidy (CEWS) and the Canada Recovery Hiring Program (CRHP)</li>
		<li>see which subsidy gives you the higher amount, so you know which one to apply for</li>
		<li>get the line-by-line amounts you will need to enter in the application form</li>
	</ul>
<p>To learn more about the subsidies and check if you're eligible, refer to:</p>
<ul>
  <li><a href="http://test.canada.ca/covid-19-guidance/proto/wage-subsidy/emergency-wage-subsidy.html">Canada Emergency Wage Subsidy (CEWS)</a></li>
  <li><a href="http://test.canada.ca/covid-19-guidance/proto/hiring-program/recovery-hiring-program.html">Canada Recovery Hiring Program (CRHP)</a></li>
</ul>

<!-- <h2 id="h-1">How the calculator helps you</h2>
<p>Use this calculator to calculate amounts for both the Canada Emergency Wage Subsidy (CEWS) and the Canada Recovery Hiring Program (CRHP) to determine which one to apply for and the amounts to include in your application.</p>
<ol>
  <li>Calculate your subsidy amount by entering employee pay information</li>
  <li>Print and save the numbers you'll need to enter when you apply</li>
  <li>Apply for the subsidy online through My Business Account, Represent a Client, or the Web Forms application using the information you printed</li>
</ol>
<p>You can currently use the calculator for claim periods 1 to . More periods will be added as they become available. </p>
<p>The calculator has been updated to include <a href="cews-what-changes.html">changes to the period 8 to 10 top-up calculation finalized on November 17th</a>. It automatically applies the best subsidy rate you qualify for (including applying any safe harbour and deeming rules) based on information you enter. </p>
<p>To understand the math behind the wage subsidy calculation, refer to <a href="../wage-subsidy/cews-how-much-version-math.html">how the subsidy is calculated</a>.</p> -->

  <h2 id="h-2">Before you start the calculation</h2>
  <p class="lead">Check these boxes to confirm you are prepared before you start your calculations:</p>

    <ul class="checkbox-lg checkbox-zebra">
      <li class="checkbox">
        <input type="checkbox" id="bfore1" class="action-checkbox">
        <label for="bfore1">You are an eligible employer during this claim period</label>
        <ul class="mrgn-lft-lg list-unstyled">
          <li><a href="../wage-subsidy/cews-who-apply.html">Who can apply for CEWS</a></li>
          <li><a href="../hiring-program/crhp-who-apply.html">Who can apply for CRHP</a></li>
        </ul>
      </li>
      <li class="checkbox">
        <input type="checkbox" id="bfore2" class="action-checkbox">
        <label for="bfore2"><strong>Both of the following apply:</strong></label>
        <div class="cnjnctn-type-and mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore2" class="p-0">You know which of your employees are eligible for this claim period</label>
            </p>
            <ul class="mrgn-lft-lg list-unstyled">
              <li><a href="../wage-subsidy/cews-who-employees.html">Which of your employees qualify for CEWS</a></li>
              <li><a href="../hiring-program/crhp-who-employees.html">Which of your employees qualify for CRHP</a></li>
            </ul>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore2" class="p-0">You have access to their pay information</label>
            </p>
            <ul class="mrgn-lft-lg list-unstyled">
              <li><a href="../wage-subsidy/cews-who-employees.html#h-2">Determining employee pay (eligible remuneration)</a></li>
            </ul>
          </div>
        </div>
      </li>
      <li class="checkbox">
        <input type="checkbox" id="bfore3" class="action-checkbox">
        <label for="bfore3"><strong>Both of the following apply:</strong></label>
        <div class="cnjnctn-type-and mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore3" class="p-0">You know if you had any eligible employees on leave with pay for any full weeks
                during the claim period</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#lwp" aria-controls="lwp" class="wb-lbx" role="button">Active employees and employees on
                leave with pay&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore3" class="p-0">You have calculated the employer portion of their EI, QPIP, CPP and QPP
                contributions during the claim
                period</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#contributions" aria-controls="contributions" class="wb-lbx" role="button">EI, QPIP,
                CPP and QPP contributions&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
          </div>
        </div>
      </li>
      <li class="checkbox">
        <input type="checkbox" id="bfore4" class="action-checkbox">
        <label for="bfore4">You have your monthly eligible revenue amounts from the current period and prior to March, 2020</label>
      </li>
      <!-- <li class="checkbox">
        <input type="checkbox" id="bfore5" class="action-checkbox">
        <label for="bfore5"><strong>One of the following applies:</strong></label>
        <div class="cnjnctn-type-or mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You are calculating a claim for period 5 or later, and you understand that the 10%
                wage subsidy does not apply</label>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You are calculating a claim for periods 1 to 4, and you know the amount (if any) you calculated for the 10% wage subsidy</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#tempwage" aria-controls="tempwage" class="wb-lbx" role="button">10% Temporary Wage
                Subsidy for Employers program amount&nbsp;<span class="far fa-question-circle"></span></a> </li>
            </ul>
          </div>
        </div>
      </li> -->
      <li class="checkbox">
        <input type="checkbox" id="bfore5" class="action-checkbox">
        <label for="bfore5"><strong>One of the following applies:</strong></label>
        <div class="cnjnctn-type-or mrgn-lft-lg">
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You know the total amount your eligible employees received under the
                Work-Sharing benefit program through Employment Insurance for this claim period</label>
            </p>
            <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#worksharing" aria-controls="worksharing" class="wb-lbx" role="button">Work-Sharing
                benefit program through Employment Insurance amount&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
          </div>
          <div class="cnjnctn-col">
            <p>
              <label for="bfore5" class="p-0">You did not participate in the Work-Sharing program (enter $0)</label>
            </p>
          </div>
        </div>
      </li>
    </ul>
    <div class="alert alert-warning provisional" id="action-no-msg">
      <p class="h4 mrgn-tp-0 text-warning">Before you proceed</p>
      <p>You should understand the definitions and gather all the necessary information before you calculate
        your claim.</p>
    </div>
    <div class="alert alert-success hidden provisional" id="action-msg1">
      <p class="h4 mrgn-tp-0 text-success">You can now proceed</p>
      <p>Go ahead and calculate the amounts you will need for your claim. </p>
    </div>
<h2 id="h-3">Choose your calculator</h2>
<div class="cnjnctn-type-or cnjnctn-sm wb-eqht mrgn-bttm-xl" data-wb-actionmng='[
      { "trggroup":"clearFilter", "action": "removeClass", "source": ".btn-cews-cal", "class": "btn-primary" } ]'>
  <div class="cnjnctn-col">
    <div id="calc-pnl" class="eqht-trgt">
      <p class="h5 mrgn-tp-sm"><span class="wb-inv">Option 1 of 2, </span>You may prefer the online calculator if you:</p>
      <ul class="mrgn-bttm-0">
        <li>can enter employee pay on a weekly basis, and</li>
        <li>expect to complete your calculation now</li>
      </ul>
    </div>
    <a href="#cal-calc" type="button" id="show-online-calc" class="btn btn-default mrgn-tp-md btn-block" >Online calculator</a>
  </div>
  <div class="cnjnctn-col">
    <div class="eqht-trgt">
      <p class="h5 mrgn-tp-sm"><span class="wb-inv">Option 2 of 2,</span>Choose the spreadsheet if you:</p>
      <ul class="mrgn-bttm-0">
        <li>want to enter pay on a bi-weekly basis</li>
        <li>want to save your calculation and come back to it later</li>
      </ul>
    </div>
    <a href="#cews-cal-opt1" type="button" id="show-sprdsht" class="btn btn-default mrgn-tp-md btn-block" >Downloadable calculation spreadsheet</a>
  </div>
</div>
<div id="cews-cal-opt1" class="hidden" aria-live="polite">
  <p class="h4 mrgn-tp-0">Calculation spreadsheet </p>
  <div class="alert alert-warning provisional">
    <p>All claim period spreadsheets now include every calculation field needed to proceed directly to the application form. Using the online calculator after you use the spreadsheet to finalize your claim amount is no longer required.</p>
    <p>Please check that you made your calculations with the most recent version.</p>
  </div>
  <div class="wb-frmvld">
    <form>
      <div class="wb-fieldflow" data-wb-fieldflow='{"noForm": true, "default":{"action": "addClass", "source": "#cal-sprdsht-none", "class": "hidden", "live": true}}'>
        <p> Select a claim period</p>
        <ul>
          <li>CEWS and CRHP
            <ul>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p17", "live": true}'>Period 17: June 6 to July 3, 2021</li>
            </ul>
          </li>
          <li>CEWS only
            <ul>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true}'>Period 16: May 9 to June 5, 2021</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true}'>Period 15: April 11 to May 8, 2021</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true}'>Period 14: March 14 20 to April 10, 2021</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true}'>Period 13: February 14 to March 13, 2021</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true}'>Period 12: January 17 to February 13, 2021</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p11", "live": true}'>Period 11: December 20, 2020, to January 16, 2021</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p9", "live": true}'>Period 10: November 22 to December 19, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p9", "live": true}'>Period 9: October 25 to November 21, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p7", "live": true}'>Period 8: September 27 to October 24, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p7", "live": true}'>Period 7: August 30 to September 26, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p5", "live": true}'>Period 6: August 2 to August 29, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprsht-p5", "live": true}'>Period 5: July 5 to August 1, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true}'>Period 4: June 7 to July 4, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true}'>Period 3: May 10 to June 6, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true}'>Period 2: April 12 to May 9, 2020</li>
              <li data-wb-fieldflow='{"action": "toggle", "toggle": "#cal-sprdsht-p1-4", "live": true}'>Period 1: March 15 to April 11, 2020</li>
            </ul>
          </li>
        </ul>
      </div>
    </form>
  </div>
  <div id="cal-sprdsht-none">
    <p class="mrgn-bttm-0">
      <button class="btn btn-primary btn-lg" disabled>Download the spreadsheet (Excel)</button>
      <br>
      Please select a claim period to download the spreadsheet</p>
  </div>
  <div id="cal-sprsht-p17" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-crhp-calculation-p17-20.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for period 17 to 20 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2021-1</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for period 11 to 16
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2021-01-17 06:00"><span class="nowrap">2021-01-17</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p11" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p11-13.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for period 11 to 16 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2021-6</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for period 11 to 16
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2021-04-30 15:00"><span class="nowrap">2021-04-30</span><br>
                  <span class="nowrap">15:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-6</td>
              <td><ul>
                  <li>Added help text to explain why 2019 months are now being used for the revenue drop (no calculation change)</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-04-14 10:00"><span class="nowrap">2021-04-14</span><br>
                  <span class="nowrap">10:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-5</td>
              <td><ul>
                  <li>Rates summary for periods 14, 15 and 16 all said period 13 in the summary heading (no calculation changes)</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-03-26 03:00"><span class="nowrap">2021-03-26</span><br>
                  <span class="nowrap">03:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-4</td>
              <td><ul>
                  <li>Added periods 14-16</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-02-08 09:00"><span class="nowrap">2021-02-08</span><br>
                  <span class="nowrap">09:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-3</td>
              <td><ul>
                  <li>Updated the notes describing the revenue drop months and top up rate (no calculation changes)</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-01-20 14:05"><span class="nowrap">2021-01-20</span><br>
                  <span class="nowrap">14:05:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-2</td>
              <td><ul>
                  <li>Rounding applied to the revenue drop before the rate calculations to align with validation on the application form</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2021-01-17 06:00"><span class="nowrap">2021-01-17</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2021-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p9" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p9-10.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for period 9 to 10 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-2</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for period 9 to 10
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-12-22 08:45"><span class="nowrap">2020-12-22</span><br>
                  <span class="nowrap">08:45:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>Updated the help text to display weekly/bi-weekly date ranges correctly for period 10 on the step 2 tabs</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-11-30 06:00"><span class="nowrap">2020-11-30</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p7" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p7-8.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for period 7 to 8 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-5</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates for the spreadsheet for period 7 to 8
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-11-30 06:00"><span class="nowrap">2020-11-30</span><br>
                  <span class="nowrap">06:00:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-5</td>
              <td><ul>
                  <li>Updated list formatting on row 8 for paid leave</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-11-25 08:30"><span class="nowrap">2020-11-25</span><br>
                  <span class="nowrap">08:30:00 (EST)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-4</td>
              <td><ul>
                  <li>Updated description of the bi-weekly pre-crisis pay heading</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-11-23 06:00"><span class="nowrap">2020-11-23</span><br>
                  <span class="nowrap">06:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-3</td>
              <td><ul>
                  <li>Add new top-up calculation</li>
                  <li>Update information about calculating pre-crisis pay</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-10-28 06:00"><span class="nowrap">2020-10-28</span><br>
                  <span class="nowrap">06:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>Add period 8</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-09-23 11:30"><span class="nowrap">2020-09-23</span><br>
                  <span class="nowrap">11:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprsht-p5" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p5-6.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for period 5 to 6 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-5</p>
    <details class="small mrgn-bttm-lg">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-08-21 11:00"><span class="nowrap">2020-08-21</span><br>
                  <span class="nowrap">11:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-5</td>
              <td><ul>
                  <li>Changed negative revenue reduction amounts for line c1 of the application </li>
                  <li>Applies safe harbour rule when the revenue drop is exactly 30.00% (unless
                    your revenue drop is exactly 30.00%, this will not affect your calculation) </li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-19 12:30"><span class="nowrap">2020-08-19</span><br>
                  <span class="nowrap">12:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-4</td>
              <td><ul>
                  <li>Added capability to extend formulas for more than 2500 employees</li>
                  <!--li>Corrected maximum bi-weekly amount (Step 2b) for non-arm’s length employees when the employer revenue reduction is under 30% for the period</li-->
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-17 17:30"><span class="nowrap">2020-08-17</span><br>
                  <span class="nowrap">17:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-3</td>
              <td><ul>
                  <li>Corrected calculation issue of the Base Rate when businesses were using the
                    alternate baseline calculation method and did not carry on business for the
                    entirety of January to February</li>
                  <!--li>Corrected maximum bi-weekly amount (Step 2b) for non-arm’s length employees when the employer revenue reduction is under 30% for the period</li-->
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-13 10:00"><span class="nowrap">2020-08-13</span><br>
                  <span class="nowrap">10:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>Corrected eligibility validation of employees with 14 or more days gap in
                    employment for periods 5+</li>
                  <li>Updated compatibility with older versions of Excel</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-08-11 08:00"><span class="nowrap">2020-08-11</span><br>
                  <span class="nowrap">08:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <div id="cal-sprdsht-p1-4" class="hidden">
    <p class="mrgn-bttm-0"><a href="cews-calculation-p1-4.xlsx" class="btn btn-primary btn-lg">Download the spreadsheet for period 1 to 4 (Excel)</a></p>
    <p class="small mrgn-bttm-0">Current version: 2020-9</p>
    <details class="small">
      <summary>Version updates</summary>
      <div class="table-responsive">
        <table class="table small">
          <caption class="wb-inv">
          Version updates
          </caption>
          <thead>
            <tr>
              <th scope="col">Release<br class="visible-xs">
                date</th>
              <th scope="col">Version</th>
              <th scope="col">Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><time datetime="2020-08-19 12:30"><span class="nowrap">2020-08-19</span><br>
                  <span class="nowrap">12:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-9</td>
              <td><ul>
                  <li>Added capability to extend formulas for more than 2500 employees</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-08-14 11:45"><span class="nowrap">2020-08-14</span> <br>
                  <span class="nowrap">11:45:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-8</td>
              <td><ul>
                  <li>Corrected baseline remuneration options for period 4</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-08-13 10:00"><span class="nowrap">2020-08-13</span> <br>
                  <span class="nowrap">10:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-7</td>
              <td><ul>
                  <li>Fixed formula reference for weekly tab</li>
                  <li>Updated compatibility with older versions of Excel</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-08-11 08:00"><span class="nowrap">2020-08-11</span> <br>
                  <span class="nowrap">08:00:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-6</td>
              <td><ul>
                  <li>New options for period to use for employee baseline pay</li>
                  <li>New revenue drop calculation feature for eligibility</li>
                  <li>Step by step tabs</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-06-25 17:30"><span
              class="nowrap">2020-06-25</span> <br>
                  <span class="nowrap">17:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-5</td>
              <td><ul>
                  <li>Add period 4</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-04-27 16:15"><span
              class="nowrap">2020-04-27</span> <br>
                  <span class="nowrap">16:15:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-4</td>
              <td><ul>
                  <li>Text updates (change does not affect calculation)</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-04-24 19:15"><span
              class="nowrap">2020-04-24</span> <br>
                  <span class="nowrap">19:15:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-3</td>
              <td><ul>
                  <li>Batch rows moved to a separate sheet</li>
                  <li>Layout updates to make the spreadsheet easier to complete</li>
                  <li>More detailed instructions on how to input amounts and avoid errors</li>
                  <li>Rounding made more accurate</li>
                </ul></td>
            </tr>
            <tr>
              <td class="nowrap"><time datetime="2020-04-21 16:12"><span
              class="nowrap">2020-04-22</span> <br>
                  <span class="nowrap">12:45:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-2</td>
              <td><ul>
                  <li>On the “Instructions and results” worksheet, the "Total Gross Payroll" label
                    has
                    been renamed to "Total eligible remuneration", so it matches the corresponding
                    web
                    application form label</li>
                </ul></td>
            </tr>
            <tr>
              <td><time datetime="2020-04-21 20:00"><span class="nowrap">2020-04-21</span><br>
                  <span class="nowrap">09:30:00 (EDT)</span></time></td>
              <td class="nowrap">Version<br class="visible-xs">
                2020-1</td>
              <td><ul>
                  <li>Initial worksheet</li>
                </ul></td>
            </tr>
          </tbody>
        </table>
      </div>
    </details>
  </div>
  <p class="small">(If you don't have Excel, you can open the spreadsheet in free solutions like
    Google Sheets, Numbers or OpenOffice.)</p>
  <p><strong>Note:</strong> If you have an employee that also works for a related eligible
    employer, you may need to manually adjust the information you enter in the spreadsheet. The
    combined total CEWS or CRHP amount that can be claimed for an employee between you and any
    related eligible employers for each week can't exceed <!--$847-->the maximum amount for an employee. A related eligible employer is
    any eligible employer that you do not deal with on an arm’s-length basis.</p>
  <details>
    <summary>Example of an adjustment for an employee working for related entities</summary>
    <p>Westside Restaurant Ltd. (WRL) and Eastside Bar Ltd. (EBL) are both owned by the same
      person. Mary works full time at WRL but also works weekends at EBL. Mary earns $1000 per
      week at WRL and another $300 per week at EBL.</p>
    <p>Using the calculation spreadsheet, WRL determines the CEWS amount related to Mary for the
      week is $750 (75% of $1000). When EBL uses the calculation spreadsheet it shows a CEWS
      amount of $225 (75% of $300) for Mary. However, the total of those two amounts ($750 +
      $225) is $975 – which exceeds the maximum of $847 by $128.</p>
    <p>The claim amount of WRL or EBL will need to be manually reduced by a total of $128 so
      that the total CEWS amount related to Mary does not exceed the $847 maximum for that week. </p>
  </details>
</div>	
<div id="cal-calc" class="hidden"  aria-live="polite">
<details>
  <summary>Privacy statement: This calculator does not collect or store your information</summary>
  <p>The CRA is not collecting or retaining any of the information you enter on this page or in the calculation
    spreadsheet. These amounts are only used to help you determine the amount of CEWS or CRHP you may be eligible to
    claim. You may be required to provide a full list of your employees and their Social Insurance Numbers (SIN)
    for verification after you apply.</p>
</details>
<p><strong class="text-warning">Warning:</strong> This is an online calculator estimator, <strong>not the application</strong>. This page does not save any data, so you leave or refresh the page you may need to enter the information again.</p>
<div class="wb-frmvld provisional wb-steps">
  <form action="#" method="get" id="steps-example" class="panel panel-default">
    <fieldset id="claim-period-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title" tabindex="0">Claim period</span></legend>
      <div class="panel-body">
        <div class="form-group">
          <label for="claim-period" class="control-label required mrgn-tp-md"><span class="field-name">Select the period
            you are claiming for</span> <strong class="required">(required)</strong></label>
          <select required id="claim-period" class="form-control input-lg">
            <option value=""> Select a claim period</option>
            <optgroup label="CEWS or CRHP">
              <!-- <option data-claim-period="22" value="2021-10-24--2021-11-20">Period 22: October 24 to November 11, 2021</option>
              <option data-claim-period="21" value="2021-09-26--2021-10-23">Period 21: September 26 to October 23, 2021</option>
              <option data-claim-period="20" value="2021-08-29--2021-09-25">Period 20: August 29 to September 25, 2021</option>
              <option data-claim-period="19" value="2021-08-01--2021-08-22">Period 19: August 1 to August 28, 2021</option>
              <option data-claim-period="18" value="2021-07-04--2021-07-31">Period 18: July 4 to July 31, 2021</option> -->
              <option data-claim-period="17" value="2021-06-06--2021-07-03">Period 17: June 6 to July 3, 2021</option>
            </optgroup>
            <optgroup label="CEWS">
              <option data-claim-period="16" value="2021-05-09--2021-06-05">Period 16: May 9 to June 5, 2021</option>
              <option data-claim-period="15" value="2021-04-11--2021-05-08">Period 15: April 11 to May 8, 2021</option>
              <option data-claim-period="14" value="2021-03-14--2021-04-10">Period 14: March 14 to April 10, 2021</option>
              <option data-claim-period="13" value="2021-02-14--2021-03-13">Period 13: February 14 to March 13, 2021</option>
              <option data-claim-period="12" value="2021-01-17--2021-02-13">Period 12: January 17, to February 13, 2021</option>
              <option data-claim-period="11" value="2020-12-20--2021-01-16">Period 11: December 20, 2020, to January 16, 2021</option>
              <option data-claim-period="10" value="2020-11-22--2020-12-19">Period 10: November 22 to December 19, 2020</option>
              <option data-claim-period="9" value="2020-10-25--2020-11-21">Period 9: October 25 to November 21, 2020</option>
              <option data-claim-period="8" value="2020-09-27--2020-10-24">Period 8: September 27 to October 24, 2020</option>
              <option data-claim-period="7" value="2020-08-30--2020-09-26">Period 7: August 30 to September 26, 2020</option>
              <option data-claim-period="6" value="2020-08-02--2020-08-29">Period 6: August 2 to August 29, 2020</option>
              <option data-claim-period="5" value="2020-07-05--2020-08-01">Period 5: July 5 to August 1, 2020</option>
              <option data-claim-period="4" value="2020-06-07--2020-07-04">Period 4: June 7 to July 4, 2020</option>
              <option data-claim-period="3" value="2020-05-10--2020-06-06">Period 3: May 10 to June 6, 2020</option>
              <option data-claim-period="2" value="2020-04-12--2020-05-09">Period 2: April 12 to May 9, 2020</option>
              <option data-claim-period="1" value="2020-03-15--2020-04-11">Period 1: March 15 to April 11, 2020</option>
            </optgroup>
          </select>
        </div>
      </div>
    </fieldset>
    <fieldset id="questionaire" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0" tabindex="0"><span class="panel-title">CRHP eligibility and employee remuneration for the base period</span></legend>
      <div class="panel-body">
        <div class="row hidden" id="no-crhp-message">
          <div class="col-sm-8 col-md-9">
            <!-- <div class="alert alert-info"> -->
            <p class="mrgn-tp-lg">The CRHP is only available starting in claim period 17.</p>
            <p>Continue to the next step to calculate the CEWS.</p>
          </div>
        </div>
        <div class="row" id="crhp-questions">
          <div class="col-sm-8 col-md-9">
            <fieldset class="provisional gc-chckbxrdio chckbxrdio-grpsubfields">
              <legend class="small required"><span class="field-name">Are you eligible for the Canada Recovery Hiring Program (CRHP)?</span> <strong class="required">(required)</strong></legend>
              <details>
                <summary>Eligibility requirements for the CRHP</summary>
                <p>To be eligible for CRHP, you must meet all the eligibility criteria for CEWS. However, you are not eligible for CRHP if you are a corporation, unless you are a Canadian-Controlled Private Corporation (CCPC) or a corporate co-operative that is eligible for the <a href="https://www.canada.ca/en/revenue-agency/services/forms-publications/publications/t4012/t2-corporation-income-tax-guide-chapter-4-page-4-t2-return.html#P2862_208254">small business subsidy</a>.</p>
                <p>For more details, see <a href="../crhp-who-apply.html">Who can apply for CRHP</a>.</p>
              </details>
              <ul class="list-unstyled lst-spcd-2">
                <li class="radio">
                  <input type="radio" name="crhp-eligibility" value="Yes" id="elig-type-yes" class="valid" aria-invalid="false" required="required">
                  <label for="elig-type-yes">Yes</label>
                </li>
                <li class="radio">
                  <input type="radio" name="crhp-eligibility" value="No" id="elig-type-no" class="valid" aria-invalid="false" required="required">
                  <label for="elig-type-no">No</label>
                </li>
              </ul>
            </fieldset>
            
            <div class="hidden" id="crhp-base-q1">
              <fieldset class="provisional gc-chckbxrdio chckbxrdio-grpsubfields">
                <legend class="small required"><span class="field-name">Have you already calculated the total eligible remuneration paid to all your active employees for the base period of March 14 to April 10, 2021 (CRHP base remuneration)?</span> <strong class="required">(required)</strong></legend>
		                  <ul class="list-unstyled mrgn-lft-lg">
              <li><a href="#lwp" aria-controls="lwp" class="wb-lbx" role="button">Active employees and employees on leave with pay&nbsp;<span class="far fa-question-circle"></span></a></li>
            </ul>
                <ul class="list-unstyled lst-spcd-2">
                  <li class="radio">
                    <input type="radio" name="crhp-base-ready" value="Yes" id="crhp-base-yes" class="valid" aria-invalid="false" required="required">
                    <label for="crhp-base-yes">Yes</label>
                  </li>
                  <li class="radio">
                    <input type="radio" name="crhp-base-ready" value="No" id="crhp-base-no" class="valid" aria-invalid="false" required="required">
                    <label for="crhp-base-no">No</label>
                  </li>
                </ul>
              </fieldset>

              <div class="hidden" id="crhp-base-q2">
                <fieldset class="provisional gc-chckbxrdio chckbxrdio-grpsubfields">
                  <legend class="small required"><span class="field-name">Did you use CRA's online calculator for CEWS in period 14 and save your downloaded employee-by-employee information? (.CSV file type)</span> <strong class="required">(required)</strong></legend>
                  <ul class="list-unstyled lst-spcd-2">
                    <li class="radio">
                      <input type="radio" name="crhp-csv" value="Yes" id="crhp-csv-yes" class="valid" aria-invalid="false" required="required">
                      <label for="crhp-csv-yes">Yes</label>
                    </li>
                    <li class="radio">
                      <input type="radio" name="crhp-csv" value="No" id="crhp-csv-no" class="valid" aria-invalid="false" required="required">
                      <label for="crhp-csv-no">No</label>
                    </li>
                    <li class="radio">
                      <input type="radio" name="crhp-csv" value="Did not calculate CEWS in period 14" id="crhp-csv-no-calc" class="valid" aria-invalid="false" required="required">
                      <label for="crhp-csv-no-calc">Did not calculate CEWS in period 14</label>
                    </li>
                  </ul>
                </fieldset>

                <div class="hidden" id="crhp-base-csv">
                  <h3>Step 1: Edit the period 14 employee information CSV file to remove any amounts given to employees on paid leave</h3>
                  <p>Employees on paid leave cannot be included in the calculation for the CRHP.</p>
                  <p>If your CEWS claim included some amounts for employees who were on paid leave during the period, you will need to:</p>
                  <ul>
                    <li>open the period 14 employee information CSV file on your device (a spreadsheet program works best)</li>
                    <li>manually change any amounts that relate to weeks where an employee was on paid leave to $0</li>
                    <li>save the edited CSV file somewhere you will be able to find it for step 2, and for future CRHP claims</li>
                  </ul>
                  <h3>Step 2: Choose your edited period 14 CSV file from your device</h3>
                  <p>Your remuneration for the CRHP base period will be calculated using the file.</p>
                  <input type="file" id="p14csv" class="form-control" />
                </div>
                
                <div class="provisional alert alert-warning hidden" id="crhp-csv-parse-error">
                  <h3>We could not understand the information in your CSV</h3>
                  <p>Make sure:</p>
                  <ul>
                    <li>you chose the right file</li>
                    <li>the file ends with .csv</li>
                    <li>the file has the same headings and formatting as when you downloaded it</li>
                    <li>the file does not include any remuneration that was for employees on paid leave</li>
                    <li>if you are using a French CSV, you are using the French version of this calculator</li>
                  </ul>
                  <p>Correct the CSV file and try again, or calculate your CRHP remuneration for the base period using the method below.</p>
                 </div>

                <div class="hidden" id="crhp-base-manual">
                  <h3>Calculate your CRHP base remuneration</h3>
                  <p>The calculator has been updated as of <mark>[date this page is published]</mark> to calculate your CRHP base remuneration. CRHP base remuneration is the total eligible remuneration you paid to all your active eligible employees during the base period for CRHP (March 14 to April 10, 2021, which is CEWS period 14).</p>
                  <p>This amount is <strong>not</strong> the same as the CEWS total remuneration. You will need to redo your period 14 calculation to get the CRHP amount.</p>
                  <ol>
                    <li>Go back to Step 1 of this calculator and select <strong>Period 14: March 14 to April 10, 2021</strong>.</li>
                    <li>Complete the calculator for claim period 14, following the instructions for that claim period.</li>
                    <li><strong>Save your CRHP base remuneration</strong> amount from the final summary.<br />Because the base period for CRHP remuneration is the same for all claim periods, you can use this CRHP base remuneration amount for all your future CRHP calculations.</li>
                    <li>Enter the amount below and continue your <span class="claim-period"></span> calculation.</li>
                  </ol>
                </div>
              </div>
  
              <div class="hidden" id="crhp-base-input">
                <div class="form-group row">
                  <fieldset>
                    <!-- <legend class="small required"><span class="field-name">Enter your base remuneration for the CRHP (March 14 to April 10, 2021)</span> <strong class="required">(required)</strong></legend> -->
                    <label class="col-sm-12 control-label" for="crhp-base-rem">CRHP base remuneration<span class="wb-inv"> (do not include a dollar sign, spaces or commas)</span></label>
                    <div class="col-sm-3">
                      <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                        <input type="number" class="form-control text-right currency" name="crhp-base-rem" id="crhp-base-rem" size="10" placeholder="0.00">
                      </div>
                    </div>
                    <label class="col-sm-12 control-label" for="crhp-base-active-emps">Eligible active employees for period 14 (line A of your calculation)<span class="wb-inv"> (do not include a dollar sign, spaces or commas)</span></label>
                    <div class="col-sm-3">
                      <div class="input-group"> 
                        <input type="number" class="form-control text-right" name="crhp-base-active-emps" id="crhp-base-active-emps" size="5" placeholder="0">
                      </div>
                    </div>
                  </fieldset>
                </div>
                <a class="btn btn-default">Update your base remuneration</a>
              </div>

            </div>

            <div class="well text-muted mrgn-tp-md hidden" id="crhp-eligibility-summary">
              <h3 class="mrgn-tp-0">Summary of CRHP base remuneration</h3>
              <div id="crhp-base-summary">
                <p>Your <strong>CRHP base remuneration</strong> is <span class="crhp-base-rem h4">$0</span></p>
                <p>You had <strong><span class="total-active-emps-14">0</span></strong> eligible active employees (employees not on paid leave) during the base period for CRHP remuneration.</p>
              </div>
              <p class="hidden" id="crhp-ineligible">Continue to the next step to calculate the CEWS only.</p>
            </div>

          </div>
          <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Review your summary</a></p>
          </div>
        </div>
      </div>
    </fieldset>
	  
	  <!--EDITING PAUSED HERE-->

    <fieldset id="rev-drop-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0" tabindex="0"><span class="panel-title">Revenue drop and subsidy rate</span></legend>
      <div class="panel-body">
        <div class="row">
          <div class="col-sm-8 col-md-9  mrgn-tp-md">
            <div class="cal-calc">
              <p><a class="wb-lbx" role="button" aria-controls="baseline-optns" href="#baseline-optns">Compare the pre-crisis revenue <span class="nowrap">options<span class="mrgn-lft-sm far fa-question-circle"></span></span></a></p>
              <fieldset class="provisional gc-chckbxrdio chckbxrdio-grp subfields">
                <legend class="small required" ><span class="field-name">Which pre-crisis revenue comparison option will you use for this claim?</span> (You must use the same option as other CEWS, CERS, and CRHP claims.) <strong class="required">(required)</strong></legend>
                <!-- this location closed for over 1 week during the period due to a COVID-19 public health restriction? -->
                <ul class="list-unstyled lst-spcd-2">
                  <li class="radio">
                    <input type="radio" name="rev-comp" id="rev-comp-yes" class="valid" aria-invalid="false" required="required">
                    <label for="rev-comp-yes">Compare claim month to same month in a prior year (e.g. June 2021 with June 2019)</label>
                  </li>
                  <li class="radio">
                    <input type="radio" name="rev-comp" id="rev-comp-no" class="valid" aria-invalid="false" required="required">
                    <label for="rev-comp-no">Compare claim month to average of January and February 2020 (alternative prior reference period) </label>
                  </li>
                </ul>
              </fieldset>
              <div class="alt-bl-no hidden" id="alt-bl-no">
                <fieldset>
                  <legend class="mrgn-bttm-0">Enter your eligible revenue for the following months</legend>
                  <p><a class="wb-lbx" role="button" aria-controls="eligible-rev" href="#eligible-rev">Eligible revenue<span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                  <p class="small text-muted mrgn-tp-lg" aria-hidden="true">Do not include <strong>spaces,
                    commas,</strong> or a <strong>dollar sign</strong></p>
                  <div class="row">
                    <div class="col-md-6 brdr-rght">
                      <p><strong>Prior year revenue</strong></p>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-03-no">March 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-03-no" id="2019-03-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-04-no">April 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"  name="2019-04-no" id="2019-04-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-05-no">May 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-05-no" id="2019-05-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-06-no">June 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-06-no" id="2019-06-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-07-no">July 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-07-no" id="2019-07-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-08-no">August 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-08-no" id="2019-08-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-09-no">September 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-09-no" id="2019-09-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-10-no">October 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-10-no" id="2019-10-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-11-no">November 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-11-no" id="2019-11-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2019-12-no">December 2019<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2019-12-no" id="2019-12-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-01-no">January 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency" name="2020-01-no" id="2020-01-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-02-no">February 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-02-no" id="2020-02-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <p><strong>Current revenue</strong></p>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-04-no">April 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-04-no" id="2020-04-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-05-no">May 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-05-no" id="2020-05-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-06-no">June 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-06-no" id="2020-06-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-07-no">July 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-07-no" id="2020-07-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-08-no">August 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-08-no" id="2020-08-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-09-no">September 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-09-no" id="2020-09-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-10-no">October 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-10-no" id="2020-10-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-11-no">November 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-11-no" id="2020-11-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-12-no">December 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2020-12-no" id="2020-12-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-01-no">January 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-01-no" id="2021-01-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-02-no">February 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-02-no" id="2021-02-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-03-no">March 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-03-no" id="2021-03-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-04-no">April 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-04-no" id="2021-04-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-05-no">May 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-05-no" id="2021-05-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-06-no">June 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-06-no" id="2021-06-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-07-no">July 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-07-no" id="2021-07-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-08-no">August 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-08-no" id="2021-08-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-09-no">September 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-09-no" id="2021-09-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-10-no">October 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-10-no" id="2021-10-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-11-no">November 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc currency"     name="2021-11-no" id="2021-11-no" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </fieldset>
                <div class="well text-muted mrgn-tp-md">
                  <h3 class="mrgn-tp-0">Summary of revenue drop and subsidy rates</h3>
                  <ul class="small">
                    <li>Your <strong>current period revenue drop</strong> is <span class="currentRevReduction h4">0%</span></li>
                    <li class="brdr-bttm">Your <strong>previous period revenue drop</strong> is <span class="priorRevReduction h4">0%</span></li>
                    <div class="safe-harbour-hide">
                      <p class="greater-than-10-drop">Because the higher of these revenue drops is <span class="h4 mrgn-tp-0 rev-reduc-base">0%</span>, your base rate is <span class="h4 mrgn-tp-0 base-rate">0%</span> <span class="p11-plus hidden"> and your top-up rate is <span class="top-up-rate h4">0%</span></span></p>
                      <p class="less-than-10-drop">Because your revenue drop is less than 10%, your base rate is <span class="h4 mrgn-tp-0">0%</span> and your top-up rate is <span class="h4">0%</span></p>
                    </div>
                    <div class="p8-plus hidden">
                      <li>Your <strong>higher base revenue drop</strong> is <span class="rev-reduc-base h4">0%</span></li>
                      <li class="brdr-bttm">Your <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up h4">0%</span></li>
                      <p>Because the higher of these revenue drops is <span class="h4 rev-drop-top-up-higher">0%</span>, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate">0%</span></p>
                    </div>
                    <div class="p7-and-before">
                      <p class="mrgn-bttm-md"><span class="safe-harbour-hide">Because your</span><span class="safe-harbour-show hidden">Your</span> <strong>average revenue drop for the
                        previous three months</strong> is <span class="rev-drop-top-up h4">0%</span><span class="safe-harbour-hide">, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate">0%</span></span></p>
                    </div>
                  </ul>
                  <hr class="brdr-bttm">
                  <p>Your <strong>overall CEWS rate</strong> <span class="safe-harbour-hide small">(<span class="base-rate">0%</span> base rate + <span class="top-up-rate">0%</span> top-up
                    rate)</span> for claim period <span class="claim-period-no">(choose a claim
                    period)</span> is <span class="cews-rate h3 mrgn-tp-0 badge mrgn-bttm-0" id="">0%</span> </p>
                  <p class="safe-harbour-show hidden mrgn-lft-md small">You qualify for the “safe harbour”
                    rate of 75% because your revenue drop in the current or previous period was at least 30%. </p>
                  <div class="crhp-eligible">
                    <p class="mrgn-bttm-md greater-than-10-drop hidden"><span class="p18-plus">Because your revenue drop is 10% or more, your</span><span class="p17-only">Your</span> <strong>CRHP rate</strong> is <span class="h4 margn-tp-0 crhp-rate"></span></p>
                    <p class="mrgn-bttm-md less-than-10-drop"><span class="p18-plus">Because your revenue drop is less than 10%, you</span><span class="p17-only">Because your revenue did not drop, you</span> <strong>do not qualify</strong> for the CRHP.</p>
                  </div>
                </div>
              </div>
              <div class="alt-bl-yes hidden" id="alt-bl-yes">
                <fieldset class="subfields">
                  <legend class="mrgn-bttm-0">Enter your eligible revenue for the following months</legend>
                  <p><a class="wb-lbx" role="button" aria-controls="eligible-rev" href="#eligible-rev">Eligible revenue<span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                  <p class="small text-muted  mrgn-tp-lg" aria-hidden="true">Do not include <strong>spaces,
                    commas,</strong> or a <strong>dollar sign</strong></p>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-01-yes">January 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-01-yes" id="2020-01-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-02-yes">February 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-02-yes" id="2020-02-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-04-yes">April 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-04-yes" id="2020-04-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-05-yes">May 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-05-yes" id="2020-05-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-06-yes">June 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-06-yes" id="2020-06-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-07-yes">July 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-07-yes" id="2020-07-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-08-yes">August 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-08-yes" id="2020-08-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-09-yes">September 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-09-yes" id="2020-09-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-10-yes">October 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-10-yes" id="2020-10-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-11-yes">November 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-11-yes" id="2020-11-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2020-12-yes">December 2020<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2020-12-yes" id="2020-12-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-01-yes">January 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-01-yes" id="2021-01-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-02-yes">February 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-02-yes" id="2021-02-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-03-yes">March 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-03-yes" id="2021-03-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-04-yes">April 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-04-yes" id="2021-04-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-05-yes">May 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-05-yes" id="2021-05-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-06-yes">June 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-06-yes" id="2021-06-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-07-yes">July 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-07-yes" id="2021-07-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-08-yes">August 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-08-yes" id="2021-08-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-09-yes">September 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-09-yes" id="2021-09-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-10-yes">October 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-10-yes" id="2021-10-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                      <div class="form-group row">
                        <label class="col-sm-6 control-label" for="2021-11-yes">November 2021<span class="wb-inv"> (do not include a
                          dollar sign, spaces or commas)</span></label>
                        <div class="col-sm-6">
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right cews-rate-calc-alt currency"     name="2021-11-yes" id="2021-11-yes" size="10" placeholder="0.00">
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- Section to add days not operating during Jan-Feb -->
                    <div class="row">
                      <div class="form-group mrgn-lft-md">
                        <div class="col-md-12">
                          <div class="checkbox provisional gc-chckbxrdio pull-right">
                            <input id="jan-feb-closed" type="checkbox" checked="checked"/>
                            <label for="jan-feb-closed">You were in business for all 60 days of January and February 2020 (not seasonally affected or beginning operations during that period)</label>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div id="jan-feb-closed-inputs" class="mrgn-bttm-sm pull-right hidden">
                      <div class="form-group row mrgn-tp-sm mrgn-bttm-0 mrgn-rght-sm mrgn-lft-sm">
                        <div class="col-md-12">
                          <label for="jan-feb-closed-days" class="required">Days you were not in business during Jan-Feb 2020 <span class="wb-inv"> (do not include
                            spaces or commas)</span><strong class="required">(required)</strong></label>
                        </div>
                        <div class="col-xs-6">
                          <input type="number" class="form-control text-right" id="jan-feb-closed-days" max="59" min="0">
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr>
                </fieldset>
                <div class="well text-muted mrgn-tp-md">
                  <h3 class="mrgn-tp-0">Summary of revenue drop and subsidy rates</h3>
                  <ul class="small">
                    <li>Your <strong>current period revenue drop</strong> is <span class="currentRevReduction-alt h4">0%</span></li>
                    <li class="brdr-bttm">Your <strong>previous period revenue drop</strong> is <span class="priorRevReduction-alt h4">0%</span></li>
                    <div class="safe-harbour-hide">
                      <p class="greater-than-10-drop">Because the higher of these revenue drops is <span class="h4 rev-reduc-alt-base">0%</span>, your base rate is <span class="h4 mrgn-tp-0  base-rate-alt">0%</span><span class="p11-plus hidden"> and your top-up rate is <span class="top-up-rate-alt h4" >0%</span></span></p>
                      <p class="less-than-10-drop">Because your revenue drop is less than 10%, your base rate is <span class="h4 mrgn-tp-0">0%</span> and your top-up rate is <span class="h4">0%</span></p>
                    </div>
                    <div class="p8-plus hidden">
                      <li>Your <strong>higher base revenue drop</strong> is <span class="rev-reduc-alt-base h4">0%</span></li>
                      <li class="brdr-bttm">Your <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up-alt h4" >0%</span></li>
                      <p>Because the higher of these revenue drops is <span class="h4 rev-drop-top-up-higher-alt">0%</span>, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate-alt">0%</span></p>
                    </div>
                    <div class="p7-and-before">
                      <p class="mrgn-bttm-md"><span class="safe-harbour-hide">Because your</span><span class="safe-harbour-show hidden">Your</span> <strong>average revenue drop for the
                        previous three months</strong> is <span class="rev-drop-top-up-alt h4">0% 
                        <!--average of 3 months 2019 divided by 3 months in 2020--></span><span class="safe-harbour-hide">, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate-alt">0%</span></span></p>
                    </div>
                  </ul>
                  <hr class="brdr-bttm">
                  <p>Your <strong>overall CEWS rate</strong> <span class="safe-harbour-hide small">(<span class="base-rate-alt">0%</span> base rate + <span class="top-up-rate-alt">0%</span> top-up rate)</span> for claim period <span class="claim-period-no">(choose a claim
                    period)</span> is <span class="cews-rate-alt h3 mrgn-tp-0 badge mrgn-bttm-0" id="">0%</span></p>
                  <p class="safe-harbour-show hidden mrgn-lft-md small">You qualify for the “safe harbour”
                    rate of 75% because your revenue drop in the current or previous period was at least 30%. </p>
                  <div class="crhp-eligible">
                   <!-- <p class="mrgn-bttm-md greater-than-10-drop hidden"><span class="p18-plus">Because your revenue drop is 10% or larger, your</span><span class="p17-only">Your</span> <strong>CRHP rate</strong> is <span class="h4 margn-tp-0 crhp-rate"></span></p>
                    <p class="mrgn-bttm-md less-than-10-drop"><span class="p18-plus">Because your revenue drop is 10% or larger, your</span><span class="p17-only">Because your revenue did not drop, you</span> revenue drop is less than 10%, your <strong>CRHP rate</strong> is <span class="h4 margn-tp-0">0%</span></p>-->
                      <p class="mrgn-bttm-md greater-than-10-drop hidden"><span class="p18-plus">Because your revenue drop is 10% or more, your</span><span class="p17-only">Your</span> <strong>CRHP rate</strong> is <span class="h4 margn-tp-0 crhp-rate"></span></p>
                    <p class="mrgn-bttm-md less-than-10-drop"><span class="p18-plus">Because your revenue drop is less than 10%, you</span><span class="p17-only">Because your revenue did not drop, you</span> <strong>do not qualify</strong> for the CRHP.</p>                </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Review your summary</a></p>
          </div>
        </div>
      </div>
    </fieldset>
    <fieldset id="employees-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0" tabindex="0"><span class="panel-title">Employee pay</span></legend>
      <div class="panel-body">
        <div class="row">
          <div class="col-sm-8 col-md-9  mrgn-tp-md">
            <div id="cews-cal-opt2">
              <fieldset id="employees" class="subfields">
                <legend>Calculate your employee wages</legend>
                <p>Include all your eligible employees.</p>
                <p><strong>Note:</strong> If you want to change any information above, do that step
                  before you begin calculating employee wages.</p>
                <fieldset class="subfields" id="emp-1">
                  <legend class="col-xs-7 col-sm-9 mrgn-tp-md"><span class="fas fa-user"></span> Eligible employee <span class="employeeNumber">1</span></legend>
                  <button class="col-xs-4 col-sm-2 btn btn-xs btn-danger pull-right rm-emp hidden mrgn-rght-md mrgn-tp-md" type="button">Remove</button>
                  <div class="panel-body">
                    <div class="form-group">
                      <label for="ee-name-1">Employee name or alias<span class="wb-inv"> (use a first name or nickname)</span></label>
                      <input type="text" class="form-control input-lg text-right" id="ee-name-1">
                      <p class="small text-muted" aria-hidden="true">Use a first name or nickname</p>
                    </div>
                    <div class="form-group">
                      <label for="arms-1">Is employee at arm's length?</label>
                      <p><a class="wb-lbx arms-length-def" role="button" aria-controls="armslength" href="#armslength">Arm's
                        length definition<span class="mrgn-lft-sm far fa-question-circle"></span></a></p>
                      <select class="arms-length-select form-control" id="arms-1" data-updates="emp-arms-1">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                      </select>
                    </div>
                    <hr>
                    <div class="form-group">
                      <label for="baseline-1">Average weekly pre-crisis (baseline) pay<span class="wb-inv"> (do not include a
                        dollar sign, spaces or commas)</span></label>
                      <p><a class="wb-lbx baseline-rem-def" role="button" aria-controls="baseline-rem" href="#baseline-rem">Choose how to determine pre-crisis <span class="nowrap">pay<span     class="far fa-question-circle mrgn-lft-sm"></span></span></a></p>
                      <div class="input-group col-md-5"> <span class="input-group-addon">$</span>
                        <input type="number" class="form-control input-lg text-right currency" id="baseline-1" data-updates="emp-base-1" placeholder="0.00">
                      </div>
                      <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces,
                        commas,</strong> or a <strong>dollar sign</strong></p>
                    </div>
                    <fieldset class="subfields">
                      <legend class="mrgn-bttm-0">Eligible remuneration (pay) in respect of the claim period <span class="claim-period"></span> </legend>
                      <p><a class="wb-lbx pay-claim-def" role="button" aria-controls="pay-claim" href="#pay-claim">Claim period pay per week<span class="emp-lv hidden"> and active
                        employees or employees on leave with pay</span>&nbsp;<span class="far fa-question-circle"></span></a></p>
                      <div class="form-group row mrgn-tp-lg mrgn-bttm-0">
                        <div class="col-md-3">
                          <label for="wkone-1">Week one<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wkone-1" placeholder="0.00" data-updates="w1-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wkone-cb-1" class="emp-lv">
                              <input id="wkone-cb-1" type="checkbox" value="">
                              Leave
                              with pay<span class="wb-inv"> in week one</span></label>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label for="wktwo-1">Week two<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wktwo-1" placeholder="0.00" data-updates="w2-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wktwo-cb-1" class="emp-lv">
                              <input id="wktwo-cb-1" type="checkbox" value="">
                              Leave
                              with pay<span class="wb-inv"> in week two</span></label>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label for="wkthree-1">Week three<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wkthree-1" placeholder="0.00" data-updates="w3-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wkthree-cb-1" class="emp-lv">
                              <input id="wkthree-cb-1" type="checkbox" value="">
                              Leave with pay<span class="wb-inv"> in week three</span></label>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <label for="wkfour-1">Week four<span class="wb-inv"> (do not include a
                            dollar sign, spaces or commas)</span></label>
                          <div class="input-group"> <span class="input-group-addon input-sm">$</span>
                            <input type="number" class="form-control text-right emp-wkly-wage-1 currency"     id="wkfour-1" placeholder="0.00" data-updates="w4-amt-1">
                          </div>
                          <div class="checkbox emp-lv hidden">
                            <label for="wkfour-cb-1" class="emp-lv">
                              <input id="wkfour-cb-1" type="checkbox" value="">
                              Leave
                              with pay<span class="wb-inv"> in week four</span></label>
                          </div>
                        </div>
                      </div>
                      <p class="small text-muted mrgn-bttm-0" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
                    </fieldset>
                  </div>
                  <footer class="panel-footer">
                    <details open>
                      <summary>Calculation summary for <span class="ee-name-1">employee <span class="employeeNumber">1</span></span> </summary>
                      <table class="table table-condensed small text-muted" id="emp-smry-1">
                        <caption class="wb-inv">
                        Calculation summary for employee <span class="employeeNumber">1</span>
                        </caption>
                        <thead>
                          <tr>
                            <th scope="col">Week</th>
                            <th scope="col">Calculated amount</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>Week one (CEWS)</td>
                            <td data-updates="amt-ttl-1" id="w1-amt-1">$0</td>
                          </tr>
                          <tr>
                            <td>Week two (CEWS)</td>
                            <td data-updates="amt-ttl-1" id="w2-amt-1">$0</td>
                          </tr>
                          <tr>
                            <td>Week three (CEWS)</td>
                            <td data-updates="amt-ttl-1" id="w3-amt-1">$0</td>
                          </tr>
                          <tr>
                            <td>Week four (CEWS)</td>
                            <td data-updates="amt-ttl-1" id="w4-amt-1">$0</td>
                          </tr>
                        </tbody>
                        <tfoot>
                          <tr>
                            <td>4-week total (CEWS)</td>
                            <td id="amt-ttl-1" data-updated-by="emp-wkly-wage-1">$0</td>
                          </tr>
                          <tr>
                            <td>Total remuneration (CRHP)</td>
                            <td id="amt-crhp-rem-1">$0</td>
                          </tr>
                        </tfoot>
                      </table>
                      <table id="emp-no-elgbl-1" class="table table-condensed small text-muted hidden">
                        <thead>
                          <tr>
                            <th scope="col">Week</th>
                            <th scope="col">Calculated amount</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td colspan="2">This employee is not eligible for this claim period</td>
                          </tr>
                        </tbody>
                      </table>
                    </details>
                  </footer>
                </fieldset>
                <p class="mrgn-bttm-xl mrgn-tp-lg">
                  <button class="btn btn-default" type="button" id="addemp"><span class="fas fa-plus-circle"></span> Add another employee</button>
                </p>
              </fieldset>
              <p class="h3 mrgn-tp-sm brdr-tp"><span class="fas fa-users"></span> Results for employees</p>
              <ul class="list-unstyled">
                <li class="mrgn-tp-md"><a href="#ee-calculation-table" aria-controls="ee-calculation-table" class="wb-lbx lbx-modal btn btn-default" role="button" id="showEmpTable">Review, download
                  and print employee calculations</a></li>
                <!--<li class="mrgn-tp-md">
      <button type="button" id="transfer-data" class="btn btn-primary">Calculate and send data to the next step</button>
    </li>//-->
              </ul>
            </div>
          </div>
          <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Review your summary</a></p>
          </div>
        </div>
        <section id="ee-calculation-table" class="mfp-hide modal-dialog modal-content overlay-def wb-popup-full">
          <header class="modal-header">
            <h2 class="modal-title">Remuneration calculations for claim period <span class="claim-period"></span></h2>
          </header>
          <div class="modal-body">
            <p class="mrgn-bttm-md">
              <button type="button" class="btn btn-default hidden-print toCSV"><span class="fas fa-download"></span> Download the following table as spreadsheet file (CSV)</button>
            </p>
            <div class="table-responsive">
              <table class="table table-bordered table-condensed small" id="dataset-filter" summary="Remuneration calculations for claim period">
                <thead>
                  <tr>
                    <th>Eligible employees (EE)</th>
                    <th>Arm's length</th>
                    <th>Pre-crisis pay</th>
                    <th>Weekly gross pay for week 1</th>
                    <th>Weekly gross pay for week 2</th>
                    <th>Weekly gross pay for week 3</th>
                    <th>Weekly gross pay for week 4</th>
                    <th>Calculated basic CEWS amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr id="emp1">
                    <td><span class="ee-name-1">Employee 1</span></td>
                    <td id="emp-arms-1"></td>
                    <td id="emp-base-1"></td>
                    <td data-updated-by="wkone-1"></td>
                    <td data-updated-by="wktwo-1"></td>
                    <td data-updated-by="wkthree-1"></td>
                    <td data-updated-by="wkfour-1"></td>
                    <td id="emp-ttl-1"></td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <td class="nowrap">Total EEs: <span class="numEmps"></span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span class="wb-inv">-</span></td>
                    <td><span>All EE total: <span class="total"></span></span></td>
                  </tr>
                </tfoot>
              </table>
            </div>
            <ul class="list-inline">
              <li>
                <button onclick="window.print()" class="btn btn-success btn-lg hidden-print"><span     class="glyphicon glyphicon-print"></span> Print this summary</button>
              </li>
              <li class="pull-right">
                <button title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss" type="button">Close<span class="wb-inv"> overlay</span></button>
              </li>
            </ul>
          </div>
          <div class="modal-footer hidden"> </div>
        </section>
      </div>
    </fieldset>
    <fieldset id="prem-cont-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0" tabindex="0"><span class="panel-title">Premiums, contributions and deductions</span></legend>
      <div class="panel-body">
        <div class="row">
          <div class="col-sm-8 col-md-9">
            <p>Enter the total employer-paid amount of <a href="#contributions" aria-controls="contributions"
                    class="wb-lbx" role="button">premiums or contributions&nbsp;<span
                      class="far fa-question-circle"></span></a> paid
              on behalf of <a href="#lwp" aria-controls="lwp" class="wb-lbx" role="button">eligible
              employees on leave with pay&nbsp;<span class="far fa-question-circle"></span></a> during the
              selected period. Enter
              $0 if not applicable. </p>
            <div class="mrgn-lft-md">
              <div class="form-group">
                <label class="control-label required" for="p3-ei"><span class="field-name">Total EI and QPIP
                  premiums that you paid on salary to eligible employees on leave with pay <small>(for the claim
                  period)</small><span class="wb-inv"> (do not include a dollar sign or commas)</span></span> <strong class="required p3-ee-req">(required)</strong> </label>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency" id="p3-ei">
                </div>
                <p class="small hidden text-danger no-lwp-disclaimer">You have no employees on leave with pay (line AA) during this claim period.</p>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
              <div class="form-group">
                <label class="control-label required" for="p3-cpp"><span class="field-name">Total CPP and QPP
                  contributions that you made on salary to eligible employees on leave with pay <small>(for the
                  claim
                  period)</small><span class="wb-inv"> (do not include a dollar sign or commas)</span></span> <strong class="required p3-ee-req">(required)</strong> </label>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency" id="p3-cpp">
                </div>
                <p class="small hidden text-danger no-lwp-disclaimer">You have no employees on leave with pay (line AA) during this claim period.</p>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
              <div class="form-group p14">
                <label class="control-label required" for="p4-tws"><span class="field-name">Amount you
                  calculated for the 10% Temporary Wage Subsidy for Employers <small>(for the claim
                  period)</small> (enter $0 if not applicable)<span class="wb-inv"> (do not include a dollar
                  sign or commas)</span></span> <strong class="required">(required)</strong> </label>
                <p><a href="#tempwage" aria-controls="tempwage" class="wb-lbx" role="button">10% Temporary Wage
                  Subsidy for Employers amount&nbsp;<span class="far fa-question-circle"></span></a></p>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency" id="p4-tws">
                </div>
                <p id="p4-tws-disclaimer" class="small hidden text-danger">The amount for this claim period is $0
                  because the temporary subsidy has ended.</p>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
              <div class="form-group">
                <label class="control-label required" for="p4-wsb"><span class="field-name">Total amount that your
                  eligible employees have received under ESDC’s Work-Sharing benefit program <small>(for the
                  claim period)</small> (enter $0 if not applicable) <span class="wb-inv"> (do not include a
                  dollar sign or commas)</span></span> <strong class="required">(required)</strong> </label>
                <p><a href="#worksharing" aria-controls="worksharing" class="wb-lbx" role="button">Work-Sharing
                  benefit program amount&nbsp;<span class="far fa-question-circle"></span></a></p>
                <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                  <input required type="number" class="form-control input-lg text-right currency" id="p4-wsb">
                </div>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
              </div>
            </div>
          </div>
          <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Review your summary</a></p>
          </div>
        </div>
      </div>
    </fieldset>
    <!-- <fieldset id="deductions-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title" tabindex="0">Deductions</span></legend>
      <div class="panel-body">
        <div class="row">
          <div class="col-sm-8 col-md-9 mrgn-tp-md">
            <div class="form-group p14">
              <label class="control-label required" for="p4-tws"><span class="field-name">Amount you
                calculated for the 10% Temporary Wage Subsidy for Employers <small>(for the claim
                period)</small> (enter $0 if not applicable)<span class="wb-inv"> (do not include a dollar
                sign or commas)</span></span> <strong class="required">(required)</strong> </label>
              <p><a href="#tempwage" aria-controls="tempwage" class="wb-lbx" role="button">10% Temporary Wage
                Subsidy for Employers amount&nbsp;<span class="far fa-question-circle"></span></a></p>
              <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                <input required type="number" class="form-control input-lg text-right currency" id="p4-tws">
              </div>
              <p id="p4-tws-disclaimer" class="small hidden text-danger">The amount for this claim period is $0
                because the temporary subsidy has ended.</p>
              <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
            </div>
            <div class="form-group">
              <label class="control-label required" for="p4-wsb"><span class="field-name">Total amount that your
                eligible employees have received under ESDC’s Work-Sharing benefit program <small>(for the
                claim period)</small> (enter $0 if not applicable) <span class="wb-inv"> (do not include a
                dollar sign or commas)</span></span> <strong class="required">(required)</strong> </label>
              <p><a href="#worksharing" aria-controls="worksharing" class="wb-lbx" role="button">Work-Sharing
                benefit program amount&nbsp;<span class="far fa-question-circle"></span></a></p>
              <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                <input required type="number" class="form-control input-lg text-right currency" id="p4-wsb">
              </div>
              <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
            </div>
          </div>
          <div class="col-sm-4 col-md-3">
            <p class="mrgn-tp-md"><a href="#calc-summary" class="wb-lbx btn btn-link panel panel-primary"><span class="fas fa-clipboard-list fa-lg"></span> Review your summary</a></p>
          </div>
        </div>
      </div>
    </fieldset> -->
    <!-- <fieldset id="summary-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0"><span class="panel-title" >Summary review</span> </legend>
      <div class="panel-body">
        <div class="row mrgn-tp-md hidden">
          <div class="mrgn-lft-lg mrgn-rght-md"> 
           
            <div class="form-group p14" id="ee-p1-4">
              <label class="control-label required" for="p2c-ee"><span class="field-name">Total number of
                eligible employees<span class="wb-inv"> (do not include spaces or commas)</span></span> <strong class="required">(required)</strong> </label>
              <div class="row">
                <div class="col-md-3">
                  <input required type="number" class="form-control input-lg text-right currency" id="p2c-ee">
                </div>
              </div>
              <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces</strong> or <strong>commas</strong></p>
            </div>
            
            
            <div class="form-group hidden p59" id="ee-p5-9">
              <div class="row">
                <div class="col-sm-6">
                  <label class="control-label required" for="p2c-ee-alt1"><span class="field-name">Eligible
                    active employees<span class="wb-inv"> (do not include spaces or commas)</span></span> <strong class="required">(required)</strong> </label>
                  <div class="row">
                    <div class="col-md-6">
                      <input required type="number" class="form-control input-lg text-right currency"     id="p2c-ee-alt1">
                    </div>
                  </div>
                </div>
                <div class="col-sm-6">
                  <label class="control-label required" for="p2c-ee-alt2"><span class="field-name">Eligible
                    employees on leave with pay<span class="wb-inv"> (do not include spaces
                    or commas)</span></span> <strong class="required">(required)</strong> </label>
                  <div class="row">
                    <div class="col-md-6">
                      <input required type="number" class="form-control input-lg text-right currency"     id="p2c-ee-alt2">
                    </div>
                  </div>
                </div>
              </div>
              <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces</strong> or <strong>commas</strong></p>
            </div>
            <div class="form-group">
              <label class="control-label required" for="p2c-pyrl"><span class="field-name">Total eligible
                remuneration paid to these employees during this claim period<span class="wb-inv"> (do
                not include a dollar sign, spaces or commas)</span></span> <strong     class="required">(required)</strong> </label>
              <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                <input required type="number" class="form-control input-lg text-right currency"     id="p2c-pyrl">
              </div>
              <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
            </div>
           
            <div class="hidden p59" id="p2b-rev">
              <div class="form-group p11-plus">
                <label for="p2b-c0" class="control-label required"><span class="field-name">Revenue drop for
                  the prior period<span class="wb-inv"> (do
                  not include spaces or commas)</span></span> <strong class="required">(required)</strong></label>
                <div class="input-group col-sm-3">
                  <input type="number" size="10" id="p2b-c0" name="p2b-c1" class="form-control text-right" placeholder="0" min="0" max="100" required>
                  <span class="input-group-addon">%</span></div>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces</strong> or <strong>commas</strong></p>
              </div>
              <div class="form-group">
                <label for="p2b-c1" class="control-label required"><span class="field-name">Revenue drop for
                  the current period<span class="wb-inv"> (do
                  not include spaces or commas)</span></span> <strong class="required">(required)</strong></label>
                <div class="input-group col-sm-3">
                  <input type="number" size="10" id="p2b-c1" name="p2b-c1" class="form-control text-right" placeholder="0" min="0" max="100" required>
                  <span class="input-group-addon">%</span></div>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces</strong> or <strong>commas</strong></p>
              </div>
              <div class="form-group p10-">
                <label for="p2b-c2" class="control-label required"><span class="field-name">Average revenue
                  drop for the previous three months<span class="wb-inv"> (do
                  not include spaces or commas)</span></span> <strong class="required">(required)</strong></label>
                <div class="input-group col-sm-3">
                  <input type="number" size="10" id="p2b-c2" name="p2b-c2" class="form-control text-right" placeholder="0" min="0" max="100" required>
                  <span class="input-group-addon">%</span></div>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces</strong> or <strong>commas</strong></p>
              </div>
              <div class="form-group">
                <label for="p2b-c3" class="control-label required"><span class="field-name">Subsidy rate
                  used for active employees in the calculation of the total
                  basic CEWS<span class="wb-inv"> (do
                  not include spaces or commas)</span></span> <strong class="required">(required)</strong></label>
                <div class="input-group col-sm-3">
                  <input type="number" size="10" id="p2b-c3" name="p2b-c3" class="form-control text-right" placeholder="0" min="0" max="100" required>
                  <span class="input-group-addon">%</span></div>
                <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces</strong> or <strong>commas</strong></p>
              </div>
            </div>
            <div class="form-group">
              <label class="control-label required" for="p2c-cews"><span class="field-name">Total basic
                CEWS for these employees during this claim period<span class="wb-inv"> (do not include a
                dollar sign or commas)</span> </span> <strong class="required">(required)</strong> </label>
              <p class="text-muted small hidden p59" aria-describedby="p2c-cews" id="p2c-cews-p5-9">This
                amount includes both the base and top-up amount (if applicable).</p>
              <div class="input-group col-md-5"> <span class="input-group-addon input-sm">$</span>
                <input required type="number" class="form-control input-lg text-right currency"     id="p2c-cews">
              </div>
              <p class="small text-muted" aria-hidden="true">Do not include <strong>spaces, commas,</strong> or a <strong>dollar sign</strong></p>
            </div>
          </div>
        </div>
        <div class="mrgn-tp-md">
          <h3 class="mrgn-tp-0">Summary of revenue drop and subsidy rates</h3>
          <div class="alt-bl-no hidden">
            <ul class="small">
              <li>Your <strong>current period revenue drop</strong> is <span class="currentRevReduction h4">0%</span></li>
              <li class="brdr-bttm">Your <strong>previous period revenue drop</strong> is <span class="priorRevReduction h4">0%</span></li>
              <p class="safe-harbour-hide">Because the higher of these revenue drops is <span class="h4 mrgn-tp-0 rev-reduc-base">0%</span>, your base rate is <span class="h4 mrgn-tp-0 base-rate">0%</span> <span class="p11-plus hidden"> and your top-up rate is <span class="top-up-rate h4">0%</span></span></p>
              <div class="p8-plus hidden">
                <li>Your <strong>higher base revenue drop</strong> is <span class="rev-reduc-base h4">0%</span></li>
                <li class="brdr-bttm">Your <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up h4">0%</span></li>
                <p>Because the higher of these revenue drops is <span class="h4 rev-drop-top-up-higher">0%</span>, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate">0%</span></p>
              </div>
              <div class="p7-and-before">
                <p class="mrgn-bttm-md"><span class="safe-harbour-hide">Because your</span><span class="safe-harbour-show hidden">Your</span> <strong>average revenue drop for the
                  previous three months</strong> is <span class="rev-drop-top-up h4">0%</span><span class="safe-harbour-hide">, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate">0%</span></span></p>
              </div>
            </ul>
            <hr class="brdr-bttm">
            <p>Your <strong>overall CEWS rate</strong> <span class="safe-harbour-hide small">(<span class="base-rate">0%</span> base rate + <span class="top-up-rate">0%</span> top-up
              rate)</span> for claim period <span class="claim-period-no">(choose a claim
              period)</span> is <span class="cews-rate h3 mrgn-tp-0 badge mrgn-bttm-0" id="">0%</span> </p>
            <p class="safe-harbour-show hidden mrgn-lft-md small">You qualify for the “safe harbour”
              rate of 75% because your revenue drop in the current or previous period was at least 30%. </p>
          </div>
          <div class="alt-bl-yes hidden">
            <ul class="small">
              <li>Your <strong>current period revenue drop</strong> is <span class="currentRevReduction-alt h4">0%</span></li>
              <li class="brdr-bttm">Your <strong>previous period revenue drop</strong> is <span class="priorRevReduction-alt h4">0%</span></li>
              <p class="safe-harbour-hide">Because the higher of these revenue drops is <span class="h4 rev-reduc-alt-base">0%</span>, your base rate is <span class="h4 mrgn-tp-0  base-rate-alt">0%</span><span class="p11-plus hidden"> and your top-up rate is <span class="top-up-rate-alt h4" >0%</span></span></p>
              <div class="p8-plus hidden">
                <li>Your <strong>higher base revenue drop</strong> is <span class="rev-reduc-alt-base h4">0%</span></li>
                <li class="brdr-bttm">Your <strong>average revenue drop for the previous three months</strong> is <span class="rev-drop-top-up-alt h4" >0%</span></li>
                <p>Because the higher of these revenue drops is <span class="h4 rev-drop-top-up-higher-alt">0%</span>, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate-alt">0%</span></p>
              </div>
              <div class="p7-and-before">
                <p class="mrgn-bttm-md"><span class="safe-harbour-hide">Because your</span><span class="safe-harbour-show hidden">Your</span> <strong>average revenue drop for the
                  previous three months</strong> is <span class="rev-drop-top-up-alt h4">0% 
                  </span><span class="safe-harbour-hide">, your top-up rate is <span class="h4 mrgn-tp-0 top-up-rate-alt">0%</span></span></p>
              </div>
            </ul>
            <hr class="brdr-bttm">
            <p>Your <strong>overall CEWS rate</strong> <span class="safe-harbour-hide small">(<span class="base-rate-alt">0%</span> base rate + <span class="top-up-rate-alt">0%</span> top-up rate)</span> for claim period <span class="claim-period-no">(choose a claim
              period)</span> is <span class="cews-rate-alt h3 mrgn-tp-0 badge mrgn-bttm-0" id="">0%</span></p>
            <p class="safe-harbour-show hidden mrgn-lft-md small">You qualify for the “safe harbour”
              rate of 75% because your revenue drop in the current or previous period was at least 30%. </p>
          </div>
          <h3 class="mrgn-tp-0">Summary</h3>
          <ul class="list-unstyled lst-spcd">
            <li id="sum-ee-p1-4" class="p14"> <span class="h3">Line A</span> Number of eligible employees <abbr title="equals" class="brdr-0">=</abbr>
              <output class="h3 wb-calc nowrap" for="p2c-ee" data-wb-calc='{"expr": "#p2c-ee * 1"}'></output>
            </li>
            <li id="sum-ee-active" class="hidden p59"> <span class="h3">Line A</span> Number of eligible active
              employees <abbr title="equals" class="brdr-0">=</abbr>
              <output class="h3 wb-calc nowrap" for="p2c-ee-alt1" data-wb-calc='{"expr": "#p2c-ee-alt1 * 1"}'></output>
            </li>
            <li id="sum-ee-lwp" class="hidden p59"> <span class="h3">Line AA</span> Number of eligible employees
              on leave with pay <abbr title="equals" class="brdr-0">=</abbr>
              <output class="h3 wb-calc nowrap" for="p2c-ee-alt2" data-wb-calc='{"expr": "#p2c-ee-alt1 * 2"}'></output>
            </li>
            <li> <span class="h3">Line B</span> Total eligible remuneration paid <abbr title="equals" class="brdr-0">=</abbr>
              <output class="h3 wb-calc nowrap" for="p2c-pyrl" data-wb-calc='{"expr": "#p2b-pyrl * 1", "format": "currency"}'></output>
            </li>
            <li id="sum-rev" class="hidden p59"><span class="h4">Revenue drop and subsidy rate</span>
              <ul class="list-unstyled mrgn-lft-md">
                <li class="p11-plus hidden"><span class="h4">Line c0</span> Revenue drop for the prior period <abbr title="equals"     class="brdr-0">=</abbr>
                  <output class="h4 wb-calc nowrap" for="p2b-c0"></output>
                </li>
                <li><span class="h4">Line c1</span> Revenue drop for the current period <abbr title="equals"     class="brdr-0">=</abbr>
                  <output class="h4 wb-calc nowrap" for="p2b-c1"></output>
                </li>
                <li class="p10- hidden"><span class="h4">Line c2</span> Average revenue drop for the previous three months <abbr     title="equals" class="brdr-0">=</abbr>
                  <output class="h4 wb-calc nowrap" for="p2b-c2"></output>
                </li>
                <li><span class="h4">Line c3</span> Subsidy rate used for active employees in the calculation of
                  Line C <abbr title="equals" class="brdr-0">=</abbr>
                  <output class="h4 wb-calc nowrap" for="p2b-c3"></output>
                </li>
              </ul>
            </li>
            <li> <span class="h3">Line C</span> Basic CEWS (including top-up, if applicable) <abbr title="equals" class="brdr-0">=</abbr>
              <output class="h3 wb-calc nowrap" for="p2c-cews" data-wb-calc='{"expr": "#p2c-cews * 1", "format": "currency"}'></output>
            </li>
          </ul>
          <h4>Premiums, contributions and deductions</h4>
          <p>Premiums:
            <output class="h3 wb-calc nowrap wb-init wb-calc-inited" for="p3-ei" data-wb-calc="{&quot;expr&quot;: &quot;#p3-ei * 1&quot;, &quot;format&quot;: &quot;currency&quot;}" id="wb-auto-66">$0.00</output>
          </p>
          <p>Contributions:
            <output class="h3 wb-calc nowrap wb-init wb-calc-inited" for="p3-cpp" data-wb-calc="{&quot;expr&quot;: &quot;#p3-cpp * 1&quot;, &quot;format&quot;: &quot;currency&quot;}" id="wb-auto-67">$0.00</output>
          </p>
          <p>Deductions:
            <output class="h3 wb-calc nowrap wb-init wb-calc-inited" for="p4-wsb" data-wb-calc="{&quot;expr&quot;: &quot;#p4-wsb * 1&quot;, &quot;format&quot;: &quot;currency&quot;}" id="wb-auto-69">$0.00</output>
          </p>
        </div>
      </div>
    </fieldset> -->
<fieldset id="results-fs" class="panel-default p-0" >
      <legend class="panel-heading mrgn-bttm-0" tabindex="0"><span class="panel-title">Amount to claim on your application</span></legend>
      <div class="panel-body">
        <div class="clearfix"></div>
	      <div class="alert alert-info provisional">
          <p class="text-info"><strong>You have still not applied:</strong></p>
          <ol>
            <li>Print and keep the record of <span class="crhp-eligible">the <strong>summary of the subsidy that gives you a higher amount (</span><span class="subsidy-to-apply-for"></span><span class="crhp-eligible">)</span> <span class="crhp-ineligible">line amounts</span></strong> using the print preview button at the bottom of the summary.</li>
		  <li>Continue to <strong>How to apply</strong> beneath the summary.</li>
          </ol>
          <div class="crhp-eligible mrgn-tp-md">
            <p>You must apply for the <span class="h4 subsidy-to-apply-for"></span> as it results in the higher subsidy for this claim period. The <span class="subsidy-for-information"></span> calculation summary is only here for your information.</p>
          </div>
	      </div>
<!--	<p class="mrgn-bttm-md">The total amount of CEWS you can claim is: <output class="h3 wb-calc nowrap" for="p2c-cews p3-ei p3-cpp p4-tws p4-wsb"
                    data-wb-calc='{"expr": "#p2c-ee + #p2-pyrl + #p3-ei + #p3-cpp - #p4-tws - #p4-wsb", "format": "currency"}'></output></p>
		<p class="crhp-no">The total amount of CRHP you can claim is:  <output class="h3 wb-calc nowrap" for=""
                    data-wb-calc='{}'></output></p>
		<p class="crhp-yes">You cannot claim the CRHP due to your business being a publically traded company.</p>//-->
<div class="wb-tabs ignore-session">
  <div class="tabpanels">
    <details id="details-panel1">
      <summary>CEWS total amount:<br class="hidden-sm hidden-xs">
        <output class="h3 wb-calc nowrap total-calculated-cews">$0.00</output> <span class="hidden cews-total-tab-fyi">(FYI)</span>
      </summary>
      <div id="cews-statement">
        <div class="alert alert-danger provisional cews-fyi">
          <h3 class="h4 mrgn-tp-0 text-warning">Your <span class="h4 subsidy-for-information"></span> amount is deemed nil for this period</h3>
          <p>You must complete the application for the <span class="h4 subsidy-to-apply-for"></span> as that subsidy gives you the higher amount.</p>
          <p>The <span class="subsidy-for-information"></span> calculation summary and calculated total is only here for your information but is not part of your application.</p>
        </div>      
        <div class="p14-crhp well text-muted mrgn-tp-md hidden">
          <h3 class="mrgn-tp-0">CRHP base remuneration to use in periods 17 to 22</h3>
          <p>Your <strong>base remuneration for the CRHP</strong> is <span class="p14-base-crhp-rem h4">$0</span></p>
          <p>You had <span class="total-eligible-emps h4">0</span> eligible active employees (not on paid leave) during the CRHP base period.</p>
          <p>You only need to calculate this once for all future CRHP calculations.</p>
        </div>
        <p><span class="cews-fyi">Calculation summary for your information:</span><span class="crhp-fyi">Enter the following lines in your application for <strong class="claim-period"></strong></span>:</p>
        <ul class="lst-spcd">
          <li class="p14"> <strong>Line A:</strong> Number of eligible employees: <strong>
            <output class="h3 wb-calc nowrap total-eligible-emps"></output>
            </strong></li>
          <li id="sum-ee-active3" class="hidden p59"><strong>Line A:</strong> Number of eligible active employees:
            <output class="h3 wb-calc nowrap total-active-emps"></output>
          </li>
          <li id="sum-ee-lwp3" class="hidden p59"><strong>Line AA:</strong> Number of eligible employees on leave with pay:
            <output class="h3 wb-calc nowrap total-furloughed-emps"></output>
          </li>
          <li><strong>Line B:</strong> Total eligible remuneration paid: <strong>
            <output class="h3 wb-calc nowrap cews-remuneration-total"></output>
            </strong></li>
          <li id="sum-rev3" class="hidden p59">Revenue drop and subsidy rate
            <ul class="list-unstyled mrgn-lft-md">
              <li class="p11-plus"><strong>Line c0:</strong> Revenue drop for the previous period:
                <output class="h3 wb-calc nowrap" for="p2b-c0"></output>
              </li>
              <li><strong>Line c1:</strong> Revenue drop for the current period:
                <output class="h3 wb-calc nowrap" for="p2b-c1"></output>
              </li>
              <li class="p10-"><strong>Line c2:</strong> Average revenue drop for the previous three months:
                <output class="h3 wb-calc nowrap" for="p2b-c2"></output>
              </li>
              <li><strong>Line c3:</strong> Subsidy rate used for active employees in the calculation of Line C:
                <output class="h3 wb-calc nowrap" for="p2b-c3"></output>
              </li>
            </ul>
          </li>
          <li><strong>Line C:</strong> Basic CEWS (including top-up, if applicable): <strong>
            <output class="h3 wb-calc nowrap basic-cews"></output>
            </strong></li>
          <li><strong>Line D:</strong> Employer’s EI and QPIP premiums payable on salary paid to employees on leave with pay <small>(for
            the claim period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p3-ei"
                    data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output>
            </strong></li>
          <li><strong>Line E:</strong> Employer’s CPP and QPP contributions payable on salary paid to employees on leave with pay <small>(for the claim period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p3-cpp"
                    data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output>
            </strong></li>
          <li class="p14"><strong>Line F:</strong> 10% Temporary Wage Subsidy for Employers reduction <small>(for the claim
            period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p4-tws"
                    data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output>
            </strong></li>
          <li><strong>Line G:</strong> Amounts received by eligible employees under ESDC’s Work-Sharing benefit program <small>(for
            the claim period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p4-wsb"
                    data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output>
            </strong></li>
        </ul>
        <div class="alert alert-success provisional crhp-fyi">
          <h3>Result</h3>
          <p><strong>Line H:</strong> The <strong>total amount</strong> you will claim for the CEWS for this period is: <strong>
            <output class="h3 wb-calc nowrap total-calculated-cews"></output><br />
            </strong> This amount is subject to verification. </p>
        </div>
      </div>
      <table class="table" id="cews-statement-table">
        <caption class="h5 mrgn-bttm-0">
        Summary of CEWS calculation
        </caption>
        <tbody>
          <tr>
            <th scope="row" class="h6">Basic CEWS <small class="nowrap">(Line C)</small></th>
            <td class="text-right nowrap"><output class="h6 wb-calc nowrap basic-cews"></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(add) EI and QPIP share <small class="nowrap">(Line D)</small></th>
            <td class="text-right nowrap">+
              <output class="h6 wb-calc nowrap" for="p3-ei"
                  data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(add) CPP and QPP share <small class="nowrap">(Line E)</small></th>
            <td class="text-right nowrap">+
              <output class="h6 wb-calc nowrap" for="p3-cpp"
                  data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(less) 10% Temporary Wage Subsidy for Employers claim <small class="nowrap">(Line
              F)</small></th>
            <td class="text-right nowrap"><abbr title="negative" class="brdr-0">-</abbr>
              <output class="h6 wb-calc nowrap" for="p4-tws"
                  data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(less) Work-Sharing benefit program received <small class="nowrap">(Line G)</small></th>
            <td class="text-right nowrap"><abbr title="negative" class="brdr-0">-</abbr>
              <output class="h6 wb-calc nowrap" for="p4-wsb"
                  data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output></td>
          </tr>
          <tr class="success">
            <th scope="row" class="h6">Your CEWS claim, subject to verification, is <small class="nowrap">(Line H)</small></th>
            <td class="text-right nowrap"><output class="h6 wb-calc nowrap total-calculated-cews"></output></td>
          </tr>
        </tbody>
      </table>
      <p>You are now ready to <strong>print these amounts</strong> so you can enter them into your wage subsidy application. Information is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
      <p class="hidden-print"><a href="#pp-statement" class="wb-lbx btn btn-default btn-lg" role="button"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CEWS statement</span></span></a></p>
    
 <nav class="mrgn-bttm-lg mrgn-tp-lg crhp-no" id="cews-hta">
        <h3 class="wb-inv">Document navigation</h3>
        <ul class="pager">
          <li class="next"><a href="http://test.canada.ca/covid-19-guidance/proto/wage-subsidy/cews-how-apply.html" rel="next">How to apply for CEWS</a></li>
        </ul>
      </nav>
    </details>
    <details id="details-panel2">
      <summary>CRHP total amount:<br class="hidden-sm hidden-xs">
        <output class="h3 wb-calc nowrap total-calculated-crhp">$0.00</output> <span class="hidden crhp-total-tab-fyi">(FYI)</span>
      </summary>
      <div class="crhp-no">
        <div id="crhp-statement">
          <div class="alert alert-danger provisional crhp-fyi">
            <h3 class="h4 mrgn-tp-0 text-warning">Your <span class="h4 subsidy-for-information"></span> amount is deemed nil for this period</h3>
            <p>You must complete the application for the <span class="h4 subsidy-to-apply-for"></span> as that subsidy gives you the higher amount.</p>
            <p>The <span class="subsidy-for-information"></span> calculation summary and calculated total is only here for your information but is not part of your application.</p>
          </div>   
          <p><span class="crhp-fyi">Calculation summary for your information:</span><span class="cews-fyi">Enter the following lines in your application for <strong class="claim-period"></strong></span>:</p>
          <ul class="lst-spcd">
            <li> <strong>Line 300:</strong> Amount eligible for CEWS for the claim period: <strong>
              <output class="h3 wb-calc nowrap total-calculated-cews"></output>
              </strong> </li>
            <li><strong>Line 400:</strong> Eligible active employees for the claim period:
              <output class="h3 wb-calc nowrap total-active-emps"></output>
            </li>
            <li><strong>Line 410:</strong> Eligible active employees for the base period (period 14):
              <output class="h3 wb-calc nowrap total-active-emps-14"></output>
            </li>
            <li><strong>Line 420:</strong> Total eligible remuneration for the claim period: <strong>
              <output class="h3 wb-calc nowrap crhp-current-rem"></output>
              </strong> </li>
            <li><strong>Line 430:</strong> Total eligible remuneration for the base period: <strong>
              <output class="h3 wb-calc nowrap crhp-base-rem"></output>
              </strong> </li>
            <li><strong>Line 500:</strong> Revenue drop for the current period:
              <output class="h3 wb-calc nowrap" for="p2b-c1"></output>
            </li>
            <li><strong>Line 510:</strong> Revenue drop for the previous period:
              <output class="h3 wb-calc nowrap" for="p2b-c0"></output>
            </li>
          </ul>
        </div>
        <table class="table" id="crhp-statement-table">
          <caption class="h5 mrgn-bttm-0">Summary of CRHP calculation</caption>
          <tbody>
            <tr>
              <th scope="row" class="h6">Current period remuneration for CRHP <small class="nowrap">(Line 420)</small></th>
              <td class="text-right nowrap"><output class="h6 wb-calc nowrap crhp-current-rem"></output></td>
            </tr>
            <tr>
              <th scope="row" class="h6">(minus) Base period remuneration for CRHP <small class="nowrap">(Line 430)</small></th>
              <td class="text-right nowrap">-
                <output class="h6 wb-calc nowrap crhp-base-rem"></output></td>
            </tr>
            <tr>
              <th scope="row" class="h6">(equals) Incremental remuneration paid <small class="nowrap">(Line 440)</small></th>
              <td class="text-right nowrap">=
                <output class="h6 wb-calc nowrap crhp-incremental-rem"></output></td>
            </tr>
            <tr>
              <th scope="row" class="h6">(multiplied by) CRHP subsidy rate <small class="nowrap">(Line 520)</small></th>
              <td class="text-right nowrap"><abbr title="multiply" class="brdr-0">x</abbr>
                <output class="h6 wb-calc nowrap crhp-rate"></output></td>
            </tr>
            <tr class="success">
              <th scope="row" class="h6">Your CRHP claim, subject to verification <small class="nowrap">(Line 600)</small></th>
              <td class="text-right nowrap"><output class="h6 wb-calc nowrap total-calculated-crhp"></output></td>
            </tr>
          </tbody>
        </table>
        <p>You are now ready to <strong>print these amounts</strong> so you can enter them into your hiring subsidy application. Information is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
        <p class="hidden-print"><a href="#pp-crhp-statement" class="wb-lbx btn btn-default btn-lg"
              role="button"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CRHP
          statement</span></span></a></p>
        <nav class="mrgn-bttm-lg mrgn-tp-lg" id="crhp-hta">
          <h3 class="wb-inv">Document navigation</h3>
          <ul class="pager">
            <li class="next"><a href="http://test.canada.ca/covid-19-guidance/proto/hiring-program/crhp-how-apply.html" rel="next">How to apply for CRHP</a></li>
          </ul>
        </nav>
      </div>
    </details>
  </div>
</div>
</div>
</fieldset>		  
    <button id="calculate" class="btn btn-primary btn-lg hidden" type="submit">Calculate your total subsidy comparison</button>
  </form>
</div>
	</div>
<!---Start of results hidden for now//-->
<!-- <div class="hidden" id="results"> -->

  <!-- <p><strong>You have still not applied:</strong></p>
  <ol>
    <li>Print and keep the record of the <strong>subsidy summary that gives you a higher amount (<span class="subsidy-to-apply-for"></span>)</strong> using the print preview button at the bottom of the summary.</li>
    <li>Then continue to How to apply beneath the summary.</li>
  </ol> -->
<!-- hide this	<p class="mrgn-bttm-md">The total amount of CEWS you can claim is: <output class="h3 wb-calc nowrap" for="p2c-cews p3-ei p3-cpp p4-tws p4-wsb"
                    data-wb-calc='{"expr": "#p2c-ee + #p2-pyrl + #p3-ei + #p3-cpp - #p4-tws - #p4-wsb", "format": "currency"}'></output></p>
		<p class="crhp-no">The total amount of CRHP you can claim is:  <output class="h3 wb-calc nowrap" for=""
                    data-wb-calc='{}'></output></p>
		<p class="crhp-yes">You cannot claim the CRHP due to your business being a publically traded company.</p> /*until here
<div class="wb-tabs ignore-session">
  <div class="tabpanels">
    <details id="details-panel1">
      <summary>CEWS total amount:<br class="hidden-sm hidden-xs">
        <output class="h3 wb-calc nowrap total-calculated-cews">$0.00</output> <span class="hidden cews-total-tab-fyi">(FYI)</span>
      </summary>
      <div id="cews-statement">
        <div class="alert alert-warning provisional" id="cews-fyi-banner">
          <h3 class="h4 mrgn-tp-0 text-warning">You must apply for the <span class="h4 subsidy-to-apply-for"></span></h3>
          <p>You can only apply for the higher subsidy for the claim period. The <span class="subsidy-for-information"></span> calculation summary is only here for your information.</p>
          <p>After applying for the <span class="subsidy-to-apply-for"></span>, you might see further correspondence where your final <span class="subsidy-for-information"></span> amount is deemed $0, even though we show you here what you would have gotten for comparison.</p>
        </div>
        <p>For your claim for <strong class="claim-period"></strong>: </p>
        <ul class="lst-spcd">
          <li class="p14"> <strong>Line A:</strong> Number of eligible employees: <strong>
            <output class="h3 wb-calc nowrap total-eligible-emps"></output>
            </strong></li>
          <li id="sum-ee-active3" class="hidden p59"><strong>Line A:</strong> Number of eligible active employees:
            <output class="h3 wb-calc nowrap total-active-emps"></output>
          </li>
          <li id="sum-ee-lwp3" class="hidden p59"><strong>Line AA:</strong> Number of eligible employees on leave with pay:
            <output class="h3 wb-calc nowrap total-furloughed-emps"></output>
          </li>
          <li><strong>Line B:</strong> Total eligible remuneration paid: <strong>
            <output class="h3 wb-calc nowrap cews-remuneration-total"></output>
            </strong></li>
          <li id="sum-rev3" class="hidden p59">Revenue drop and subsidy rate
            <ul class="list-unstyled mrgn-lft-md">
              <li class="p11-plus"><strong>Line c0:</strong> Revenue drop for the prior period:
                <output class="h3 wb-calc nowrap" for="p2b-c0"></output>
              </li>
              <li><strong>Line c1:</strong> Revenue drop for the current period:
                <output class="h3 wb-calc nowrap" for="p2b-c1"></output>
              </li>
              <li class="p10-"><strong>Line c2:</strong> Average revenue drop for the previous three months:
                <output class="h3 wb-calc nowrap" for="p2b-c2"></output>
              </li>
              <li><strong>Line c3:</strong> Subsidy rate used for active employees in the calculation of Line C:
                <output class="h3 wb-calc nowrap" for="p2b-c3"></output>
              </li>
            </ul>
          </li>
          <li><strong>Line C:</strong> Basic CEWS (including top-up, if applicable): <strong>
            <output class="h3 wb-calc nowrap basic-cews"></output>
            </strong></li>
          <li><strong>Line D:</strong> Employer’s EI and QPIP premiums payable on salary paid to employees on leave with pay <small>(for
            the claim period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p3-ei"
                    data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output>
            </strong></li>
          <li><strong>Line E:</strong> Employer’s CPP and QPP contributions payable on salary paid to employees on leave with pay <small>(for the claim period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p3-cpp"
                    data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output>
            </strong></li>
          <li class="p14"><strong>Line F:</strong> 10% Temporary Wage Subsidy for Employers reduction <small>(for the claim
            period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p4-tws"
                    data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output>
            </strong></li>
          <li><strong>Line G:</strong> Amounts received by eligible employees under ESDC’s Work-Sharing benefit program <small>(for
            the claim period)</small>: <strong>
            <output class="h3 wb-calc nowrap" for="p4-wsb"
                    data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output>
            </strong></li>
        </ul>
        <div class="alert alert-success provisional">
          <h3>Result</h3>
          <p><strong>Line H:</strong> The <strong>total amount</strong> you will claim for the CEWS for this period is: <strong>
            <output class="h3 wb-calc nowrap total-calculated-cews"></output>
            </strong> This amount is subject to verification. </p>
        </div>
      </div>
      <table class="table" id="cews-statement-table">
        <caption class="h5 mrgn-bttm-0">
        Summary of CEWS calculation
        </caption>
        <tbody>
          <tr>
            <th scope="row" class="h6">Basic CEWS <small class="nowrap">(Line C)</small></th>
            <td class="text-right nowrap"><output class="h6 wb-calc nowrap basic-cews"></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(add) EI and QPIP share <small class="nowrap">(Line D)</small></th>
            <td class="text-right nowrap">+
              <output class="h6 wb-calc nowrap" for="p3-ei"
                  data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(add) CPP and QPP share <small class="nowrap">(Line E)</small></th>
            <td class="text-right nowrap">+
              <output class="h6 wb-calc nowrap" for="p3-cpp"
                  data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(less) 10% Temporary Wage Subsidy for Employers claim <small class="nowrap">(Line
              F)</small></th>
            <td class="text-right nowrap"><abbr title="negative" class="brdr-0">-</abbr>
              <output class="h6 wb-calc nowrap" for="p4-tws"
                  data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output></td>
          </tr>
          <tr>
            <th scope="row" class="h6">(less) Work-Sharing benefit program received <small class="nowrap">(Line G)</small></th>
            <td class="text-right nowrap"><abbr title="negative" class="brdr-0">-</abbr>
              <output class="h6 wb-calc nowrap" for="p4-wsb"
                  data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output></td>
          </tr>
          <tr class="success">
            <th scope="row" class="h6">Your CEWS claim, subject to verification, is <small class="nowrap">(Line H)</small></th>
            <td class="text-right nowrap"><output class="h6 wb-calc nowrap total-calculated-cews"></output></td>
          </tr>
        </tbody>
      </table>
      <p>You are now ready to <strong>print these amounts</strong> so you can enter them into your wage subsidy application. The data is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
      <p class="hidden-print"><a href="#pp-statement" class="wb-lbx btn btn-default btn-lg"
              role="button"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CEWS
        statement</span></span></a></p>
      <nav class="mrgn-bttm-lg mrgn-tp-lg crhp-no hidden">
        <h3 class="wb-inv">Document navigation</h3>
        <ul class="pager">
          <li class="next"><a href="http://test.canada.ca/covid-19-guidance/proto/wage-subsidy/how-apply.html" rel="next">How to apply for CEWS</a></li>
        </ul>
      </nav>
    </details>
    <details id="details-panel2">
      <summary>CRHP total amount:<br class="hidden-sm hidden-xs">
        <output class="h3 wb-calc nowrap total-calculated-crhp">$0.00</output> <span class="hidden crhp-total-tab-fyi">(FYI)</span>
      </summary>
      <div class="crhp-no">
        <div id="crhp-statement">
          <div class="alert alert-warning provisional" id="crhp-fyi-banner">
            <h3 class="h4 mrgn-tp-0 text-warning">You must apply for the <span class="h4 subsidy-to-apply-for"></span></h3>
            <p>You can only apply for the higher subsidy for the claim period. The <span class="subsidy-for-information"></span> calculation summary is only here for your information.</p>
            <p>After applying for the <span class="subsidy-to-apply-for"></span>, you might see further correspondence where your final <span class="subsidy-for-information"></span> amount is deemed $0, even though we show you here what you would have gotten for comparison.</p>
          </div>
          <p class="lead"><strong>Print and keep this record using the print preview button below</strong>. You will need line amounts <strong>300 to 510</strong> when you complete your online application for CRHP.</p>
          <p>For your claim for <strong class="claim-period"></strong>: </p>
          <ul class="lst-spcd">
            <li> <strong>Line 300:</strong> Total Wage Subsidy amount (CEWS): <strong>
              <output class="h3 wb-calc nowrap total-calculated-cews"></output>
              </strong> </li>
            <li><strong>Line 400:</strong> Eligible active employees for the claim period:
              <output class="h3 wb-calc nowrap total-active-emps"></output>
            </li>
            <li><strong>Line 410:</strong> Eligible active employees for period 14 (base):
              <output class="h3 wb-calc nowrap total-active-emps-14"></output>
            </li>
            <li><strong>Line 420:</strong> Current period remuneration (CRHP): <strong>
              <output class="h3 wb-calc nowrap crhp-current-rem"></output>
              </strong> </li>
            <li><strong>Line 430:</strong> Period 14 remuneration (CRHP): <strong>
              <output class="h3 wb-calc nowrap crhp-base-rem"></output>
              </strong> </li>
            <li><strong>Line 500:</strong> Revenue drop for the prior period:
              <output class="h3 wb-calc nowrap" for="p2b-c0"></output>
            </li>
            <li><strong>Line 510:</strong> Revenue drop for the current period:
              <output class="h3 wb-calc nowrap" for="p2b-c1"></output>
            </li>
          </ul>
        </div>
        <table class="table" id="crhp-statement-table">
          <caption class="h5 mrgn-bttm-0">Summary of CRHP calculation</caption>
          <tbody>
            <tr>
              <th scope="row" class="h6">Current period remuneration for CRHP <small class="nowrap">(Line 420)</small></th>
              <td class="text-right nowrap"><output class="h6 wb-calc nowrap crhp-current-rem"></output></td>
            </tr>
            <tr>
              <th scope="row" class="h6">(minus) Base remuneration for CRHP (period 14) <small class="nowrap">(Line 430)</small></th>
              <td class="text-right nowrap">-
                <output class="h6 wb-calc nowrap crhp-base-rem"></output></td>
            </tr>
            <tr>
              <th scope="row" class="h6">(equals) Incremental remuneration paid <small class="nowrap">(Line 440)</small></th>
              <td class="text-right nowrap">=
                <output class="h6 wb-calc nowrap crhp-incremental-rem"></output></td>
            </tr>
            <tr>
              <th scope="row" class="h6">(multiplied by) CRHP subsidy rate <small class="nowrap">(Line 520)</small></th>
              <td class="text-right nowrap"><abbr title="multiply" class="brdr-0">x</abbr>
                <output class="h6 wb-calc nowrap crhp-rate"></output></td>
            </tr>
            <tr class="success">
              <th scope="row" class="h6">Your CRHP claim, subject to verification <small class="nowrap">(Line 600)</small></th>
              <td class="text-right nowrap"><output class="h6 wb-calc nowrap total-calculated-crhp"></output></td>
            </tr>
          </tbody>
        </table>
        <p>You are now ready to <strong>print these amounts</strong> so you can enter them into your hiring subsidy application. The data is not saved on this page. If you leave this page without printing you will need to enter your information again.</p>
        <p class="hidden-print"><a href="#pp-crhp-statement" class="wb-lbx btn btn-default btn-lg"
              role="button"><span class="h3"><span class="glyphicon glyphicon-print"></span> Print preview<span class="wb-inv"> CRHP
          statement</span></span></a></p>
        <nav class="mrgn-bttm-lg mrgn-tp-lg crhp-no hidden">
          <h3 class="wb-inv">Document navigation</h3>
          <ul class="pager">
            <li class="next"><a href="http://test.canada.ca/covid-19-guidance/proto/hiring-program/crhp-how-apply.html" rel="next">How to apply for CRHP</a></li>
          </ul>
        </nav>
      </div>
    </details>
  </div>
</div>
</div>	
End of results//-->
	<!--Start of overlays //-->
<section id="calc-summary" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Summary of online CEWS and CRHP calculator</h2>
  </header>
  <div class="modal-body">
    <p>Line numbers refer to comparable lines you must fill out in the application form for CEWS.</p>
    <p>All amounts are for the claim period unless otherwise noted.</p>
    <ul class="lst-spcd">
      <li>Claim period: <span class="claim-period h3">default</span></li>
      <li id="sec-2" class="hidden">Remuneration for the CRHP base period: <span class="h3 crhp-ineligible-tag">Ineligible</span><span class="h3 crhp-eligible crhp-base-rem">$0.00</span></li>
      <li id="sec-3-a" class="hidden">Revenue drop
        <ul>
          <li>Previous period (Line c0): <span class="priorRevReduction h4 alt-bl-no hidden">0.00%</span><span class="priorRevReduction-alt h4 alt-bl-yes hidden">0.00%</span></li>
          <li>Current period (Line c1): <span class="currentRevReduction h4 alt-bl-no hidden">$0.00</span><span class="currentRevReduction-alt h4 alt-bl-yes hidden">$0.00</span></li>
          <li class="p7-and-before">Average revenue drop for pervious three months (Line c2): <span class="rev-drop-top-up h4 alt-bl-no hidden">$0.00</span><span class="rev-drop-top-up-alt h4 alt-bl-yes hidden">$0.00</span></li>
        </ul>
      </li>
      <li id="sec-3-b" class="hidden">Rates (based on the higher revenue drop)
        <ul>
          <li>Base rate: <span class="base-rate h4 alt-bl-no hidden">0.00%</span><span class="base-rate-alt h4 alt-bl-yes hidden">0.00%</span></li>
          <li>Top up rate: <span class="top-up-rate h4 alt-bl-no hidden">0.00%</span><span class="top-up-rate-alt h4 alt-bl-yes hidden">0.00%</span></li>
          <li>Overall CEWS rate (Line c3): <span class="cews-rate h4 alt-bl-no hidden">0.00%</span><span class="cews-rate-alt h4 alt-bl-yes hidden">0.00%</span></li>
        </ul>
      </li>
      <li id="sec-4-a" class="hidden">Employees
        <ul>
          <li class="p14">Eligible  employees (Line A):
            <output class="h4 wb-calc nowrap" for="p2c-ee" data-wb-calc='{"expr": "#p2c-ee * 1"}'></output>
          </li>
          <li class="p59">Eligible active employees (Line A):
            <output class="h4 wb-calc nowrap" for="p2c-ee-alt1" data-wb-calc='{"expr": "#p2c-ee-alt1 * 1"}'></output>
          </li>
          <li class="p59">Eligible employees on leave with pay (Line AA):
            <output class="h4 wb-calc nowrap" for="p2c-ee-alt2" data-wb-calc='{"expr": "#p2c-ee-alt1 * 2"}'></output>
          </li>
          <li>Eligible remuneration paid (Line B):
            <output class="h4 wb-calc nowrap" for="p2c-pyrl" data-wb-calc='{"expr": "#p2b-pyrl * 1", "format": "currency"}'></output>
          </li>
        </ul>
      </li>
      <li id="sec-4-b" class="hidden">Basic CEWS (Line C):
        <output class="h3 wb-calc nowrap" for="p2c-cews" data-wb-calc='{"expr": "#p2c-cews * 1", "format": "currency"}'></output>
      </li>
      <li id="sec-5" class="hidden">Premiums and contributions
        <ul>
          <li>EI and QPIP permiums payable (Line D):
            <output class="h4 wb-calc nowrap" for="p3-ei" data-wb-calc='{"expr": "#p3-ei * 1", "format": "currency"}'></output>
          </li>
          <li>CPP and QPP permiums payable (Line E):
            <output class="h4 wb-calc nowrap" for="p3-cpp" data-wb-calc='{"expr": "#p3-cpp * 1", "format": "currency"}'></output>
          </li>
        </ul>
      </li>
      <li id="sec-6" class="hidden">Deductions
        <ul>
          <li class="p14">10% TWS reduction (Line F):
            <output class="h4 wb-calc nowrap" for="p4-tws" data-wb-calc='{"expr": "#p4-tws * 1", "format": "currency"}'></output>
          </li>
          <li>Work-sharing benefits received (Line G):
            <output class="h4 wb-calc nowrap" for="p4-wsb" data-wb-calc='{"expr": "#p4-wsb * 1", "format": "currency"}'></output>
          </li>
        </ul>
      </li>
    </ul>
    <p>Further explainations will be in the summary review before the final calculation.</p>
    
  </div>
</section>
<section id="armslength" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Arm's length and non-arm's length</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #nonarm-cntnt">
    <p><a href="../wage-subsidy/cews-who-employees.html#nonarm">Non-arm’s-length and arm’s-length eligible employees</a></p>
  </div>
</section>
<section id="contributions" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Lines D and E - Employer’s EI, QPIP, CPP, and QPP premiums payable on salary paid to
      employees on leave with pay </h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #refund-contrib">
    <p><a href="../wage-subsidy/cews-who-employees.html#leave">Active employees and employees on leave with pay</a></p>
  </div>
</section>
<span class="mfp-hide">
<section id="tempwage" class="modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">10% Temporary Wage Subsidy for Employers reduction</h2>
  </header>
  <div class="modal-body">
    <p class="lead">Line F –10% Temporary Wage Subsidy for Employers reduction</p>
    <p><strong>For claim periods 5 and later</strong>, the amount for this line will be 0.</p>
    <p><strong>For periods 1 to 4</strong>, you will need to calculate the amount of your 10% Temporary Wage
      Subsidy (a separate
      program) that applies to this CEWS claim period before you enter it at Line F.</p>
    <p>Generally, the 10% Temporary Wage Subsidy for Employers is equal to:</p>
    <p class="mrgn-lft-md"><strong>10% of the remuneration you paid from March 18 to June 19, 2020, up to $1,375
      for
      each eligible employee</strong></p>
    <p>The total maximum of the temporary subsidy is $25,000 per employer.</p>
    <p>CEWS and the 10% Temporary Wage Subsidy for Employers are intended to provide total support of up to 75%,
      not
      75% + 10%. If you are eligible for both wage subsidies for a claim period, any amount you calculate under
      the
      10% Temporary Wage Subsidy for Employers in the period will reduce the amount available for you to claim
      under
      the CEWS in that same period.</p>
    <p>You may choose to have the 10% Temporary Wage Subsidy be less than 10% of the remuneration you paid so that
      you can receive a higher amount of Canada Emergency Wage Subsidy. If you enter 0 as your amount for the 10%
      Temporary Wage Subsidy for Employers in your CEWS application, the CEWS will be determined as if you are
      electing 0% as the prescribed percentage for 10% Temporary Wage Subsidy for Employers, and are requesting
      the
      maximum amount of CEWS instead.</p>
    <p>Read more: <a
              href="/content/canadasite/en/revenue-agency/services/subsidy/temporary-wage-subsidy.html">Temporary Wage
      Subsidy for Employers</a></p>
  </div>
</section>
</span>
<section id="worksharing" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Line G - Amounts received by eligible employees under ESDC's Work-Sharing benefit
      program </h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace="../wage-subsidy/cews-who-employees.html #worksharing-cntnt"><a
            href="../wage-subsidy/cews-who-employees.html#worksharing-cntnt">Eligible employees participating in a Work-Sharing benefit
      program</a></div>
    <p>Enter the total amount received under the Work-Sharing program by your eligible employees during the period
      covered by this claim in the box for line G. </p>
  </div>
</section>
<section id="lwp" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Active employees and employees on leave with pay</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #leave-cntnt">
    <p><a href="../hiring-program/crhp-who-employees.html#leave-cntnt">Active employees and employees on leave with pay</a></p>
  </div>
</section>
<section id="pp-statement" class="mfp-hide modal-dialog modal-content overlay-def experimental">
  <header class="modal-header">
    <h2 class="modal-title">Print preview for CEWS statement</h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace="#cews-statement"></div>
    <div data-ajax-replace="#cews-statement-table"></div>
    <ul class="list-inline">
      <li>
        <button onclick="window.print()" class="btn btn-success btn-lg"><span
                class="glyphicon glyphicon-print"></span> Print this statement</button>
      </li>
      <li class="pull-right">
        <button title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss"
              type="button">Close<span class="wb-inv"> overlay</span></button>
      </li>
    </ul>
  </div>
  <div class="modal-footer hidden"> </div>
</section>
<section id="pp-crhp-statement" class="mfp-hide modal-dialog modal-content overlay-def experimental">
  <header class="modal-header">
    <h2 class="modal-title">Print preview for CRHP statement</h2>
  </header>
  <div class="modal-body">
    <div data-ajax-replace=" #crhp-statement"></div>
    <div data-ajax-replace=" #crhp-statement-table"></div>
    <ul class="list-inline">
      <li>
        <button onclick="window.print()" class="btn btn-success btn-lg"><span
                class="glyphicon glyphicon-print"></span> Print this statement</button>
      </li>
      <li class="pull-right">
        <button title="Close overlay" class="btn btn-sm btn-default pull-right popup-modal-dismiss"
              type="button">Close<span class="wb-inv"> overlay</span></button>
      </li>
    </ul>
  </div>
  <div class="modal-footer hidden"> </div>
</section>
<section id="baseline-optns" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Compare the baseline revenue options</h2>
  </header>
  <div class="modal-body">
    <h3 class="mrgn-tp-sm">Baseline revenue and prior reference period options</h3>
    <div data-ajax-replace="../wage-subsidy/cews-how-much-reduction.html #basebaselinecalc-cntnt">
      <p><a href="../wage-subsidy/cews-how-much-reduction.html#basebaselinecalc-cntnt">Baseline revenue and prior reference period
        options</a></p>
    </div>
    <details>
      <summary>Example: Choosing a revenue comparison option</summary>
      <div data-ajax-replace="../wage-subsidy/cews-how-much-reduction.html #rev-drop-example-1-cntnt"> </div>
    </details>
  </div>
</section>
<section id="baseline-rem" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Pre-crisis pay (baseline remuneration)</h2>
  </header>
  <div class="modal-body" data-ajax-replace="../wage-subsidy/cews-who-employees.html #baselineremuneration-cntnt">
    <p><a href="../wage-subsidy/cews-who-employees.html#baselineremuneration">Pre-crisis pay (baseline remuneration)</a></p>
  </div>
</section>
<section id="pay-claim" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Claim period pay per week<span class="emp-lv hidden"> and active employees or employees
      on leave with pay</span></h2>
  </header>
  <div class="modal-body">
    <h3>Claim period pay per week</h3>
    <div data-ajax-replace="../wage-subsidy/cews-who-employees.html #week-cntnt">
      <p><a href="../wage-subsidy/cews-who-employees.html#week">Claim period pay per week</a></p>
    </div>
    <div class="emp-lv hidden">
      <h3>Active employees and employees on leave with pay</h3>
      <div data-ajax-replace="../wage-subsidy/cews-who-employees.html #leave-cntnt">
        <p><a href="../wage-subsidy/cews-who-employees.html#leave">Active employees and employees on leave with pay</a></p>
      </div>
    </div>
  </div>
</section>
<section id="eligible-rev" class="mfp-hide modal-dialog modal-content overlay-def">
  <header class="modal-header">
    <h2 class="modal-title">Eligible revenue</h2>
  </header>
  <div class="modal-body">
    <p>These months are needed to calculate your revenue drops for the current period, prior period, and top-up
      period, using your chosen baseline.</p>
    <p>Read more about <a href="who-apply.html#eligible-revenue" target="_blank">eligible <span
              class="nowrap">revenue<span class="far fa-window-restore mrgn-lft-sm"></span></span><span class="wb-inv"> (opens in new window)</span></a></p>
  </div>
</section>
	<!--End of overlays//-->
	
	

  <div id="def-preFooter"></div>
  <!-- Write closure template --> 
  <script type="text/javascript">
      var defPreFooter = document.getElementById("def-preFooter");
      defPreFooter.outerHTML = wet.builder.preFooter({
        dateModified: "2021-05-18",
        showPostContent: true,
        showFeedback: true,
        showShare: true
      });
    </script> 
</main>
<div id="def-footer"></div>
<!-- Write closure template --> 
<script type="text/javascript">
    var defFooter = document.getElementById("def-footer");
    defFooter.outerHTML = wet.builder.footer({
      showFooter: true,
      showFeatures: true
    });
  </script> 
<!-- Write closure template --> 
<script type="text/javascript">
    document.write(wet.builder.refFooter({
    }));
  </script> 
<script src="https://test.canada.ca/covid-19-guidance/proto/js/alpha-banner.js"></script> 
<!--Scripts by CXO149 May 2021 //--> 
<script>
    /**
     * EmployeeFormGenerator class
     * 
     * used to help creating new employee wage forms based on the chosen pay schedule
     */
    var EmployeeFormGenerator = (function () {
      /**
       * Constructor
       * 
       * @param {Int} paySchedule the numeric value of the chosen pay schedule
       */
      function EmployeeFormGenerator(paySchedule) {
        //the payschedule chosen by the user
        this.paySchedule = paySchedule;
        //variables to avoid magic numbers & strings
        this.prefix = "";
        this.numberOfEmployees = 1;
        this.weekly = 1;
        this.biWeekly = 2;
        this.templateId = "emp-1";
        this.armsLengthId = "arms-";
        this.baselineId = "baseline-"
        this.employeeNumberClass = "employeeNumber";
        this.removeablePanelClass = "extra-emp-pnl";
        this.currencyPlaceholderValue = "$0";
        this.weeklySummaryBaseClass = "emp-wkly-wage-1";
        this.weeklySummaryClass = "emp-wkly-wage-";
        this.employeeIndexRegex = /-1$/g;
        this.prefix = this.weeklyPrefix
      }

      /**
       * generateNewEmployeeForm
       * 
       * function called to run the routine to generate the new form
       * 
       * @param {Int} numEmps the number of employee panels currently on the 
       * page
       * 
       * @return {DOMDocumentFragment} the cloned template with ID's and other 
       * attributes updated for use in as a new employee wage form
       */
      EmployeeFormGenerator.prototype.generateNewEmployeeForm = function (numEmps) {
        //update number of employee frames
        this.numberOfEmployees = numEmps;
        //generate another pay form
        var newForm = this.generateNewForm();
        return newForm;
      }

      /**
       * generateNewForm
       * 

       * clone the template DOM element and update the required attributes for 
       * a new employee wage form
       * 
       * @calls EmployeeFormGenerator::updateArmsLengthElementId()
       * @calls EmployeeFormGenerator::updateBaselineWageElementId() to update 
       * the baseline wage element
       * @calls EmployeeFormGenerator::setUpdatesAndUpdatedByData() to update 
       * the data-updates and data-update-by attributes
       * @calls EmployeeFormGenerator::updateInputs() to update the input fields
       * @calls EmployeeFormGenerator::updateTableIds() to update the summary 
       * table cells
       * @calls EmployeeFormGenerator::openAccordion() to open all accordion 
       * elements
       *
       * @return {DOMDocumentFragment} the update DOM fragment to be used as 
       * the new employee wage form
       */
      EmployeeFormGenerator.prototype.generateNewForm = function () {
        var frag = $("#" + this.templateId).clone();
        //update the frame id
        $(frag).attr("id", $(frag).attr("id").replace("-1", "-" + this.numberOfEmployees));
        //add class that will be used to identify panels to remove when the selected pay schedule is changed
        $(frag).addClass(this.removeablePanelClass);
        //update the employee number text
        var numEmps = this.numberOfEmployees;
        $(frag).find("." + this.employeeNumberClass).each(function (e, element) {
          $(element).text(numEmps);
        });
        //add the aria-live=polite attr for screen readers
        $(frag).attr("aria-live", "polite");
        var rmBtn = $(frag).find(".rm-emp");
        $(rmBtn).removeClass("hidden");
        //update the DOM fragment
        this.updateArmsLengthElementId(frag);
        this.updateBaselineWageElementId(frag);
        this.setUpdatesAndUpdatedByData(frag);
        this.updateInputs(frag);
        this.updateTableIds(frag);
        this.openAccordion(frag);
        this.updateSummaryHeading(frag);
        return frag;
      }

      /**
       * updateArmsLengthElementId
       * 
       * update the arms length dropdown element
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateArmsLengthElementId = function (frag) {
        var armsLengthElement = $(frag).find(
          "#" + this.armsLengthId + "1"
        );
        $(armsLengthElement).attr("id", $(armsLengthElement).attr("id").replace(this.employeeIndexRegex, "-" + this.numberOfEmployees));
        $(armsLengthElement).first("option").attr("selected", true);
      }

      /**
       * updateBaselineWageElementId
       * 
       * update the baseline wage input id and reset the value
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateBaselineWageElementId = function (frag) {
        var baselineWageElement = $(frag).find(
          "#" + this.baselineId + "1"
        );
        $(baselineWageElement).attr("id", $(baselineWageElement).attr("id").replace(this.employeeIndexRegex, "-" + this.numberOfEmployees));
        $(baselineWageElement).val("");
      }

      /**
       * updateInputs
       * 
       * update the id, class, and value for the new inputs. also update the 
       * label 'for' value with the new input id
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateInputs = function (frag) {
        var inputs = $(frag).find("input[id$='-1']");
        var numEmps = this.numberOfEmployees;
        var weeklyBaseClass = this.weeklySummaryBaseClass;
        var weeklyClass = this.weeklySummaryClass;
        var indexRegex = this.employeeIndexRegex;
        $(inputs).each(function (i, element) {
          if ($(element).is(":checkbox")) {
            $(element).prop("checked", false);
          } else if ($(element).attr("type", "text")) {
            $(element).val("");
          }
          //need to get the label for each of these elements and update the 'for' attr
          var label = $(frag).find("label[for='" + $(element).attr("id") + "']");
          $(element).attr(
            "id",
            $(element).attr("id").replace(indexRegex, "-" + numEmps)
          );
          $(label).attr(
            "for",
            $(label).attr("for").replace(indexRegex, "-" + numEmps)
          );
          //update the class that drives employee wage summary 
          if ($(element).hasClass(weeklyBaseClass)) {
            $(element).removeClass(weeklyBaseClass);
            $(element).addClass(weeklyClass + numEmps);
          }
        });
      }

      /**
       * setUpdatesAndUpdatedByData
       * 
       * increment the date-updates and data-updated-by value so the 
       * appropriate summary table is updated
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.setUpdatesAndUpdatedByData = function (frag) {
        var updateElements = $(frag).find("*[data-updates$='-1']");
        var updatedByElements = $(frag).find("*[data-updated-by$='-1']");
        var numEmps = this.numberOfEmployees;
        var indexRegex = this.employeeIndexRegex;
        $(updateElements).each(function (i, element) {
          var newval = $(element).data("updates").replace(indexRegex, "-" + numEmps);
          $(element).attr("data-updates", newval);
        });
        $(updatedByElements).each(function (i, element) {
          var newval = $(element).data("updated-by").replace(indexRegex, "-" + numEmps)
          $(element).attr("data-updated-by", newval);
        });
      }

      /**
       * updateTableIds
       * 
       * update table cell id and values required for employee wage summary
       * 
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.updateTableIds = function (frag) {
        var tds = $(frag).find("td[id$='-amt-1']");
        var totalCell = $(frag).find("td[id$='ttl-1']");
        var numEmps = this.numberOfEmployees;
        var currencyPlaceholderValue = this.currencyPlaceholderValue;
        var indexRegex = this.employeeIndexRegex;
        $(tds).each(function (i, element) {
          $(element).attr(
            "id",
            $(element).attr("id").replace(indexRegex, "-" + numEmps)
          );
          $(element).text(currencyPlaceholderValue);
        });
        $(totalCell).attr(
          "id",
          $(totalCell).attr("id").replace(indexRegex, "-" + numEmps)
        );
        $(totalCell).text(currencyPlaceholderValue);
        $(frag).find("#emp-no-elgbl-1").attr("id", "emp-no-elgbl-" + this.numberOfEmployees);
        $(frag).find("#emp-smry-1").attr("id", "emp-smry-" + this.numberOfEmployees);
      }

      /**
       * openAccordion
       *
       * open all open accordions
       *
       * @param {DOMDocumentFragment} frag the cloned template
       */
      EmployeeFormGenerator.prototype.openAccordion = function (frag) {
        var accordion = $(frag).find("details").each(function (i, element) {
          $(element).attr("open", "open");
        });
      }

      EmployeeFormGenerator.prototype.updateSummaryHeading = function (frag) {
        var heading = $(frag).find('.ee-name-1');
        $(heading).removeClass("ee-name-1");
        $(heading).addClass("ee-name-" + this.numberOfEmployees);
        $(heading).text("Employee " + this.numberOfEmployees);
      }

      return EmployeeFormGenerator;
    })();

  </script> 
<script>
    (function ($, window, wb) {
      "use strict";
      /*
      * Variable and function definitions.
      * These are global to the plugin - meaning that they will be initialized once per page,
      * not once per instance of plugin on the page. So, this is a good place to define
      * variables that are common to all instances of the plugin on a page.
      */
      // function that should be moved as a helper class or something
      const toMoney = new Intl.NumberFormat(wb.lang + "-CA", {
        style: "currency",
        currency: "CAD",
        minimumFractionDigits: 2
      });
      var employeeFormGenerator = new EmployeeFormGenerator();
      var componentName = "wb-calc",
        selector = "." + componentName,
        initEvent = "wb-init" + selector,
        $document = wb.doc,
        defaults = {},
        sep = {
          iso: {
            en: "--",
            fr: "--"
          },
          claim: {
            en: " to ",
            fr: " au "
          }
        },
        /**
         * @method init
         * @param {jQuery Event} event Event that triggered the function call
         */
        init = function (event) {
          // Start initialization
          // returns DOM object = proceed with init
          // returns undefined = do not proceed with init (e.g., already initialized)

          var elm = wb.init(event, componentName, selector),
            $elm,
            settings;

          if (elm) {
            $elm = $(elm);
            // ... Do the plugin initialisation
            // Get the plugin JSON configuration set on attribute data-wb-helloworld
            settings = $.extend(
              true,
              {},
              defaults,
              window[componentName],
              wb.getData($elm, componentName)
            );

            // Call my custom event
            $elm.trigger("change", settings);
            // Identify that initialization has completed
            wb.ready($elm, componentName);
          }
        };

      // Plugin event handlers
      $document.on("change", "input", function (event) {
        var elm = event.currentTarget,
          $elm = $(elm),
          $elmId = $elm.attr("id"),
          data = wb.getData($("output[for='" + $elmId + "']"), componentName),
          value = $elm.val().replace(/\,\s/g, ''), // Needs to be replaced by data.expr evaluation
          total = 0;

        if (data.expr) {
          //protect against NaN values
          if (value == "") {
            value = 0;
          }
          if (data.format === "currency") {
            $("output[for='" + $elmId + "']").html(toMoney.format(value * 1));
          } else {
            $("output[for='" + $elmId + "']").html(value * 1);
          };
        }

        total = ($("#p2c-cews").val() * 1) + ($("#p3-ei").val() * 1) + ($("#p3-cpp").val() * 1) - ($("#p4-tws").val() * 1) - ($("#p4-wsb").val() * 1);
        if (total < 0) {
          $("[for='p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(0));
        } else {
          $("[for='p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(total));
        };
      });

      $document.on("change", selector, function (event, data) {
        var elm = event.currentTarget,
          $elm = $(elm),
          $input = $("#" + $elm.attr("for")),
          value = $input.val();

        if (data && data.format === "currency") {
          $elm.html(toMoney.format(value * 1));
        } else {
          $elm.html(value * 1);
        };
        $("[for='p2c-ee p2c-pyrl p2c-cews p3-ei p3-cpp p4-tws p4-wsb']").html(toMoney.format(0));
      });

      //when the claim period dropdown is changed
      $document.on("change", "#claim-period", function (event) {
        var rangeISO = $(this).find('option:selected').val(),
          startDateISO = rangeISO.substring(0, rangeISO.indexOf(sep.iso[wb.lang])),
          endDateISO = rangeISO.substring(rangeISO.indexOf(sep.iso[wb.lang]) + sep.iso[wb.lang].length, rangeISO.length),
          rangeClaim = $(this).find("option:selected").text(),
          rangeClaimNo = rangeClaim.substring(7, 8),
          startDateClaim = rangeClaim.substring(0, rangeClaim.indexOf(sep.claim[wb.lang])),
          endDateClaim = rangeClaim.substring(rangeClaim.indexOf(sep.claim[wb.lang]) + sep.claim[wb.lang].length, rangeClaim.length);
        
        // var endDateParts = endDateISO.split("-");
        var claimMonth = getClaimMonth(rangeISO);
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        // var claimMonths = getMonthNamesPlusYear(endDateParts[1], claimPeriod); //send the endDate month number
        if (!$("#claim-period option:selected:eq(0)")) {
          $('.claim-period').html("<time datetime=\"" + startDateISO + "\">" + startDateClaim + "</time>" + sep.claim[wb.lang] + "<time datetime=\"" + endDateISO + "\">" + endDateClaim + "</time>");
          $(".crhp-rate").text(toPercent(0));
        } else {
          $('.claim-period').html($("#claim-period option:selected").text());
          $(".claim-period-no").text(claimPeriod);
          if ((revReduction >= 0.1 && claimPeriod > 17) || (revReduction > 0 && claimPeriod == 17)) {
            var crhpRateScale = [50, 50, 50, 40, 30, 20];
            $(".crhp-rate").text(toPercent(crhpRateScale[claimPeriod - 17]));
            crhpRate = parseFloat("0." + crhpRateScale[claimPeriod - 17]);
          } else {
            $(".crhp-rate").text(toPercent(0));
            $('.crhp-eligible-tag').addClass("hidden");
            crhpRate = 0;
          }
          if (claimPeriod < 17) {
            $("#details-panel2-lnk").parent().addClass("hidden");
          } else {
            $("#details-panel2-lnk").parent().removeClass("hidden");
          }
        }
        //show/hide elements based on chosen claim period

        //defaults
        var nolongeravailablePeriod = "";
        $('*[class*="nolongeravailable-1-"]').addClass("hidden");
        if ($('*[class*="nolongeravailable-1-"]').length > 0) {
          var nolongeravailable = $('*[class*="nolongeravailable-1-"]').attr('class');
          nolongeravailable = nolongeravailable.split(" ");
          $(nolongeravailable).each(function (i, element) {
            if (nolongeravailable[i].indexOf("longeravailable-1-") > 0) {
              nolongeravailablePeriod = nolongeravailable[i].split("-")[2];
            }
          });
          if (claimPeriod <= nolongeravailablePeriod) {
            $('*[class*="nolongeravailable-1-"]').removeClass("hidden");
          }
        }


		    //defaults
        $("#2021-11-yes").closest("div.form-group").addClass("hidden");
        $("#2021-10-yes").closest("div.form-group").addClass("hidden");
        $("#2021-09-yes").closest("div.form-group").addClass("hidden");
        $("#2021-08-yes").closest("div.form-group").addClass("hidden");
        $("#2021-07-yes").closest("div.form-group").addClass("hidden");
        $("#2021-06-yes").closest("div.form-group").addClass("hidden");
        $("#2021-05-yes").closest("div.form-group").addClass("hidden");
        $("#2021-04-yes").closest("div.form-group").addClass("hidden");
        $("#2021-03-yes").closest("div.form-group").addClass("hidden");
        $("#2021-02-yes").closest("div.form-group").addClass("hidden");
        $("#2021-01-yes").closest("div.form-group").addClass("hidden");
        $("#2020-12-yes").closest("div.form-group").addClass("hidden");
        $("#2020-11-yes").closest("div.form-group").addClass("hidden");
        $("#2020-10-yes").closest("div.form-group").addClass("hidden");
        $("#2020-09-yes").closest("div.form-group").addClass("hidden");
        $("#2020-08-yes").closest("div.form-group").addClass("hidden");
        $("#2020-07-yes").closest("div.form-group").addClass("hidden");
        $("#2020-06-yes").closest("div.form-group").addClass("hidden");
        $("#2020-05-yes").closest("div.form-group").addClass("hidden");
        $("#2020-04-yes").closest("div.form-group").addClass("hidden");
        $("#2021-11-no").closest("div.form-group").addClass("hidden");
        $("#2021-10-no").closest("div.form-group").addClass("hidden");
        $("#2021-09-no").closest("div.form-group").addClass("hidden");
        $("#2021-08-no").closest("div.form-group").addClass("hidden");
        $("#2021-07-no").closest("div.form-group").addClass("hidden");
        $("#2021-06-no").closest("div.form-group").addClass("hidden");
        $("#2021-05-no").closest("div.form-group").addClass("hidden");
        $("#2021-04-no").closest("div.form-group").addClass("hidden");
        $("#2021-03-no").closest("div.form-group").addClass("hidden");
        $("#2021-02-no").closest("div.form-group").addClass("hidden");
        $("#2020-02-no").closest("div.form-group").addClass("hidden");
        $("#2021-01-no").closest("div.form-group").addClass("hidden");
        $("#2020-01-no").closest("div.form-group").addClass("hidden");
        $("#2020-12-no").closest("div.form-group").addClass("hidden");
        $("#2019-12-no").closest("div.form-group").addClass("hidden");
        $("#2020-11-no").closest("div.form-group").addClass("hidden");
        $("#2019-11-no").closest("div.form-group").addClass("hidden");
        $("#2020-10-no").closest("div.form-group").addClass("hidden");
        $("#2019-10-no").closest("div.form-group").addClass("hidden");
        $("#2020-09-no").closest("div.form-group").addClass("hidden");
        $("#2019-09-no").closest("div.form-group").addClass("hidden");
        $("#2020-08-no").closest("div.form-group").addClass("hidden");
        $("#2019-08-no").closest("div.form-group").addClass("hidden");
        $("#2020-07-no").closest("div.form-group").addClass("hidden");
        $("#2019-07-no").closest("div.form-group").addClass("hidden");
        $("#2020-06-no").closest("div.form-group").addClass("hidden");
        $("#2019-06-no").closest("div.form-group").addClass("hidden");
        $("#2020-05-no").closest("div.form-group").addClass("hidden");
        $("#2019-05-no").closest("div.form-group").addClass("hidden");
        $("#2020-04-no").closest("div.form-group").addClass("hidden");
        $("#2019-04-no").closest("div.form-group").addClass("hidden");
        $("#2019-03-no").closest("div.form-group").addClass("hidden");
        $("#cal-sprdsht-p1-4").addClass("hidden");
        $("#cal-sprdsht-none").addClass("hidden");
        $("#cal-sprsht-p5").addClass("hidden");
        $("#cal-sprsht-p7").addClass("hidden");
        $("#cal-sprsht-p9").addClass("hidden");
        $("#cal-sprsht-p11").addClass("hidden");
        $("#no-crhp-message").addClass("hidden");
        $("#crhp-questions").removeClass("hidden");
        $(".crhp-eligible").removeClass("hidden");
        $(".p18-plus").addClass("hidden");
        $(".p17-only").addClass("hidden");
        $(".p14-crhp").addClass("hidden");

        if (claimPeriod < 17) {
          $("#no-crhp-message").removeClass("hidden");
          $("#crhp-questions").addClass("hidden");
          $(".crhp-eligible").addClass("hidden");
        }

        switch (claimPeriod) {
          case 22:
            $(".p18-plus").removeClass("hidden");
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            $("#2021-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            break;
          case 21:
            $(".p18-plus").removeClass("hidden");
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2021-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            break;
          case 20:
            $(".p18-plus").removeClass("hidden");
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2021-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            break;
          case 19:
            $(".p18-plus").removeClass("hidden"); 
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2021-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            break;
          case 18:
            $(".p18-plus").removeClass("hidden");
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2021-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            break;
          case 17:
            $(".p17-only").removeClass("hidden");
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            $("#2021-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            break;
          case 16:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            $("#2021-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            break;
          case 15:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-03-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            $("#2021-03-no").closest("div.form-group").removeClass("hidden");
            $("#2019-03-no").closest("div.form-group").removeClass("hidden");
            break;
          case 14:
            $(".p14-crhp").removeClass("hidden");
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-03-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-02-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-03-no").closest("div.form-group").removeClass("hidden");
            $("#2019-03-no").closest("div.form-group").removeClass("hidden");
            $("#2021-02-no").closest("div.form-group").removeClass("hidden");
            $("#2020-02-no").closest("div.form-group").removeClass("hidden");
            break;
          case 13:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-02-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-01-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-02-no").closest("div.form-group").removeClass("hidden");
            $("#2020-02-no").closest("div.form-group").removeClass("hidden");
            $("#2021-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-01-no").closest("div.form-group").removeClass("hidden");
            break;
          case 12:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2021-01-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2021-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-01-no").closest("div.form-group").removeClass("hidden");
            $("#2020-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            break;
          case 11:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").removeClass("hidden");
            $(".p11-only").removeClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            $("#2020-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            break;
          case 10:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").removeClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").removeClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $("#cal-sprsht-p9").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-12-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-12-no").closest("div.form-group").removeClass("hidden");
            $("#2019-12-no").closest("div.form-group").removeClass("hidden");
            $("#2020-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            $("#2020-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            break;
          case 9:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").removeClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").removeClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-11-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-11-no").closest("div.form-group").removeClass("hidden");
            $("#2019-11-no").closest("div.form-group").removeClass("hidden");
            $("#2020-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            break;
          case 8:
            $(".p7-and-before").addClass("hidden");
            $(".p8-plus").removeClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").removeClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-10-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-10-no").closest("div.form-group").removeClass("hidden");
            $("#2019-10-no").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            break;
          case 7:
            $(".p7-and-before").removeClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").removeClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-09-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-09-no").closest("div.form-group").removeClass("hidden");
            $("#2019-09-no").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2020-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            break;
          case 6:
            $(".p7-and-before").removeClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").removeClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-08-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-08-no").closest("div.form-group").removeClass("hidden");
            $("#2019-08-no").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2020-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            $("#2020-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            break;
          case 5:
            $(".p7-and-before").removeClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").removeClass("hidden");
            $("#rate-reduction").removeClass("hidden");
            $(".emp-lv").removeClass("hidden");
            $("#p4-tws").prop("readonly", true);
            $("#p4-tws").val("0.00");
            $("#p4-tws-disclaimer").removeClass("hidden");
            $(".p59").removeClass("hidden");
            $(".p14").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            $("#2020-07-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-06-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-05-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-04-yes").closest("div.form-group").removeClass("hidden");
            $("#2020-07-no").closest("div.form-group").removeClass("hidden");
            $("#2019-07-no").closest("div.form-group").removeClass("hidden");
            $("#2020-06-no").closest("div.form-group").removeClass("hidden");
            $("#2019-06-no").closest("div.form-group").removeClass("hidden");
            $("#2020-05-no").closest("div.form-group").removeClass("hidden");
            $("#2019-05-no").closest("div.form-group").removeClass("hidden");
            $("#2020-04-no").closest("div.form-group").removeClass("hidden");
            $("#2019-04-no").closest("div.form-group").removeClass("hidden");
            break
          case 4:
          case 3:
          case 2:
          case 1:
            $(".p7-and-before").removeClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").addClass("hidden");
            $(".emp-lv").addClass("hidden");
            $("#p4-tws").prop("readonly", false);
            $("#p4-tws-disclaimer").addClass("hidden");
            $(".p14").removeClass("hidden");
            $(".p59").addClass("hidden");
            $("#cal-sprdsht-none").addClass("hidden");
            $(".btn-cews-cal").removeClass("disabled");
            $(".btn-cews-cal").prop("disabled", false);
            $(".choose-claim-period").addClass("hidden");
            break;
          default:
            $(".p7-and-before").removeClass("hidden");
            $(".p8-plus").addClass("hidden");
            $(".p11-plus").addClass("hidden");
            $(".p11-only").addClass("hidden");
            $(".p10-").addClass("hidden");
            $("#rate-reduction").addClass("hidden");
            $(".emp-lv").addClass("hidden");
            $("#p4-tws").prop("readonly", false);
            $("#p4-tws-disclaimer").addClass("hidden");
            $(".p59").addClass("hidden");
            $(".p14").removeClass("hidden");
            $(".btn-cews-cal").addClass("disabled");
            $(".btn-cews-cal").prop("disabled", true);
            $(".choose-claim-period").removeClass("hidden");
        }

        //recalculate the summary based on the values that are already there
        if ($("#2020-" + claimMonth + "-no").is(":visible") || $("#2021-" + claimMonth + "-no").is(":visible")) {
          calculateRevenueDrop();
        } else if ($("#2020-" + claimMonth + "-yes").is(":visible") || $("#2021-" + claimMonth + "-yes").is(":visible")) {
          calculateRevenueDropAlt();
        // } else {
        //   NoCERSRate();
        }
      });

      /**
      * NoCERSRate()
      * Fill in default values of 0% when there's not enough information to determine the rate
      */
      function NoCEWSRate() {
        cewsRate = 0;
        crhpRate = 0;
        $(".currentRevReduction").text(toPercent("0"));
        $(".priorRevReduction").text(toPercent("0"));
        $(".preferentialRevReduction").text(toPercent("0"));
        $(".base-rate").text(toPercent("0"));
        recalculateAllEmployees();
      }

      function recalculateAllEmployees() {
        $(".arms-length-select").each(function (i, element) {
          var parts = $(element).prop("id").split("-");
          var employeeNumber = parts[parts.length - 1];
          recalculateEmployeeAmounts(employeeNumber);
        });
        calculateTotals();
      }

      // when the submit button is clicked
      $document.on("click", ".steps-wrapper:nth-child(5) button:contains('Next')", function (event) {
        event.preventDefault();
        //remove the required attribute in all hidden elements
        $("[required]:hidden").each(function (i, element) {
          $(element).removeAttr("required");
        });
        var count = 0,
          $elms = $(".wb-frmvld select[required], .wb-frmvld input[required]"),
          $emptyElms = [];
        //find all required fields that were left empty
        for (let i = 0; i < $($elms).length; i++) {
          var $elm = $($elms).eq(i);
          if ($elm.val() == "") {
            $emptyElms.push($elm);
            count++;
          }
        }
        //if WET4 already has errors, scroll to those
        if ($("#errors-default")[0]) {
          $('html, body').animate({ scrollTop: $("#errors-default").offset().top }, 'slow');
          //scroll to the FIRST element that failed custom validation
        } else if ($emptyElms[0]) {
          $('html, body').animate({ scrollTop: $($emptyElms[0]).offset().top }, 'slow');
          console.debug($emptyElms);
          //validation passed, show the results
        } else {
          $("#results").removeClass("hidden");
        }
      });


      function recalculateAllEmployees() {
        $(".arms-length-select").each(function (i, element) {
          var parts = $(element).prop("id").split("-");
          var employeeNumber = parts[parts.length - 1];
          recalculateEmployeeAmounts(employeeNumber);
        });
        calculateTotals();
      }

      /**
       * update the employee wage summary
       */
      var numEmployeePanels = 1;
      $document.on("blur", "*[data-updates]", function (event) {
        var target = event.target;
        var parts = target.id.split("-");
        var employeeNumber = parts[parts.length - 1];
        recalculateEmployeeAmounts(employeeNumber);
      });

      function recalculateEmployeeAmounts(employeeNumber) {
        var unformattedValue = [$("#wkone-" + employeeNumber).val().replace("$", ""), $("#wktwo-" + employeeNumber).val().replace("$", ""), $("#wkthree-" + employeeNumber).val().replace("$", ""), $("#wkfour-" + employeeNumber).val().replace("$", "")];
        var claimPeriod = $("#claim-period option:selected").data("claim-period");
        var outputFields = ['wkone-', 'wktwo-', 'wkthree-', 'wkfour-'];
        var weeklyCews = {};
        var crhpRem = {};
        for (let i = 0; i < 4; ++i) {
          if (claimPeriod < 5) {
            if (!checkEmployeeEligibility($("#" + outputFields[i] + employeeNumber))) {
              $("#emp-smry-" + employeeNumber).addClass("hidden");
              $("#emp-no-elgbl-" + employeeNumber).removeClass("hidden");
              var updatedByElements = $("*[data-updated-by='" + outputFields[i] + employeeNumber + "']");
              $(updatedByElements).each(function (i, element) {
                $(element).text(toMoney.format(0.00));
              });
            } else {
              $("#emp-no-elgbl-" + employeeNumber).addClass("hidden");
              $("#emp-smry-" + employeeNumber).removeClass("hidden");
            }
          }
          $('#emp-arms-' + employeeNumber).text($("#arms-" + employeeNumber).val().charAt(0).toUpperCase() + $("#arms-" + employeeNumber).val().slice(1));
          var armsLength = $("#arms-" + employeeNumber).val().toLowerCase() == "yes" || $("#arms-" + employeeNumber).val().toLowerCase() == "oui" ? true : false;
          var updateTarget = $('#' + $("#" + outputFields[i] + employeeNumber).attr("data-updates"));
          //if the target is a select element, capitalize the first letter then update the target
          var baselineWage = zeroIfEmpty($("#baseline-" + employeeNumber).val());
            //get the wkX prefix of the input being updated, look for the leave w/ pay input with the same prefix
          // var parts = outputFields[i].match(/(wk)(one|two|three|four)-/g);
          var weekNumber = outputFields[i].substring(0, outputFields[i].indexOf("-"));
          var paidLeave = $("#" + weekNumber + "-cb-" + employeeNumber).is(":checked");
          if (paidLeave) {
            crhpRem[i] = 0;
          } else {
            if (armsLength) {
              crhpRem[i] = Math.min(1129, zeroIfEmpty(unformattedValue[i]));;
            } else {
              crhpRem[i] = Math.min(1129, baselineWage, zeroIfEmpty(unformattedValue[i]));
            } 
          }
          //get the weekly cews; if it's not an int or float, use 0
          weeklyCews[i] = getWeeklyCEWS(armsLength, baselineWage, zeroIfEmpty(unformattedValue[i]), paidLeave);
          if (!isInt(weeklyCews[i]) && !isFloat(weeklyCews[i])) {
            weeklyCews = 0;
          }
          //format and update the targets using localized currency format
          var formattedVal = toMoney.format(weeklyCews[i]);
          $(updateTarget).text(formattedVal);
          var updatedByElements = $("*[data-updated-by='" + outputFields[i] + employeeNumber + "']");
          $(updatedByElements).each(function (j, element) {
            $(element).text(toMoney.format(unformattedValue[i]));
          });
        }
        // update the total
        if ($(updateTarget).data("updates")) {
            /*
              update the target to the total column and get all elements that make up the total
            */
            updateTarget = $("#" + $(updateTarget).attr("data-updates"));
            //get the total cews
            var employeeCews = getEmployeeCews(employeeNumber, baselineWage);
            var formattedTotal = toMoney.format(employeeCews);
            $(updateTarget).text(formattedTotal);
          }
          //calculate the total eligible remuneration for CRHP, and plop to 'amt-crhp-rem-' + employeeNumber
          var CRHPEmpRem = 0;
          for (let i = 0; i < 4; ++i) {
            CRHPEmpRem += crhpRem[i];
          }
          $("#amt-crhp-rem-" + employeeNumber).text(toMoney.format(CRHPEmpRem));
      }

      //when the user clicks the remove button on an employee panel
      $(document).on("click", ".rm-emp", function(event) {
        var fieldset = $(event.target).parent("fieldset");
        var id = $(fieldset).attr("id");
        var empNumber = id.split("-")[1];
        $("#emp-arms-" + empNumber).parent("tr").remove();
        $(fieldset).remove();
      });

      //https://stackoverflow.com/questions/3885817/how-do-i-check-that-a-number-is-float-or-integer
      function isInt(n) {
        return Number(n) === n && n % 1 === 0;
      }
      function isFloat(n) {
        return Number(n) === n && n % 1 !== 0;
      }

      /**
       * getEmployeeCews()
       * 
       * get the cews total for an employee 
       * 
       * @param {Int} employeeNumber The employee panel number
       * @param {String} baselineWage The employees baseline pre-crisis wage
       *
       * @return {Float} Total calculated cews for this employee || 0 if not 
       * all data was entered
       */
      function getEmployeeCews(employeeNumber, baselineWage) {
        var armsLength = $("#arms-" + employeeNumber).val() == "Yes" || $("#arms-" + employeeNumber).val() == "Oui" ? true : false;
        var weekone = zeroIfEmpty($('#wkone-' + employeeNumber).val());
        var weekOnePaidLeave = $("#wkone-cb-" + employeeNumber).is(":checked");
        var weektwo = zeroIfEmpty($('#wktwo-' + employeeNumber).val());
        var weekTwoPaidLeave = $("#wktwo-cb-" + employeeNumber).is(":checked");
        var weekthree = zeroIfEmpty($('#wkthree-' + employeeNumber).val());
        var weekThreePaidLeave = $("#wkthree-cb-" + employeeNumber).is(":checked");
        var weekfour = zeroIfEmpty($('#wkfour-' + employeeNumber).val());
        var weekFourPaidLeave = $("#wkfour-cb-" + employeeNumber).is(":checked");
        var weekOneCews = getWeeklyCEWS(armsLength, baselineWage, weekone, weekOnePaidLeave);
        var weekTwoCews = getWeeklyCEWS(armsLength, baselineWage, weektwo, weekTwoPaidLeave);
        var weekThreeCews = getWeeklyCEWS(armsLength, baselineWage, weekthree, weekThreePaidLeave);
        var weekFourCews = getWeeklyCEWS(armsLength, baselineWage, weekfour, weekFourPaidLeave);
        if (
          isNaN(weekOneCews) ||
          isNaN(weekTwoCews) ||
          isNaN(weekThreeCews) ||
          isNaN(weekFourCews)
        ) {
          return 0;
        }
        return parseFloat(weekOneCews + weekTwoCews + weekThreeCews + weekFourCews);
      }

      /**
       * getEmployeeTotalWages
       * 
       * get the total wages paid for the given employee number
       *
       * @param {Int} employeeNumber The employee panel number 
       * 
       * @return {Float} The total wage paid for 4 weeks 
       */
      function getEmployeeTotalWages(employeeNumber) {
        var weekone = zeroIfEmpty($('#wkone-' + employeeNumber).val());
        var weektwo = zeroIfEmpty($('#wktwo-' + employeeNumber).val());
        var weekthree = zeroIfEmpty($('#wkthree-' + employeeNumber).val());
        var weekfour = zeroIfEmpty($('#wkfour-' + employeeNumber).val());
        return parseFloat(weekone) + parseFloat(weektwo) + parseFloat(weekthree) + parseFloat(weekfour);
      }

      /**
       * getEmployeeTotalWagesCrhp
       * 
       * get the total wages paid for the given employee number eligible for the CRHP
       *
       * @param {Int} employeeNumber The employee panel number 
       * 
       * @return {Float} The total wage paid for 4 weeks 
       */
       function getEmployeeTotalWagesCrhp(employeeNumber, basePay, armsLength) {
        var weeklyPay = [zeroIfEmpty($('#wkone-' + employeeNumber).val()), zeroIfEmpty($('#wktwo-' + employeeNumber).val()), zeroIfEmpty($('#wkthree-' + employeeNumber).val()), zeroIfEmpty($('#wkfour-' + employeeNumber).val())];
        var paidLeave = [$("#wkone-cb-" + employeeNumber).is(":checked"), $("#wktwo-cb-" + employeeNumber).is(":checked"), $("#wkthree-cb-" + employeeNumber).is(":checked"), $("#wkfour-cb-" + employeeNumber).is(":checked")];
        var totalRem = 0;
        for(let i = 0; i < 4; ++i) {
          if (!paidLeave[i]) {
            if (armsLength) {
              totalRem += Math.min(1129, weeklyPay[i]);
            } else {
              totalRem += Math.min(1129, weeklyPay[i], basePay);
            }
          }
        }
        return totalRem;
      }

      /**
       * calculate the total wages/total cews when the summary table is opened
       */
      $(document).on("click", "#showEmpTable", function (event) {
        calculateTotals();
      });
      var totalCews = 0;
      var totalWages = 0;
      var totalCrhp = 0;
      function calculateTotals() {
        var totalWagesPaid = 0;
        var cews = 0;
        var eligibleEmployees = 0;
        var crhpRemuneration = 0;
        var cewsBasic = 0;
        var eligibleCrhpRemuneration = 0;
        var claimPeriod = $("#claim-period option:selected").data("claim-period");
        $("#dataset-filter > tbody > tr").each(function (i, element) {
          var id = $(element).prop("id").split("emp")[1];
          var eligibility = true;
          crhpRemuneration = crhpRemuneration + zeroIfEmpty($('#amt-crhp-rem-' + id).text().replace(/[^0-9.]/g, ''));
          cewsBasic = cewsBasic + zeroIfEmpty($('#amt-ttl-' + id).text().replace(/[^0-9.]/g, ''));
          //determine the eligibility
          if ($("#emp-smry-" + id).hasClass("hidden")) {
            eligibility = false;
          }
          //show baselineWage or 0 if the baseline was left empty (protect against showing NaN)
          var baselineWage = $("#baseline-" + id).val();
          if (baselineWage == "") {
            $("#emp-base-" + id).text(toMoney.format("0.00"));
          } else {
            baselineWage = parseFloat(baselineWage);
          }
          $("#emp-base-" + id).text(toMoney.format(baselineWage));
          //show the arms length value
          var armsLength = $("#arms-" + id).val().toLowerCase() == "yes" || $("#arms-" + id).val().toLowerCase() == "oui" ? true : false;
          $("#emp-arms-" + id).text($("#arms-" + id).val());
          var totalCell = $("#emp-ttl-" + id);
          if (eligibility) {
            eligibleEmployees++;
            var employeeCews = zeroIfEmpty(getEmployeeCews(id, baselineWage));
            cews += employeeCews;
            totalWagesPaid += zeroIfEmpty(getEmployeeTotalWages(id));
            var formattedTotal = toMoney.format(Math.max(employeeCews, 0));
            $("#emp-ttl-" + id).text(employeeCews);
            $(totalCell).html(formattedTotal);
            eligibleCrhpRemuneration += zeroIfEmpty(getEmployeeTotalWagesCrhp(id, baselineWage, armsLength));
          } else {
            $(totalCell).html(toMoney.format(0.00));
          }
        });
        if (claimPeriod == 14) {
          $('.p14-base-crhp-rem').text(toMoney.format(eligibleCrhpRemuneration));
          $('.p14-base-crhp-rem').text(toMoney.format(eligibleCrhpRemuneration));
        }
        $(".numEmps").text(eligibleEmployees);
        $(".total").html(toMoney.format(cews));
        totalCews = cews.toFixed(2);
        totalWages = totalWagesPaid.toFixed(2);
        $('.basic-cews').text(toMoney.format(cewsBasic));
        if (claimPeriod >= 5) {
          if (claimPeriod > 16) {
            $('.crhp-current-rem').text(toMoney.format(crhpRemuneration)); 
            totalCrhp = Math.max(0, crhpRemuneration - baseCRHPRem) * crhpRate;
            $('.total-calculated-crhp').text(toMoney.format(totalCrhp)); 
            $('.current-crhp-remuneration').val(toMoney.format(totalWages));
            // $('.p14-crhp-remuneration').val(toMoney.format(totalWages));
            $('.crhp-incremental-rem').val(toMoney.format(Math.max(totalWages - baseCRHPRem, 0)));
            $('.crhp-rate').val(toPercent(crhpRate * 100));
          } else {
            totalCrhp = 0;
            $('.crhp-current-rem').text(toMoney.format(0)); 
            $('.crhp-incremental-rem').text(toMoney.format(0)); 
            $('.total-calculated-crhp').text(toMoney.format(0)); 
            $('.crhp-rate').text(toPercent(0)); 
          }

          var numWeeksLeaveWPay = $("input[id*='-cb-']:checked").length;
          var totalEmps = $("fieldset[id^='emp-']").length;
          var eligibleEmps = totalEmps - (0.25 * numWeeksLeaveWPay);
          //eligible active employees
          $(".total-active-emps").val(Math.ceil(eligibleEmps));
          //get eligible furloughed employees
          $(".total-furloughed-emps").val(Math.ceil(totalEmps - eligibleEmps));



          
          
          // $("#p2c-ee-alt2").trigger("change");
          if ($("#p2c-ee-alt2").val() == 0) {
            $("#p3-ei").prop("readonly", true);
            $("#p3-ei").val("0.00");
            $("#p3-cpp").prop("readonly", true);
            $(".p3-ee-req").addClass("hidden");
            $("#p3-cpp").val("0.00");
            $(".no-lwp-disclaimer").removeClass("hidden");
          } else {
            $("#p3-ei").prop("readonly", false);
            $("#p3-ei").val("");
            $("#p3-cpp").prop("readonly", false);
            $(".p3-ee-req").removeClass("hidden");
            $("#p3-cpp").val("");
            $(".no-lwp-disclaimer").addClass("hidden");
          }
          // var totalWages = $(".total").attr("data-total-wages");
          $(".cews-remuneration-total").val(toMoney.format(totalWages));
          // $("#p2c-pyrl").trigger("change");
          // var totalCews = $(".total").attr("data-total-cews");
          $(".total-calculated-cews").val(toMoney.format(totalCews));
          // $("#p2c-cews").trigger("change");
          if (claimPeriod < 11) {
          var revenuePriorDisplay = Math.max(0, roundPercDown(priorRevReduc));
          } else {
          var revenuePriorDisplay = Math.max(0, priorRevReduc * 100);
          revenuePriorDisplay = revenuePriorDisplay.toFixed(2);
          }
          $("#p2b-c0").val(revenuePriorDisplay);
          $("output[for='p2b-c0']").text(toPercent(revenuePriorDisplay));
          if (claimPeriod < 11) {
            var revenueDisplay = Math.max(0, roundPercDown(currentRevReduc));
          } else {
            var revenueDisplay = Math.max(0, currentRevReduc * 100);
            revenueDisplay = revenueDisplay.toFixed(2);
          }
          $("#p2b-c1").val(revenueDisplay);
          $("output[for='p2b-c1']").text(toPercent(revenueDisplay));
          var threeMonthRevenueDisplay = Math.max(0, roundPercDown(threeMonthReduction));
          $("#p2b-c2").val(threeMonthRevenueDisplay);
          $("output[for='p2b-c2']").text(toPercent(threeMonthRevenueDisplay));
          var cewsRateDisplay = cewsRate * 100;
          cewsRateDisplay = cewsRateDisplay.toFixed(2);
          $("#p2b-c3").val(cewsRateDisplay);
          $("output[for='p2b-c3']").text(toPercent(cewsRateDisplay));
        } else {
          $(".cews-remuneration-total").val(toMoney.format(totalWages));
          $(".total-calculated-cews").val(toMoney.format(totalCews));
        }
        var eligibleEmployees = $("fieldset[id^='emp-']").length;
        for (var i = 1; i < $("fieldset[id^='emp-']").length; i++) {
          if ($("#emp-smry-" + i).hasClass("hidden")) {
            eligibleEmployees--;
          }
        }
        $(".total-eligible-emps").text(Math.ceil(eligibleEmployees));
        // for (var i = 1; i < (numEmployeePanels + 1); i++) {
        //   $("#wkone-" + i).blur();
        //   $("#wktwo-" + i).blur();
        //   $("#wkthree-" + i).blur();
        //   $("#wkfour-" + i).blur();
        // }


        if (claimPeriod > 16 && totalCrhp > totalCews) {
          $("#details-panel2-lnk").focus(); //default select the CRHP tab
          $('.subsidy-to-apply-for').text('CRHP');
          $('.subsidy-for-information').text('CEWS');
          $('.crhp-fyi').addClass("hidden");
          $('.cews-fyi').removeClass("hidden");
          $("#cews-hta").addClass("hidden");
          $("#crhp-hta").removeClass("hidden");	
          // $('.crhp-current-rem').text(toMoney.format(crhpRemuneration)); 
          // totalCrhp = Math.min(0, crhpRemuneration - baseCRHPRem) * crhpRate;
        } else {
          $("#details-panel1-lnk").focus();
          $('.subsidy-to-apply-for').text('CEWS');
          $('.subsidy-for-information').text('CRHP');
          $('.crhp-fyi').removeClass("hidden");
          $('.cews-fyi').addClass("hidden");
          $("#crhp-hta").addClass("hidden");
          $("#cews-hta").removeClass("hidden");	
        }
      }
       

      /**
       * getWeeklyCEWS
       * 
       * determine the weekly cews amount based on claim period
       *
       * @param {Boolean} armsLength Whether the employee is at arms length
       * @param {String} baselineAmount The employees baseline pay pre-crisis
       * @param {String} weeklyAmount The weekly wage value
       * @param {Boolean} paidLeave Whether the employee was on paid leave for 
       * the week being calculated
       * 
       * @return {Int} The calculated weekly cews amount || 0 if no claim 
       * period is chosen
       */
      function getWeeklyCEWS(armsLength, baselineAmount, weeklyAmount, paidLeave) {
        var period = parseInt($("#claim-period option:selected").data("claim-period"));
        switch (true) {
          //period 1-4
          case (period < 5):
            return oldFormula(armsLength, weeklyAmount, baselineAmount)
            break;
          // period 5-7
          case (period < 7):
            if (paidLeave) {
              return oldFormula(armsLength, weeklyAmount, baselineAmount);
            } else {
              if (cewsRate == 0) {
                return 0;
              } else if (revReduction >= 0.3) {
                return Math.max(oldFormula(armsLength, weeklyAmount, baselineAmount), newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate));
              } else {
                return Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0);
              }
            }
            break;
          case (period > 19): //no more paid leave after p19
            if (paidLeave || cewsRate == 0) {
              return 0;
            } else {
              return Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0);
            }
            break;
          case (period > 10): //paid leave changes
            if (paidLeave) {
              if (cewsRate > 0 && (armsLength || baselineAmount > 0)) {
                return Math.min(weeklyAmount, Math.max(500, Math.min(0.55 * baselineAmount, 595)));
              }
              else
              {
                return 0;
              }
            } else {
              if (cewsRate == 0) {
                return 0;
              } else {
                return Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0);
              }
            }
            break;
          //periods 9 - 10
          case (period > 8): //paid leave changes
            if (paidLeave) {
              if (cewsRate > 0 && (armsLength || baselineAmount > 0)) {
                return Math.min(weeklyAmount, Math.max(500, Math.min(0.55 * baselineAmount, 573)));
              }
              else
              {
                return 0;
              }
            } else {
              if (cewsRate == 0) {
                return 0;
              } else {
                return Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0);
              }
            }
            break;
          //period 7+
          case (period > 6):
            if (paidLeave) {
              return oldFormula(armsLength, weeklyAmount, baselineAmount);
            } else {
              if (cewsRate == 0) {
                return 0;
              } else {
                return Math.max(newFormula(armsLength, weeklyAmount, baselineAmount, cewsRate), 0);
              }
            }
            break;
          default:
            return 0;
        }
      }

      /**
       * determine if an employee has been paid $0 for two consecutive pays
       */
      function checkEmployeeEligibility(element) {
        //get all inputs for this employees weekly wages
        var classname = element.className.match(/emp-wkly-wage-\d/g);
        if (classname == "") {
          return;
        }
        var eligibility = true;
        var wages = $("." + classname);
        $(wages).each(function (i, element) {
          if (parseFloat($(element).val()) == 0 && $(wages[i + 1]).val() == 0 && $(wages[i + 1]).val() != "") {
            eligibility = false;
          }
        });
        return eligibility;
      }


      /**
       * add a new employee form  
       */
      $("#addemp").on("click", addEmp);
      $("#addemp").on("keypress", addEmp);
      function addEmp() {
        numEmployeePanels++;
        var frag = employeeFormGenerator.generateNewEmployeeForm(
          numEmployeePanels
        );
        //create new row for the calculation table
        var row = document.createElement("tr");
        row.id = "emp" + numEmployeePanels;
        //create the employee 'name' cell
        var eligibleEmployeeCell = document.createElement("td");
        var eeSpan = document.createElement("span");
        $(eeSpan).addClass("ee-name-" + numEmployeePanels);
        eeSpan.innerHTML = "Employee " + numEmployeePanels;
        eligibleEmployeeCell.appendChild(eeSpan);
        // create the arms length cell 
        var armsLengthCell = document.createElement("td");
        armsLengthCell.id = "emp-arms-" + numEmployeePanels;
        //create the cell for the baseline wage
        var baselineCell = document.createElement("td");
        baselineCell.id = "emp-base-" + numEmployeePanels;
        //create cells for each wage entry
        var weeklyWageCells = [];
        for (var i = 0; i < 4; i++) {
          weeklyWageCells[i] = document.createElement("td");
        }
        //add the data-update-by attr so these cells are populated by the blur event on *[data-updates]
        $(weeklyWageCells[0]).attr(
          "data-updated-by",
          "wkone-" + numEmployeePanels
        );
        $(weeklyWageCells[1]).attr(
          "data-updated-by",
          "wktwo-" + numEmployeePanels
        );
        $(weeklyWageCells[2]).attr(
          "data-updated-by",
          "wkthree-" + numEmployeePanels
        );
        $(weeklyWageCells[3]).attr(
          "data-updated-by",
          "wkfour-" + numEmployeePanels
        );
        //create the total cell
        var totalCell = document.createElement("td");
        totalCell.id = "emp-ttl-" + numEmployeePanels;
        //put the row together
        row.appendChild(eligibleEmployeeCell);
        row.appendChild(armsLengthCell);
        row.appendChild(baselineCell);
        $(weeklyWageCells).each(function (i, element) {
          row.appendChild(weeklyWageCells[i]);
        });
        //add the row to the table
        row.appendChild(totalCell);
        $("#dataset-filter > tbody").append(row);
        var lastEmpPanel = $("fieldset[id^='emp-']").last();
        $(frag).insertAfter(lastEmpPanel);
        $("#emp-" + numEmployeePanels).focus();
        document.getElementById($(frag).prop("id")).scrollIntoView({
          behavior: 'smooth'
        });
        $("#emp-no-elgbl-" + numEmployeePanels).addClass("hidden");
        $("#emp-smry-" + numEmployeePanels).removeClass("hidden");
      }


      //Needed to show/hide calculator or spreadsheet....can probably be removed when doaction feature works again in AEM (GCWeb 9.3)//	
      $('#show-online-calc').on("click", function() {
        $(this).addClass("btn-primary");
        $("#show-sprdsht").removeClass("btn-primary").addClass("btn-default");	
        $("#cal-calc").removeClass("hidden"); 
        $("#cews-cal-opt1").addClass("hidden"); 
        // $('#steps-example').reset();
        $('#claim-period').prop('selectedIndex', 0);
      });
      $('#show-sprdsht').on("click", function() {
        $(this).addClass("btn-primary");
        $("#show-online-calc").removeClass("btn-primary").addClass("btn-default");	
        $("#cews-cal-opt1").removeClass("hidden"); 
        $("#cal-calc").addClass("hidden"); 
      });	
      //Passes value of publically traded question to summary//
      // $('input:radio[name="bsn-eligibility"]').change(function(){		
      //   $('.crhp-eligible').text(
      //   $(this).val())
      // });
      //Next button clicks to show more of summary so far  (need to try and clean this up into an array//
      $(document).on("click", ".steps-wrapper:nth-child(2) button:contains('Next')", function (event) {
        $('#sec-2').removeClass("hidden");
        calculateRevenueDrop();
      });
      $(document).on("click", ".steps-wrapper:nth-child(3) button:contains('Next')", function (event) {
        $('#sec-3-a, #sec-3-b').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(4) button:contains('Next')", function (event) {
        $('#sec-4-a, #sec-4-b').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(5) button:contains('Next')", function (event) {
        $('#sec-5').removeClass("hidden");
      });
      $(document).on("click", ".steps-wrapper:nth-child(6) button:contains('Next')", function (event) {
        $('#sec-6').removeClass("hidden");
      });	

      //Radio event listener
      $document.on("click", "input[type=radio]", function (event) {
        var target = event.target;
        var parts = target.name.split("-");
        var locationNumber = parts[parts.length - 1];
        if (target.name == "rev-comp") {
          if (target.id == "rev-comp-no") {
            $('#alt-bl-no').addClass("hidden");
						 $('.alt-bl-no').addClass("hidden");
            $('#alt-bl-yes').removeClass("hidden");
						$('.alt-bl-yes').removeClass("hidden");
            calculateRevenueDrop();
          } else {
            $('#alt-bl-no').removeClass("hidden");
						 $('.alt-bl-no').removeClass("hidden");
            $('#alt-bl-yes').addClass("hidden");
						 $('.alt-bl-yes').addClass("hidden");
            calculateRevenueDropAlt();
          }
        } else {
          if (target.name == "crhp-eligibility") {
            if (target.id == "elig-type-yes") {
              $('.crhp-ineligible-tag').addClass("hidden");
              $('#crhp-base-q1').removeClass("hidden");
              $('#crhp-ineligible').addClass("hidden");
              $('#crhp-base-summary').removeClass("hidden");
              $(".crhp-eligible").removeClass("hidden");
              $("#details-panel2-lnk").parent().removeClass("hidden");
              calculateTotals(); 
            } else {
              $('.crhp-ineligible-tag').removeClass("hidden");
              $('#crhp-base-q1').addClass("hidden");
              $('#crhp-ineligible').removeClass("hidden");
              $('#crhp-base-summary').addClass("hidden");
              $(".crhp-eligible").addClass("hidden");
              $("#details-panel2-lnk").parent().addClass("hidden");
              calculateTotals(); //Or maybe 'clear chrp'?
            }
            $('#crhp-eligibility-summary').removeClass('hidden');
          } else if (target.name == "crhp-base-ready") {
            if (target.id == "crhp-base-yes") {
              $('#crhp-base-q2').addClass("hidden");
              $('#crhp-base-input').removeClass("hidden");
              calculateTotals();
            } else {
              $('#crhp-base-q2').removeClass("hidden");
              $('#crhp-base-input').addClass("hidden");
              calculateTotals(); //Or maybe 'clear chrp'?
            }
          } else if (target.name == "crhp-csv") {
            if (target.id == "crhp-csv-yes") {
              $('#crhp-base-csv').removeClass("hidden");
              $('#crhp-base-manual').addClass("hidden");
              $('#crhp-base-input').addClass("hidden");
              calculateTotals();
            } else {
              $('#crhp-base-csv').addClass("hidden");
              $('#crhp-base-manual').removeClass("hidden");
              $('#crhp-base-input').removeClass("hidden");
              calculateTotals(); //Or maybe 'clear chrp'?
            }
          }
        }
      });

      var baseCRHPRem = 0;
      //update the CRHP base amount summary
      $(document).on("blur", "#crhp-base-rem", function (event) {
        baseCRHPRem = zeroIfEmpty($('#crhp-base-rem').val());
        $('.crhp-base-rem').text(toMoney.format(baseCRHPRem));
        calculateTotals(); //Or maybe 'clear chrp'?
      });
      $(document).on("blur", "#crhp-base-active-emps", function (event) {
        var baseCRHPEmps = zeroIfEmpty(parseFloat($('#crhp-base-active-emps').val()));
        $('.total-active-emps-14').text(baseCRHPEmps);
        // calculateCRHP(); //Or maybe 'clear chrp'?
      });

      function uploadDealcsv () {}; 
      /*------ Method for read uploded csv file ------*/
      uploadDealcsv.prototype.getCsv = function(e) {
          let input = document.getElementById('p14csv');
          input.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                var myFile = this.files[0];
                var reader = new FileReader();
                reader.addEventListener('load', function (e) {
                    let csvdata = e.target.result; 
                    parseCsv.getParsecsvdata(csvdata); // calling function for parse csv data 
                });
                reader.readAsBinaryString(myFile);
            }
          });
        }
        /*------- Method for parse csv data and display --------------*/
        uploadDealcsv.prototype.getParsecsvdata = function(data) {
            let parsedata = [];
            let newLinebrk = data.split("\n");
            var i = 0;
            for(i = 0; i < newLinebrk.length; i++) {
                parsedata.push(newLinebrk[i].split(","))
            }
            if (document.documentElement.lang == "fr") { //check that column headings are correct
              if (parsedata[0][1] != "Sansliendedépendance" || parsedata[0][2] != "Paieavantlacrise" || parsedata[0][3] != "Salairebruthebdomadairepourlapremièresemaine" || parsedata[0][4] != "Salairebruthebdomadairepourladeuxièmesemaine" || parsedata[0][5] != "Salairebruthebdomadairepourlatroisièmesemaine" || parsedata[0][6] != "Salairebruthebdomadairepourlaquatrièmesemaine" || parsedata[0][7] != "MontantdebaselaSSUCcalculée") {
                $('#crhp-csv-parse-error').removeClass("hidden");
                $('#crhp-base-manual').removeClass("hidden");
                $('#crhp-base-input').removeClass("hidden");
              } else {
                $('#crhp-csv-parse-error').addClass("hidden");
                $('#crhp-base-manual').addClass("hidden");
                $('#crhp-base-input').addClass("hidden");
              }
            } else {
              if (parsedata[0][1] != "Arm's length" || parsedata[0][2] != "Pre-crisis pay" || parsedata[0][3] != "Weekly gross pay for week 1" || parsedata[0][4] != "Weekly gross pay for week 2" || parsedata[0][5] != "Weekly gross pay for week 3" || parsedata[0][6] != "Weekly gross pay for week 4" || parsedata[0][7] != "Calculated basic CEWS amount") {
                $('#crhp-csv-parse-error').removeClass("hidden");
                $('#crhp-base-manual').removeClass("hidden");
                $('#crhp-base-input').removeClass("hidden");
              } else {
                $('#crhp-csv-parse-error').addClass("hidden");
                $('#crhp-base-manual').addClass("hidden");
                $('#crhp-base-input').addClass("hidden");
              }
            }
            var re = /[^\d.]/g;
            // if (parsedata[i][1] == "No") { //NAL employee
            //   p14rate = total / (Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(/[^\d.]\g,'')) + Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')))) 
            // } else {
            //   p14rate = total / (Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,''))) + Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')))) 
            // }
            //   week1 = p14rate * Math.min(1129, parsedata[i][3], parsedata[i][2])
            //   week2 = p14rate * Math.min(1129, parsedata[i][4], parsedata[i][2])
            //   week3 = p14rate * Math.min(1129, parsedata[i][5], parsedata[i][2])
            //   week4 = p14rate * Math.min(1129, parsedata[i][6], parsedata[i][2])
            baseCRHPRem = 0;
            var week1 = 0, week2 = 0, week3 = 0, week4 = 0;
            for(i = 1; i < parsedata.length; i++) { //for each employee
              if (parsedata[i][1] == "No") { //NAL employee
                week1 = Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
                week2 = Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
                week3 = Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
                week4 = Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')), zeroIfEmpty(parsedata[i][2].replace(re,'')));
              } else { //Arm's length
                week1 = Math.min(1129, zeroIfEmpty(parsedata[i][3].replace(re,'')));
                week2 = Math.min(1129, zeroIfEmpty(parsedata[i][4].replace(re,'')));
                week3 = Math.min(1129, zeroIfEmpty(parsedata[i][5].replace(re,'')));
                week4 = Math.min(1129, zeroIfEmpty(parsedata[i][6].replace(re,'')));
              }
              baseCRHPRem = baseCRHPRem + week1 + week2 + week3 + week4;
            }
            $('.total-active-emps-14').text(parsedata.length - 1);
            $('.crhp-base-rem').text(toMoney.format(baseCRHPRem));
            calculateTotals(); //Or maybe 'clear chrp'?
        }
        var parseCsv = new uploadDealcsv();
        parseCsv.getCsv();

      /**
       * calculate the cews rate reductions
       */
      var currentRevReduc = 0;
      var priorRevReduc = 0;
      var revReduction = 0;
      var claimPeriodRevReduction = 0;
      var topUpRate = 0;
      var cewsRate = 0;
      var crhpRate = 0;
      var baseRate = 0;
      var threeMonthReduction = 0;
      $document.on("blur", ".cews-rate-calc", function(event) {calculateRevenueDrop()});
      function calculateRevenueDrop() {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        var cewsRateElements = $('.cews-rate-calc');
        //find the claim month based on the chosen claim period 
        var claimMonth = getClaimMonth($("#claim-period").val());
        //Get claim months function??
        var monthsArray = getClaimMonths(claimMonth, claimPeriod);
        var months2019Array = getClaimMonths2019(claimMonth, claimPeriod);
        //get the previous month from the claim month
        var prevClaimMonth = claimMonth - 1;
        if (
            zeroIfEmpty($("#" + months2019Array[0] + "-no").val()) > 0 ||
            zeroIfEmpty($("#" + months2019Array[1] + "-no").val()) > 0
        ) {
          //get the value of the claim month
          var claimMonth2020Value = zeroIfEmpty($("#" + monthsArray[0] + "-no").val());
          var claimMonth2019Value = zeroIfEmpty($("#" + months2019Array[0] + "-no").val());
          //get the value of the previous month
          var prevClaim2020Value = zeroIfEmpty($("#" + monthsArray[1] + "-no").val());
          var prevClaim2019Value = zeroIfEmpty($("#" + months2019Array[1] + "-no").val());
          
          if (claimPeriod < 11) {
            //get the avg of the revenue from the previous three motnhs (2020)
            var threeMonthRev2020 = [
              zeroIfEmpty($("#" + monthsArray[3] + "-no").val()),
              zeroIfEmpty($("#" + monthsArray[2] + "-no").val()),
              zeroIfEmpty($("#" + monthsArray[1] + "-no").val())
            ];
            var threeMonthAvg2020 = (threeMonthRev2020[0] + threeMonthRev2020[1] + threeMonthRev2020[2]) / 3;
            //get the avg of the revenue from the previous three months (2019)
            var threeMonthRev2019 = [
              zeroIfEmpty($("#" + months2019Array[3] + "-no").val()),
              zeroIfEmpty($("#" + months2019Array[2] + "-no").val()),
              zeroIfEmpty($("#" + months2019Array[1] + "-no").val())
            ];
            var threeMonthAvg2019 = (threeMonthRev2019[0] + threeMonthRev2019[1] + threeMonthRev2019[2]) / 3;
            //get the rate reduction from the three month average
            if (threeMonthAvg2019 == 0) {
              threeMonthReduction = 0;
            } else {
              threeMonthReduction = (threeMonthAvg2019 - threeMonthAvg2020) / threeMonthAvg2019;
            }
          }
          //get the revenue reduction from claim/prev claim months from 2020 and 2019
          if (claimMonth2019Value == 0) {
            claimPeriodRevReduction = 0;
          } else {
            claimPeriodRevReduction = (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value;
          }
          if (claimMonth2019Value == 0) {
            revReduction = (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value;
            priorRevReduc = (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value;
            currentRevReduc = 0;
          } else if (prevClaim2019Value == 0) {
            revReduction = (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value;
            priorRevReduc = 0;
            currentRevReduc = (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value;
          } else {
            revReduction = Math.max(
              (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value,
              (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value
            );
            priorRevReduc = (prevClaim2019Value - prevClaim2020Value) / prevClaim2019Value;
            currentRevReduc = (claimMonth2019Value - claimMonth2020Value) / claimMonth2019Value;
          }
          if (claimPeriod > 10) {
            revReduction = parseFloat(revReduction).toFixed(4);
            threeMonthReduction = parseFloat(threeMonthReduction).toFixed(4);
          }
          //get the base rate
          baseRate = parseFloat(Math.max(getP5PlusBaseRate(revReduction), 0));
          //get the top-up rate
          if (claimPeriod > 10 || (claimPeriod > 7 && revReduction > threeMonthReduction)) {
            topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(revReduction), 0));
          } else {
            topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(threeMonthReduction), 0));
          }
          if (claimPeriod > 10) {
            topUpRate = parseFloat(topUpRate).toFixed(4);
            baseRate = parseFloat(baseRate).toFixed(4);
          }
          //calculate the overall rate
          cewsRate = parseFloat(baseRate) + parseFloat(topUpRate);
          cewsRate = parseFloat(cewsRate).toFixed(4);

          if (claimPeriod > 16) {
            if ((revReduction < 0.1 && claimPeriod > 17) || (revReduction <= 0 && claimPeriod == 17)) {
              cewsRate = 0;
              crhpRate = 0;
              $(".greater-than-10-drop").addClass("hidden");
              $(".less-than-10-drop").removeClass("hidden");
            } else {
              var crhpRateScale = [50, 50, 50, 40, 30, 20]
              $(".crhp-rate").text(toPercent(crhpRateScale[claimPeriod - 17]));
              $(".greater-than-10-drop").removeClass("hidden");
              $(".less-than-10-drop").addClass("hidden");
              crhpRate = parseFloat("0." + crhpRateScale[claimPeriod - 17]);
            }
          } else {
            $(".greater-than-10-drop").removeClass("hidden");
            $(".less-than-10-drop").addClass("hidden");
          }

          if (cewsRate < 0.1) {
            $("#employees").addClass("hidden");
          }
          if (cewsRate < 0.75 && revReduction >= 0.3 && claimPeriod < 7) {
            //if safe harbour applies
            cewsRate = 0.75;
            $("#rate-reduction").addClass("hidden");
            $(".safe-harbour-show").removeClass("hidden");
            $(".safe-harbour-hide").addClass("hidden");
          } else {
            //if safe harbour doesn't apply
            $(".safe-harbour-show").addClass("hidden");
            $(".safe-harbour-hide").removeClass("hidden");
            //update the view and round down base and top up dates to nearest 2 decimals on the percentage
            $(".top-up-rate").text(toPercent(roundPercDown(topUpRate)));
            $(".base-rate").text(toPercent(roundPercDown(baseRate)));
          }
          if (claimPeriod < 11) {
            $(".rev-drop-top-up").text(toPercent(roundPercDown(threeMonthReduction)));
            $(".currentRevReduction").text(toPercent(roundPercDown(currentRevReduc)));
            $(".priorRevReduction").text(toPercent(roundPercDown(priorRevReduc)));
            $(".rev-reduc-base").text(toPercent(roundPercDown(revReduction)));
          } else {
            var displayRevReducCurrent = currentRevReduc * 100;
            var displayPriorReducCurrent = priorRevReduc * 100;
            var displayPrefReducCurrent = revReduction * 100;
            $(".currentRevReduction").text(toPercent(displayRevReducCurrent.toFixed(2)));
            $(".priorRevReduction").text(toPercent(displayPriorReducCurrent.toFixed(2)));
            $(".rev-reduc-base").text(toPercent(displayPrefReducCurrent.toFixed(2)));
          }
          if (claimPeriod > 7 && claimPeriod < 11) {
            if (revReduction > threeMonthReduction) {
              $(".rev-drop-top-up-higher").text(toPercent(roundPercDown(revReduction)));
            } else {
              $(".rev-drop-top-up-higher").text(toPercent(roundPercDown(threeMonthReduction)));
            }
          }
          var cewsRateDisplay = cewsRate * 100;
          cewsRateDisplay = cewsRateDisplay.toFixed(2);
          $(".cews-rate").text(toPercent(cewsRateDisplay));
          $("#employees").removeClass("hidden");
        } else {
          //if it can't compute because of 0 values, then reset calculation summary to 0
          $(".currentRevReduction").text(toPercent("0"));
          $(".priorRevReduction").text(toPercent("0"));
          $(".top-up-rate").text(toPercent("0"));
          $(".base-rate").text(toPercent("0"));
          $(".rev-drop-top-up").text(toPercent("0"));
          $(".rev-reduc-base").text(toPercent("0"));
          $(".cews-rate").text(toPercent("0"));
        }
      }


      //Checkbox event listener
      $document.on("click", "input[type=checkbox]", function (event) {
        var target = event.target;
        //Check which radio button it is and which content it's show/hiding
        if (target.id == "jan-feb-closed") {
          if ($('#jan-feb-closed-inputs').is(":hidden")) {
            $('#jan-feb-closed-inputs').removeClass("hidden");
          } else {
            $('#jan-feb-closed-inputs').addClass("hidden");
          }
          calculateRevenueDropAlt();
        }
      });

      /**
       * calculate the cews rate reductions with alternate baseline
       */
      $document.on("blur", ".cews-rate-calc-alt", function(event) {calculateRevenueDropAlt()});
      $document.on("blur", "#jan-feb-closed-days", function(event) {calculateRevenueDropAlt()});
      function calculateRevenueDropAlt() {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        var cewsRateElements = $('.cews-rate-calc-alt');
        var janRev = zeroIfEmpty($("#2020-01-yes").val());
        var febRev = zeroIfEmpty($("#2020-02-yes").val());
        if (parseFloat(janRev) > 0 || parseFloat(febRev) > 0) {
          var baseRevTopUp = (janRev + febRev) / 2;
          if ($('#jan-feb-closed-inputs').is(":visible")) {
            var daysNotOperating = zeroIfEmpty($('#jan-feb-closed-days').val());
            var baseRev = ((janRev + febRev) / 2) * (60 / (60 - daysNotOperating));
          } else {
            var baseRev = (janRev + febRev) / 2;
          }
          
          //find the claim month based on the chosen claim period 
          var claimMonth = getClaimMonth($("#claim-period").val());
          var monthsArray = getClaimMonths(claimMonth, claimPeriod);

          //get the value of the claim month
          var claimMonthValue = zeroIfEmpty($("#" + monthsArray[0] + "-yes").val());
          //get the value of the previous month
          var prevClaimValue = zeroIfEmpty($("#" + monthsArray[1] + "-yes").val());
          //get the avg of the revenue from the last three months
          if (claimPeriod < 10) {
            var threeMoAgo = zeroIfEmpty($("#" + monthsArray[3] + "-yes").val());
            var twoMoAgo = zeroIfEmpty($("#" + monthsArray[2] + "-yes").val());
            var threeMonthAvg = (threeMoAgo + twoMoAgo + prevClaimValue) / 3;
            //get the rate reduction from the three month average
            threeMonthReduction = (baseRevTopUp - threeMonthAvg) / baseRevTopUp;
          }
          claimPeriodRevReduction = (baseRev - claimMonthValue) / baseRev;
          //get the revenue reduction
          revReduction = Math.max(
            (baseRev - claimMonthValue) / baseRev,
            (baseRev - prevClaimValue) / baseRev
          );
          currentRevReduc = (baseRev - claimMonthValue) / baseRev;
          priorRevReduc = (baseRev - prevClaimValue) / baseRev;
		  if (claimPeriod > 10) {
			revReduction = parseFloat(revReduction).toFixed(4);
			threeMonthReduction = parseFloat(threeMonthReduction).toFixed(4);
		  }
          //get the base rate
          baseRate = parseFloat(
            Math.max(getP5PlusBaseRate(revReduction), 0)
          );
          //get the top-up rate
          if (claimPeriod > 10 || (claimPeriod > 7 && revReduction > threeMonthReduction)) {
            topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(revReduction), 0));
          } else {
            topUpRate = parseFloat(Math.max(getP5PlusTopUpRate(threeMonthReduction), 0));
          }
          if (claimPeriod > 10) {
            topUpRate = parseFloat(topUpRate).toFixed(4);
            baseRate = parseFloat(baseRate).toFixed(4);
          }
          //calculate the overall rate
          cewsRate = parseFloat(baseRate) + parseFloat(topUpRate);
          cewsRate = parseFloat(cewsRate).toFixed(4);

          if (claimPeriod > 16) {
            if ((revReduction < 0.1 && claimPeriod > 17) || (revReduction <= 0 && claimPeriod == 16)) {
              cewsRate = 0;
              crhpRate = 0;
              $(".greater-than-10-drop").addClass("hidden");
              $(".less-than-10-drop").removeClass("hidden");
            } else {
              var crhpRateScale = [50, 50, 50, 40, 30, 20]
              $(".crhp-rate").text(toPercent(crhpRateScale[claimPeriod - 17]));
              $(".greater-than-10-drop").removeClass("hidden");
              $(".less-than-10-drop").addClass("hidden");
              crhpRate = parseFloat("0." + crhpRateScale[claimPeriod - 17]);
            }
          } else {
            $(".greater-than-10-drop").removeClass("hidden");
            $(".less-than-10-drop").addClass("hidden");
          }
          
          if (cewsRate < 0.1) {
            $("#employees").addClass("hidden");
          }
          if (cewsRate < 0.75 && revReduction >= 0.3 && claimPeriod < 7) {
            //if safe harbour applies
            cewsRate = 0.75;
            $("#rate-reduction").addClass("hidden");
            $(".safe-harbour-show").removeClass("hidden");
            $(".safe-harbour-hide").addClass("hidden");
          } else {
            //if safe harbour doesn't apply
            $(".safe-harbour-show").addClass("hidden");
            $(".safe-harbour-hide").removeClass("hidden");
            //update the view and round down base and top up dates to nearest 2 decimals on the percentage
            $(".top-up-rate-alt").text(toPercent(roundPercDown(topUpRate)));
            $(".base-rate-alt").text(toPercent(roundPercDown(baseRate)));
          }
          if (claimPeriod > 7 && claimPeriod < 11) {
            if (revReduction > threeMonthReduction) {
              $(".rev-drop-top-up-higher-alt").text(toPercent(roundPercDown(revReduction)));
            } else {
              $(".rev-drop-top-up-higher-alt").text(toPercent(roundPercDown(threeMonthReduction)));
            }
          }
          if (claimPeriod < 11) {
            $(".rev-drop-top-up-alt").text(toPercent(roundPercDown(threeMonthReduction)));
            $(".currentRevReduction-alt").text(toPercent(roundPercDown(currentRevReduc)));
            $(".priorRevReduction-alt").text(toPercent(roundPercDown(priorRevReduc)));
            $(".rev-reduc-alt-base").text(toPercent(roundPercDown(revReduction)));
          } else {
            var displayRevReducCurrent = currentRevReduc * 100;
            var displayPriorReducCurrent = priorRevReduc * 100;
            var displayPrefReducCurrent = revReduction * 100;
            $(".currentRevReduction-alt").text(toPercent(displayRevReducCurrent.toFixed(2)));
            $(".priorRevReduction-alt").text(toPercent(displayPriorReducCurrent.toFixed(2)));
            $(".rev-reduc-alt-base").text(toPercent(displayPrefReducCurrent.toFixed(2)));
          }
          var cewsRateDisplay = cewsRate * 100;
          cewsRateDisplay = cewsRateDisplay.toFixed(2);
          $(".cews-rate-alt").text(toPercent(cewsRateDisplay));
          $("#employees").removeClass("hidden");
        } else {
          //if it can't compute because of 0 values, then reset calculation summary to 0
          $(".currentRevReduction-alt").text(toPercent(0));
          $(".priorRevReduction-alt").text(toPercent(0));
          $(".top-up-rate-alt").text(toPercent(0));
          $(".base-rate-alt").text(toPercent(0));
          $(".rev-drop-top-up-alt").text(toPercent(0));
          $(".rev-reduc-alt-base").text(toPercent(0));
          $(".cews-rate-alt").text(toPercent(0));
        }
      }


      /**
       * getClaimMonths()
       * returns an array of the 4 months with year and prefix based on the claim month
       */
      function getClaimMonths(claimMonth, claimPeriod) {
        var monthsArray = [claimMonth, claimMonth - 1, claimMonth - 2, claimMonth - 3];
        //Adding a 0 in front of a month in case it was single digit
        for (var i = 0; i < monthsArray.length; i++) {
          if (monthsArray[i] <= 0) { //non-months
            monthsArray[i] += 12;
          }
          if (monthsArray[i].toString().match(/^[1-9]$/)) { //checking for single digit, in which case add 0 ahead of it
            monthsArray[i] = "0" + monthsArray[i];

          }
          //get the year for the month based on period
          if (claimPeriod < 11) {
            monthsArray[i] = "2020-" + monthsArray[i];
          } else if (claimPeriod < 15) {
            if (parseInt(monthsArray[i]) > 5) {
              monthsArray[i] = "2020-" + monthsArray[i];
            } else {
              monthsArray[i] = "2021-" + monthsArray[i];
            }
          } else {
            monthsArray[i] = "2021-" + monthsArray[i];
          }
        }
        return monthsArray;
      }
       /**
       * getClaimMonths2019()
       * returns an array of the 4 months adjusted for year 2019
       */
       function getClaimMonths2019(claimMonth, claimPeriod) {
        var monthsArray = [claimMonth, claimMonth - 1, claimMonth - 2, claimMonth - 3];
        
        //Adding a 0 in front of a month in case it was single digit
        for (var i = 0; i < monthsArray.length; i++) {
          if (monthsArray[i] <= 0) { //negative numbers
            monthsArray[i]+= 12;
          }
          if (monthsArray[i].toString().match(/^[1-9]$/)) { //checking for single digit, in which case add 0 ahead of it
            monthsArray[i] = "0" + monthsArray[i];
          }
          if (claimPeriod < 11) {
            monthsArray[i] = "2019-" + monthsArray[i];
          } else {
            if ((claimPeriod < 14 && parseInt(monthsArray[i]) > 5) || (parseInt(monthsArray[i]) > 2)) {
              monthsArray[i] = "2019-" + monthsArray[i];
            } else {
              monthsArray[i] = "2020-" + monthsArray[i];
            }
          }
        }
        return monthsArray;
      }
      /**
       * roundPercDown()
       * round the given percent value to two decimal places
       */
      function roundPercDown(perc) {
        perc = perc * 10000;
        perc = Math.floor(perc);
        perc = perc / 100;
        return perc;
      }

      /**
      * Apply the transforms necessary for FR vs EN syntax of percentages
      */
      function toPercent(percentage) {
        if (document.documentElement.lang == "fr") {
          return parseFloat(percentage).toFixed(2) + '\xa0%';
        } else {
          return parseFloat(percentage).toFixed(2) + '%';
        }
      }


      /**
       * zeroIfEmpty()
       * return 0 if the number cannot be parsed into a float; does not account * for letter values.
       */
      function zeroIfEmpty(fieldVal) {
        if (fieldVal != null && fieldVal != "") {
          return parseFloat(fieldVal);
        } else {
          return 0;
        }
      }

      /**
       * getMonthNamesPlusYear()
       *
       * get the name of the claim month and previous month
       *
       * @param {iMonth} integer the month expressed as an integer
       * YYYY-MM-DD--YYYY--MM-DD format
       *
       * @return {claimMonths} the 2 months that the CERS period overlaps
       */
      function getMonthNamesPlusYear(iMonth, claimPeriod) {
        if (document.documentElement.lang == "fr") {
          var monthNames = ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre"];
        } else {
          var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        }
        var claimMonths = [monthNames[iMonth - 2], monthNames[iMonth - 1]];
        if (iMonth == 1) {
          if (document.documentElement.lang == "fr") {
            claimMonths[0] = "décembre";
          } else {
            claimMonths[0] = "December";
          }
        }
        //add years
        if (claimPeriod < 4) {
          claimMonths[0] = claimMonths[0] + ' 2020';
          claimMonths[1] = claimMonths[1] + ' 2020';
        } else if (claimPeriod == 4) {
          claimMonths[0] = claimMonths[0] + ' 2020';
          claimMonths[1] = claimMonths[1] + ' 2021';
        } else {
          claimMonths[0] = claimMonths[0] + ' 2021';
          claimMonths[1] = claimMonths[1] + ' 2021';
        }
        return claimMonths;
      }

      //update the employee wages summary when the arms length value is changed
      $(document).on("change", "select[id^='arms-']", function (event) {
        //get the employee number
        var target = event.target;
        var id = target.id.split('-')[1];
        //trigger the blur event on all the inputs for the employees wages to recalculate
        $("#wkone-" + id).blur();
        $("#wktwo-" + id).blur();
        $("#wkthree-" + id).blur();
        $("#wkfour-" + id).blur();
      });
      //update the employee wage summary when the baseline value is changed
      $(document).on("blur", "input[id^='baseline-']", function (event) {
        //get the employee number
        var target = event.target;
        var id = target.id.split('-')[1];
        //trigger the blur event on all the inputs for the employees wages to recalculate
        $("#wkone-" + id).blur();
        $("#wktwo-" + id).blur();
        $("#wkthree-" + id).blur();
        $("#wkfour-" + id).blur();
      });

      /**
       * run the blur event for the wage input when the corresponding leave 
       * with pay option is checked
       */
      $(document).on("click", ".emp-lv > *", function (event) {
        leaveWithPayStateChanged(event);
      });
      function leaveWithPayStateChanged(event) {
        var target = null;
        //keypress event will send the checkbox as the event target
        if (event.target.nodeName == 'INPUT') {
          target = $("label[for='" + event.target.id + "']");
        } else {
          target = event.target;
        }
        var forValue = $(target).attr("for");
        var parts = forValue.split('-');
        var wageInputId = parts[0] + '-' + parts[2];
        $("#" + wageInputId).blur();
      }

      //send data to fields in 2B (need to add French text)
			
     //Changed to target NEXT button instead of push to 2b button (might not be needed);
			$(document).on("click", ".steps-wrapper:nth-child(4) button:contains('Next')", function (event) {
        calculateTotals();
      });


      $(document).on("blur", "#p2c-ee-alt2", function(event) {
        if (event.target.value == 0) {
          $("#p3-ei").prop("readonly", true);
          $("#p3-ei").val("0.00");
          $("#p3-cpp").prop("readonly", true);
          $("#p3-cpp").val("0.00");
          $(".p3-ee-req").addClass("hidden");
          $(".no-lwp-disclaimer").removeClass("hidden");
        } else {
          $("#p3-ei").prop("readonly", false);
          $("#p3-ei").val("");
          $("#p3-cpp").prop("readonly", false);
          $("#p3-cpp").val("");
          $(".no-lwp-disclaimer").addClass("hidden");
          $(".p3-ee-req").removeClass("hidden");
        }
      });


	  //update percentage summary elements in 2B
      $(document).on("blur", "#p2b-c0", function (event) {
        $("output[for='p2b-c0']").text(toPercent(zeroIfEmpty(event.target.value)));
      });
      //update percentage summary elements in 2B 
      $(document).on("blur", "#p2b-c1", function (event) {
        $("output[for='p2b-c1']").text(toPercent(zeroIfEmpty(event.target.value)));
      });
      $(document).on("blur", "#p2b-c2", function (event) {
        $("output[for='p2b-c2']").text(toPercent(zeroIfEmpty(event.target.value)));
      });
      $(document).on("blur", "#p2b-c3", function (event) {
        $("output[for='p2b-c3']").text(toPercent(zeroIfEmpty(event.target.value)));
      });

      /**
       * getClaimMonth()
       * 
       * get the month where the claim period mostly falls
       * 
       * @param {Int} dateRange the claim period dates in 
       * YYYY-MM-DD--YYYY--MM-DD format
       * 
       * @return {Int} the claim month in numeric form 
       */
      var date1Max = 0;
      function getClaimMonth(dateRange) {
        var dates = dateRange.split('--');
        var date1Arr = dates[0].split("-");
        var date2Arr = dates[1].split("-");
        date1Arr[1] = date1Arr[1] - 1;
        date2Arr[1] = date2Arr[1] - 1;
        var date1 = new Date(Date.UTC(date1Arr[0], date1Arr[1], date1Arr[2]));
        var date2 = new Date(Date.UTC(date2Arr[0], date2Arr[1], date2Arr[2]));
        var date1Counter = 0;
        var date1Month = date1.getUTCMonth();
        var date2Counter = 0;
        var date2Month = date2.getUTCMonth();
        if (dateRange == "2020-12-20--2021-01-16") { //period 11/4 was arbitrarily defined differently from this rule...
          var claimMonth = date1Month + 1;
          return pad(claimMonth, 2);
        }
        if (date1Month == date2Month) {
          return date1Month + 1;
        }
        while (date1Month == date1.getUTCMonth()) {
          date1Counter++;
          date1.setUTCDate(date1.getUTCDate() + 1);
        }
        while (date2Month == date2.getUTCMonth()) {
          date2Counter++;
          date2.setUTCDate(date2.getUTCDate() - 1);
        }
        if (parseInt(date1Counter) < parseInt(date2Counter)) {
          return date2Month + 1;
        } else if (parseInt(date1Counter) > parseInt(date2Counter)) {
          return date1Month + 1;
        } else {
          return null;
        }
      }

      //https://stackoverflow.com/questions/2998784/how-to-output-numbers-with-leading-zeros-in-javascript
      function pad(num, size) {
        num = num.toString();
        while (num.length < size) num = "0" + num;
        return num;
      }

      /**
       * Calculate the top up rate
       * 
       * @param {Float} reduction the percentage average three month revenue 
       * reduction represented as a decimal
       *
       * @return {Float} the top up rate
       */
      function getP5PlusTopUpRate(reduction) {
        var claimPeriod = parseInt($("#claim-period option:selected").data("claim-period"));
        var topUpMultiplier = [1.25, 1.25, 1.25, 1.25, 1.25, 1.25, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.75, 1.25, 0.75, 0.5];
        var topUpMax = [0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.35, 0.35, 0.35, 0.35, 0.35, 0.35, 0.35, 0.25, 0.15, 0.1];
        if (topUpMultiplier[claimPeriod - 5] * (reduction - 0.5) > topUpMax[claimPeriod - 5]) {
          return topUpMax[claimPeriod - 5];
        } else {
          return topUpMultiplier[claimPeriod - 5] * (reduction - 0.5);
        }
      }

      /**
       * Calculate the base rate
       * @param {Float} revReduction the revenue reduction percentage 
       * represented as a decimal
       *  
       * @return {Float} the calculated base rate
       */
      function getP5PlusBaseRate(revReduction) {
        //max base and period for P5+
        var maxBase = [0.6, 0.6, 0.5, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.4, 0.35, 0.25, 0.1];
        var scaleBase = [1.2, 1.2, 1.0, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.8, 0.875, 0.625, 0.25];
        var period = $("#claim-period option:selected").data("claim-period");
        if (period > 17) {
          revReduction = revReduction - 0.1;
        }
        if (scaleBase[period - 5] * revReduction >= maxBase[period - 5]) {
          return maxBase[period - 5];
        } else {
          return scaleBase[period - 5] * revReduction;
        }
      }

      /**
       * Calculate the employee CEWS amount with the p1-4 formula
       *
       * @param {Boolean} armsLength whether the employee is at arms length
       * @param {Int} weeklyRemun the employees weekly pay being calculated
       * @param {Int} baselineRemun the employees baseline pre-crisis pay
       *
       * @return {Int} the calculated weekly CEWS amount 
       */
      function oldFormula(armsLength, weeklyRemun, baselineRemun) {
        if (armsLength) {
          return Math.max(
            Math.min(0.75 * weeklyRemun, 847),
            Math.min(0.75 * baselineRemun, weeklyRemun, 847)
          );
        } else {
          return Math.max(0, Math.min(847, weeklyRemun, baselineRemun * 0.75));
        }
      }

      /**
       * Calculate the employee cews amount with the P5+ formula
       *
       * @param {Boolean} armsLength whether the employee is at arms length
       * @param {Int} weeklyRemun the employees weekly pay being calculated
       * @param {Int} baselineRemun the employees baseline pre-crisis pay
       * @param {String} overall the overall CEWS rate 
       *  
       * @return {Int} the calculated weekly CEWS amount    
       */
      function newFormula(armsLength, weeklyRemun, baselineRemun, overall) {
        if (armsLength) {

          return Math.min(1129, weeklyRemun) * overall;
        } else {
          return Math.min(1129, weeklyRemun, baselineRemun) * overall;
        }
      }

      // Bind the init event of the plugin
      $document.on("timerpoke.wb " + initEvent, selector, init);
      // Add the timer poke to initialize the plugin
      wb.add(selector);
    })(jQuery, window, wb);
    $(document).on("wb-ready.wb", function () {
      $("#rate-reduction").addClass("hidden");
      $("#reduction-percent-panel").addClass("hidden");
    });
    // TODO: Escape commas and whitespaces in input[type=number] in IE and Edge(Trident)


    //fix for duplicated popup trigger
    $(document).on("click", ".arms-length-def", function (event) {
      showPopup("armslength");
    });
    $(document).on("click", ".baseline-rem-def", function (event) {
      showPopup("baseline-rem");
    });
    $(document).on("click", ".pay-claim-def", function (event) {
      showPopup("pay-claim");
    });
    $(document).on("click", ".toCSV", function (event) {
      export_table_to_csv("employee-cews.csv");
    });

    /**
     * export_table_to_csv
     *
     * https://jsfiddle.net/gengns/j1jm2tjx/
     */
    function export_table_to_csv(filename) {
      var csv = [];
      var rows = $("#dataset-filter tr");
      for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td, th");

        for (var j = 0; j < cols.length; j++) {
          if (document.documentElement.lang == "fr") {
            var val = cols[j].innerText.replace(",", ".");
            val = val.replace(/,/g, ".")
            val = val.replace(/\s/g, "")
            row.push(val);
          } else {
            row.push(cols[j].innerText.replace(",", ""));
          }
        }

        csv.push(row.join(","));
      }
      // Download CSV
      download_csv(csv.join("\n"), filename);
    }
    /**
     * download_csv
     *
     * https://jsfiddle.net/gengns/j1jm2tjx/
     * 
     */
    function download_csv(csv, filename) {
      var csvFile;
      var downloadLink;

      // CSV FILE
      csv = "\uFEFF" + csv;
      csvFile = new Blob([csv], { type: "text/csv", encoding: "UTF-8" });

      // Download link
      downloadLink = document.createElement("a");

      // File name
      downloadLink.download = filename;

      // We have to create a link to the file
      downloadLink.href = window.URL.createObjectURL(csvFile);

      // Make sure that the link is not displayed
      downloadLink.style.display = "none";

      // Add the link to your DOM
      document.body.appendChild(downloadLink);

      // Lanzamos
      downloadLink.click();
    }

    /**
     * required to allow duplicated popup buttons to open the associated popup
     */
    function showPopup(id) {
      (function ($, wb) {
        'use strict';
        var $document = wb.doc;
        $document.trigger("open.wb-lbx", [
          [
            {
              src: "#" + id,
              type: "inline"
            }
          ],
          false
        ]);
      })(jQuery, wb);
    }

    $(document).on("blur", "input[id^='ee-name-']", function(event) {
      var className = $(event.target).prop("id");
      var empNumber = $(event.target).prop('id').split("-")[2];
      var displays = $("span." + className);
      var displayValue = "";
      if (empNumber > 0 && event.target.value == "") {
        displayValue = "Employee " + empNumber;
      } else {
        displayValue = event.target.value;
      }
      $(displays).each(function(i, element) {
        $(element).text(displayValue);
      });
    });
  </script> 
  <script>

      $(".action-checkbox").change(function () {
        if ($('.action-checkbox:checked').length == $('.action-checkbox').length) {
          $("#action-msg1").removeClass("hidden").addClass("visible");
          $("#action-no-msg").addClass("hidden").removeClass("visible");
        }
        if ($('.action-checkbox:checked').length !== $('.action-checkbox').length) {
          $("#action-msg1").addClass("hidden").removeClass("visible");
          $("#action-no-msg").removeClass("hidden").addClass("visible");
        }
      })
    </script>
</body>
</html>
